"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2579],{73232:function(e,n,t){t.d(n,{D:function(){return s}});t(29901);var r=t(78170),a=t(61250),s=[{label:"Approved",value:r.nT.Approved,icon:(0,a.jsx)("div",{className:"w-3.5 h-3.5 mr-2 rounded-full bg-green-500"})},{label:"Needs review",value:r.nT.NeedsReview,icon:(0,a.jsx)("div",{className:"w-3.5 h-3.5 mr-2 rounded-full bg-orange-500"})},{label:"In progress",value:r.nT.InProgress,icon:(0,a.jsx)("div",{className:"w-3.5 h-3.5 mr-2 rounded-full bg-violet"})},{label:"No status",value:"NoStatus",icon:(0,a.jsx)("div",{className:"w-3.5 h-3.5 mr-2 rounded-full bg-gray-300"})}]},45763:function(e,n,t){t.d(n,{v:function(){return x}});var r=t(17654),a=t(87709);function s(e,n){(0,a.Z)(2,arguments);var t=(0,r.Z)(e),s=(0,r.Z)(n);return t.getTime()===s.getTime()}var o=t(83879),i=t(27617);function l(e,n){(0,a.Z)(2,arguments);var t=(0,i.Z)(e),r=(0,o.Z)(n);return isNaN(r)?new Date(NaN):r?(t.setDate(t.getDate()+r),t):t}function c(e,n){(0,a.Z)(2,arguments);var t=(0,o.Z)(n);return l(e,-t)}function u(e,n){(0,a.Z)(2,arguments);var t=(0,i.Z)(e),r=(0,i.Z)(n);return t.getFullYear()===r.getFullYear()}var d=t(40467),f=t(29901),m=t(61250),x=function(e){var n=e.date,t=(0,f.useState)(""),r=t[0],o=t[1],i=(0,f.useCallback)((function(){var e=new Date(n);!function(e){return(0,a.Z)(1,arguments),s(e,Date.now())}(e)?!function(e){return(0,a.Z)(1,arguments),s(e,c(Date.now(),1))}(e)?!function(e){return(0,a.Z)(1,arguments),u(e,Date.now())}(e)?o("".concat((0,d.Z)(e,"yy/M/d"))):o("".concat((0,d.Z)(e,"d MMM"))):o("yesterday"):o("today")}),[n]);return(0,f.useEffect)((function(){i()}),[i]),(0,m.jsx)("span",{children:r})}},15459:function(e,n,t){t.d(n,{Z:function(){return a}});t(29901);var r=t(61250),a=function(e){var n=e.additionalClasses,t=e.children;return(0,r.jsx)("div",{className:"border bg-white border-gray-100 rounded-md ".concat(n),children:t})}},94197:function(e,n,t){t.d(n,{Kp:function(){return C},W_:function(){return k}});var r=t(83849),a=t.n(r),s=t(29901),o=t(73232),i=t(2512),l=t(50471),c=t(85718),u=t(32458),d=t(6825),f=t(45763),m=t(47399),x=t(29100),h=t(19867),p=t(41169),j=t(78170),v=t(61250),b=function(e){var n=e.isCollapsed,t=void 0!==n&&n,r=e.status,a=o.D.find((function(e){return e.value===r}));return r&&a?t?(0,v.jsx)("div",{className:"px-3 py-1 mt-1",children:a.icon}):(0,v.jsx)("div",{className:"px-1 text-gray-600 bg-gray-100 rounded-md",children:(0,v.jsxs)("div",{className:"flex items-center px-2 py-1 text-sm",children:[a.icon,(0,v.jsx)("p",{children:a.label})]})}):(0,v.jsx)(v.Fragment,{})},g=function(e){var n=e.hasFullAccess,t=e.isHovered,r=e.isInSelectionMode,s=e.isSelectable,o=e.isSelected,i=e.onCheckboxChange,l=e.status;return(0,v.jsxs)("div",{className:"absolute z-20 flex justify-between w-full pr-2 top-2",children:[(0,v.jsx)(m.Z,{tag:"div",variant:"caption-1",children:t?(0,v.jsx)(b,{status:l}):(0,v.jsx)(b,{status:l,isCollapsed:!0})}),(0,v.jsx)(m.Z,{variant:"caption-1",tag:"div",children:(t&&s||o||r)&&n&&(0,v.jsx)(x.X,{additionalClasses:a()({"-mr-0.5 -mt-0.5":o}),label:"check-card",checked:o,onChange:i})})]})},w=function(e){var n=e.backgroundColor,t=e.hasFullAccess,r=e.hasPlayerError,o=e.hasThumbnailError,i=e.isHovered,l=e.isInSelectionMode,f=e.isSelectable,m=e.isSelected,x=e.onCheckboxChange,h=e.onOverlayClick,p=e.onOverlayKeydown,j=e.onPlayerError,b=e.onThumbnailError,w=e.playerRef,k=e.playerRefCallback,C=e.status,y=e.thumbnailSrc,S=e.title,N=e.url,I=w.current;return(0,s.useEffect)((function(){return I&&I.addEventListener("error",j),function(){I&&I.removeEventListener("error",j)}}),[I,w,j]),(0,v.jsxs)("div",{className:"w-full h-[calc(100%-3.5rem)] relative z-0 p-2",style:{backgroundColor:null!=n?n:"none"},children:[(0,v.jsx)(g,{hasFullAccess:t,isHovered:i,isSelectable:f,isSelected:m,isInSelectionMode:l,status:C,onCheckboxChange:x}),(0,v.jsx)("div",{onKeyDown:p,onClick:h,className:"absolute inset-0 z-10 cursor-pointer"}),(0,v.jsx)("div",{className:a()("mx-auto h-full",{hidden:!i&&y}),children:N&&!r?(0,v.jsx)(u.V,{autoplay:!1,loop:!0,src:N,playerRef:k}):(0,v.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,v.jsx)(c.p,{})})}),(0,v.jsx)("div",{className:a()("mx-auto h-full",{hidden:i||!y}),children:(0,v.jsx)(d.y,{src:y,onError:b,alt:S,hasError:o})})]})},k=function(e){var n=e.animation,t=e.isMenuDisabled,r=e.onTitleDoubleClick,s=e.projectName,o=e.showActionsMenu,l=e.showAddToCollection,c=e.showUpdatedUser,u=e.title,d=e.updatedDate,x=e.username;return(0,v.jsxs)("div",{className:"relative py-1.5 px-2.5 w-full flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"mr-2",children:[(0,j.xK)(n)&&(0,v.jsx)(i.J,{name:"icon-creator-grid",color:"text-gray-300"}),(0,j.QR)(n)&&(0,v.jsx)(i.J,{name:"icon-lottie-grid",color:"text-gray-300"})]}),(0,v.jsxs)("div",{className:a()("flex flex-col pr-10 space-y-1",{"w-full":!o,"w-52":o}),children:[(0,v.jsx)("button",{onClick:r,type:"button",className:"w-full",children:(0,v.jsx)(m.Z,{truncate:!0,title:u,children:u})}),(0,v.jsxs)("div",{className:"flex space-x-1",children:[c?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(m.Z,{variant:"caption-1",truncate:!0,color:"gray",children:(0,v.jsx)("span",{children:"Modified by ".concat(x,", ")})})}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(m.Z,{variant:"caption-1",truncate:!0,color:"gray",children:"in ".concat(s)}),(0,v.jsx)(m.Z,{variant:"caption-1",color:"gray",children:(0,v.jsx)("span",{children:"â€¢"})})]}),d&&(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsxs)(m.Z,{variant:"caption-1",color:"gray",children:[!c&&(0,v.jsx)("span",{children:"Modified "}),(0,v.jsx)(f.v,{date:d})]})})]})]}),(0,v.jsx)("div",{className:"flex-grow"}),!t&&(0,v.jsx)("div",{className:"absolute invisible top-2 right-2 group-hover:visible",children:(0,v.jsx)(h.H,{show:o,showAddToCollection:l,animation:n})})]})},C=function(e){var n=e.animation,t=e.backgroundColor,r=void 0===t?null:t,o=e.date,i=e.disableMenu,c=void 0!==i&&i,u=e.onClick,d=e.onSelectionChange,f=e.project,m=e.scopes,x=e.selectable,h=void 0!==x&&x,j=e.selected,b=void 0!==j&&j,g=e.selectionMode,C=void 0!==g&&g,y=e.showAddToCollection,S=e.showUpdatedUser,N=void 0===S||S,I=e.status,Z=e.thumbnail,F=e.title,D=e.url,M=e.username,R=(0,s.useState)(!1),E=R[0],T=R[1],A=(0,p.a)({scopes:m||[]}).canFullAccess,J=(0,s.useState)(!1),W=J[0],L=J[1],O=(0,s.useState)(!1),P=O[0],H=O[1],U=(0,s.useState)(!1),z=U[0],_=U[1],K=(0,s.useRef)(null),B=(0,s.useCallback)((function(e){e&&(K.current=e)}),[]),Q=(0,s.useCallback)((function(){var e;null===(e=K.current)||void 0===e||e.play(),T(!0)}),[K,T]),Y=(0,s.useCallback)((function(){var e;null===(e=K.current)||void 0===e||e.pause(),T(!1)}),[K,T]),q=(0,s.useCallback)((function(){d&&d()}),[d]),V=(0,s.useCallback)((function(){L(!1)}),[]),X=(0,s.useCallback)((function(){C&&d?d():u&&u()}),[d,u,C]),G=(0,s.useCallback)((function(e){"Space"===e.key&&X()}),[X]),$=(0,s.useCallback)((function(){H(!0)}),[]),ee=(0,s.useCallback)((function(){_(!0)}),[]),ne=(0,s.useCallback)((function(){A()&&L(!0)}),[A]),te=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,r=(0,s.useState)(0),a=r[0],o=r[1];return(0,s.useEffect)((function(){var r=setTimeout((function(){1===a&&e(),o(0)}),t);return 2===a&&n(),function(){return clearTimeout(r)}}),[a]),function(){return o((function(e){return e+1}))}}(X,ne);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:a()("w-full transition duration-100 ease-out bg-white border border-gray-100 rounded-md animation-card overflow-hidden group",{"ring ring-teal-300 ring-3":b}),onMouseEnter:Q,onMouseLeave:Y,children:(0,v.jsxs)("div",{className:"animation",children:[(0,v.jsx)(w,{backgroundColor:r,hasFullAccess:A(),isHovered:E,hasThumbnailError:P,hasPlayerError:z,isSelectable:h,isSelected:b,isInSelectionMode:C,status:I,title:F,thumbnailSrc:Z,url:D,playerRefCallback:B,playerRef:K,onCheckboxChange:q,onOverlayClick:X,onOverlayKeydown:G,onPlayerError:ee,onThumbnailError:$}),(0,v.jsx)(k,{animation:n,isMenuDisabled:c,onTitleDoubleClick:te,projectName:f,showAddToCollection:Boolean(y),showUpdatedUser:N,title:F,updatedDate:o,username:M,showActionsMenu:E})]})}),(0,v.jsx)(l.R,{show:W,animationId:n.id,animationName:n.name,close:V})]})}},19867:function(e,n,t){t.d(n,{H:function(){return I}});var r=t(59715),a=t(62295),s=t(78733),o=t(29901),i=t(46019),l=t(70568),c=t(58514),u=t(16392),d=t(83771),f=t(31912),m=t(2512),x=t(30371),h=t(36255),p=t(56875),j=t(73386),v=t(61250),b=function(e){var n=e.animation,t=e.closeCallback,r=e.open;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(p.H,{title:"Download as",show:r,closeCallback:t,children:(0,v.jsx)("div",{className:"-mx-4",children:(0,v.jsx)(j.H,{animation:n})})})})},g=t(50471),w=t(11052),k=t(44076),C=t(88725),y=t(41169),S=t(36088),N=t(78170),I=function(e){var n,t=e.animation,p=e.show,j=e.showAddToCollection,I=void 0===j||j,Z=(0,d.p)(),F=(0,s.useRouter)(),D=(0,l.cF)().activeWorkspaceId,M=(0,S.w)(),R=(0,o.useState)(!1),E=R[0],T=R[1],A=(0,o.useState)(!1),J=A[0],W=A[1],L=(0,o.useState)(!1),O=L[0],P=L[1],H=(0,o.useState)(!1),U=H[0],z=H[1],_=(0,o.useState)(!1),K=_[0],B=_[1],Q=(0,o.useRef)(null),Y=(0,o.useState)(!1),q=Y[0],V=Y[1],X=(0,i.useRecoilValue)(c.h),G=(0,y.a)({scopes:t.animationPermissionScopes||[]}),$=G.canDownload,ee=G.canFullAccess,ne=(0,o.useCallback)((function(){null==Z||Z.pushSuccess((0,v.jsxs)("span",{children:["Animation was successfully moved to"," ",(0,v.jsx)("span",{className:"font-bold",children:"private-animation"===(null==X?void 0:X.type)?"your private animations":null==X?void 0:X.name}),"."]}))}),[Z,X]),te=(0,o.useCallback)((function(){return T(!0)}),[T]),re=(0,v.jsxs)(f.f.Item,{onSelect:te,children:[(0,v.jsx)(m.J,{name:"pencil",color:"text-gray-500",marginRight:!0}),(0,v.jsx)("span",{children:"Rename"})]}),ae=(0,o.useCallback)((function(){return W(!0)}),[W]),se=(0,v.jsxs)(f.f.Item,{onSelect:ae,children:[(0,v.jsx)(m.J,{name:"move",color:"text-gray-500",marginRight:!0}),(0,v.jsx)("span",{children:"Move"})]}),oe=(0,o.useCallback)((function(){return P(!0)}),[P]),ie=(0,v.jsxs)(f.f.Item,{onSelect:oe,children:[(0,v.jsx)(m.J,{name:"add-to-collection",color:"text-gray-500",marginRight:!0}),(0,v.jsx)("span",{children:"Save to collection"})]}),le=(0,o.useCallback)((function(){return z(!0)}),[z]),ce=(0,v.jsxs)(f.f.Item,{onSelect:le,destructiveAction:!0,children:[(0,v.jsx)(m.J,{name:"delete",color:"text-red-500",marginRight:!0}),(0,v.jsx)("span",{children:"Delete file"})]}),ue=(0,o.useMemo)((function(){return(0,v.jsx)(C.z,{featureService:M,animationId:t.id,animationStatus:t.status,projectId:t.project.id,workspaceId:t.project.workspace.id,isSubMenu:!0})}),[t.id,t.project.id,t.project.workspace.id,t.status,M]),de=(0,o.useCallback)((function(){return B(!0)}),[B]),fe=(0,o.useCallback)((function(){return B(!1)}),[B]),me=(0,v.jsxs)(f.f.Item,{onSelect:de,children:[(0,v.jsx)(m.J,{name:"download",color:"text-gray-500",marginRight:!0}),(0,v.jsx)("span",{children:"Download as"})]}),xe=(0,o.useCallback)((function(){var e;null===(e=Q.current)||void 0===e||e.submitForm()}),[]),he=(0,v.jsxs)(f.f.Item,{onSelect:xe,children:[(0,v.jsx)(m.J,{name:"earth",color:"text-gray-500",marginRight:!0}),(0,v.jsx)("span",{children:"Publish to public"}),(0,v.jsx)(w.Z,{fileUrl:null===(n=t.fileObject)||void 0===n?void 0:n.url,animationName:t.name,ref:Q})]}),pe=(0,o.useCallback)((function(){window.open("".concat("https://workshop.lottiefiles.dev","?fileId=").concat(t.id),"_blank")}),[t]),je=(0,v.jsxs)(f.f.Item,{onSelect:pe,children:[(0,v.jsx)(m.J,{name:"lottie",color:"text-gray-500",marginRight:!0}),(0,v.jsx)("span",{children:"Open in Creator"})]}),ve=(0,o.useCallback)((function(){T(!1)}),[]),be=(0,o.useCallback)((function(){W(!1)}),[]),ge=(0,o.useCallback)((function(){P(!1)}),[]),we=(0,o.useCallback)((function(){z(!1)}),[]),ke=(0,r.SS)(a.AD.SHOW_DRAFT_PROJECT),Ce="default";return(0,N.xK)(t)?Ce="creator":F.pathname.startsWith("/project")?Ce="projects":F.pathname.startsWith("/collection")?Ce="collections":F.pathname.startsWith("/folder")?Ce="folders":F.pathname.startsWith("/search")&&(Ce="search"),$()||ee()?$()&&!ee()?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(f.f,{children:[(0,v.jsx)(f.f.Trigger,{type:"icon",children:(0,v.jsx)(m.J,{name:"kebab-menu"})}),(0,v.jsx)(f.f.Content,{side:"bottom",align:"start",children:me})]}),(0,v.jsx)(b,{closeCallback:fe,open:K,animation:t})]}):(0,v.jsxs)("div",{className:p||q?"visible":"invisible",children:[(0,v.jsxs)(f.f,{onOpenChange:function(e){V(e)},children:[(0,v.jsx)(f.f.Trigger,{type:"icon",children:(0,v.jsx)(m.J,{name:"kebab-menu"})}),(0,v.jsxs)(f.f.Content,{side:"bottom",align:"start",children:["creator"===Ce&&(0,v.jsxs)(v.Fragment,{children:[re,(0,v.jsx)(f.f.Separator,{}),se,(0,v.jsx)(f.f.Separator,{}),ce]}),"projects"===Ce&&(0,v.jsxs)(v.Fragment,{children:[re,ke.on&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.f.Separator,{}),je]}),(0,v.jsx)(f.f.Separator,{}),se,I?ie:null,ue,me,he,(0,v.jsx)(f.f.Separator,{}),ce]}),"collections"===Ce&&(0,v.jsx)(k.Q,{animationIds:[t.id],workspaceId:t.project.workspace.id,isMenuItem:!0}),"folders"===Ce&&(0,v.jsxs)(v.Fragment,{children:[re,ke.on&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.f.Separator,{}),je]}),(0,v.jsx)(f.f.Separator,{}),se,ie,me,he,(0,v.jsx)(f.f.Separator,{}),ce]}),"search"===Ce&&(0,v.jsxs)(v.Fragment,{children:[me,he,(0,v.jsx)(f.f.Separator,{}),ce]}),"default"===Ce&&(0,v.jsxs)(v.Fragment,{children:[re,ke.on&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.f.Separator,{}),je]}),(0,v.jsx)(f.f.Separator,{}),me,he,(0,v.jsx)(f.f.Separator,{}),ce]})]})]}),(0,v.jsx)(g.R,{show:E,animationId:t.id,animationName:t.name,close:ve}),(0,v.jsx)(u.Z,{workspaceId:t.project.workspace.id,isPrivate:Boolean(t.project.isPrivate),show:J,animationIds:[t.id],onTransferComplete:ne,close:be}),I&&(0,v.jsx)(x.m,{show:O,animationIds:[t.id],close:ge,workspaceId:D}),(0,v.jsx)(h.J,{show:U,animationIds:[t.id],name:t.name,close:we,projectId:t.project.id,workspaceId:t.project.workspace.id}),(0,v.jsx)(b,{closeCallback:fe,open:K,animation:t})]}):(0,v.jsx)(v.Fragment,{})}},30371:function(e,n,t){t.d(n,{m:function(){return N}});var r=t(55312),a=t(89303),s=t(24642),o=t.n(s),i=t(68668),l=t(29901),c=t(46833),u=t.n(c),d=t(81638),f=t(32127),m=t(64167),x=t(6825),h=t(70012),p=t(7092),j=t(2512),v=t(32771),b=t(83802),g=t(20116),w=t(61250),k=function(e){var n=e.filesInWorkflowCollection,t=e.selection,r=l.useMemo((function(){var e=t.reduce((function(e,t){return n.includes(t)?e+1:e}),0);return e===t.length?"present":e>0&&e<t.length?"indeterministic":null}),[n,t]);return null===r?(0,w.jsx)(w.Fragment,{}):(0,w.jsx)("div",{className:"absolute flex items-center justify-center bg-teal-600 rounded-md w-11 h-11 opacity-90",children:"indeterministic"===r?(0,w.jsx)("svg",{width:"23",height:"5",viewBox:"0 0 23 5",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{d:"M21.4844 2.4844L2.34315 2.65685",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})}):(0,w.jsx)("svg",{width:"26",height:"20",viewBox:"0 0 26 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{d:"M24 2L8.28571 18L2 11.0667",stroke:"white",strokeWidth:"2.4",strokeLinecap:"round",strokeLinejoin:"round"})})})},C=t(29100),y=t(3481),S=function(e){var n,t,r=e.addToWorkspaceCollection,a=e.animations,s=e.collection,o=e.removeFromWorkspaceCollection,i=(0,l.useState)(!1),c=i[0],u=i[1],d=(0,l.useCallback)((function(){u(!0)}),[]),f=(0,l.useCallback)((function(){u(!1)}),[]),m=(0,l.useCallback)((function(e){r(e)}),[r]);return(0,w.jsx)("div",{role:"presentation",onMouseEnter:d,onMouseLeave:f,children:(0,w.jsx)("div",{className:"overflow-hidden bg-white sm:rounded-md hover:bg-gray-100",children:(0,w.jsxs)("div",{className:"flex items-center px-2 py-2",children:[(0,w.jsxs)("div",{className:"relative flex items-center flex-1 min-w-0",children:[s.files&&(0,w.jsxs)(w.Fragment,{children:[s.files.length>0&&s.featuredFileObject&&null!==(n=s.featuredFileObject.thumbnails)&&void 0!==n&&n.webp?(0,w.jsx)("div",{className:"flex items-center justify-center text-white bg-gray-100 rounded-md w-11 h-11",children:(0,w.jsx)(x.y,{src:null===(t=s.featuredFileObject.thumbnails.webp)||void 0===t?void 0:t.medium.url,alt:s.name})}):(0,w.jsx)("div",{className:"flex items-center justify-center p-1 bg-gray-100 rounded-md w-11 h-11 opacity-40",children:(0,w.jsx)("img",{src:"/images/empty-states/empty-folder-thumbnail.svg",alt:"empty collection"})}),(0,w.jsx)(k,{filesInWorkflowCollection:s.files,selection:a})]}),(0,w.jsxs)("div",{className:"px-4",children:[(0,w.jsxs)("div",{className:"flex items-center",children:[s.isPrivate&&(0,w.jsx)(j.J,{name:"lock-fill",color:"text-gray-600",className:"ml-[2.67px] mr-1.5",small:!0}),(0,w.jsxs)("p",{className:"text-gray-900",children:[" ",s.name]})]}),(0,w.jsx)("p",{className:"flex items-center text-sm text-gray-900",children:(0,w.jsx)(b.q,{singular:"Animation",count:s.files&&s.files.length})})]})]}),c&&(0,w.jsxs)("div",{className:"mr-2",children:[" ",s.files.toString().includes(a.toString())?(0,w.jsx)(h.z,{text:"Remove",variant:"tertiary",onClick:function(){return o(s.id)}}):(0,w.jsx)(h.z,{text:"Save",onClick:function(){return m(s.id)}})]})]})})})},N=function(e){var n=e.animationIds,t=e.clear,s=e.close,c=e.show,x=e.workspaceId,b=(0,l.useState)([]),k=b[0],N=b[1],I=(0,l.useState)(!1),Z=I[0],F=I[1],D=(0,l.useState)([]),M=D[0],R=D[1],E=(0,d.aM)({query:f.Cm,variables:{workspaceId:x},pause:!x}),T=(0,a.Z)(E,1)[0];(0,l.useEffect)((function(){if(T.fetching)F(!0);else{if(F(!1),T.error)throw new Error(T.error.message);T.data&&T.data.workspaceCollections.edges.length>0&&(N(T.data.workspaceCollections.edges.map((function(e){return e.node}))),F(!1))}}),[T]);var A=(0,d.Db)(f.yf),J=(0,a.Z)(A,2)[1],W=function(){var e=(0,r.Z)(o().mark((function e(r){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n,n.forEach((function(e){(0,i.Z9)(new i.n7({collectionId:r,fileId:e,workspaceId:x}))})),e.prev=2,e.next=5,J({id:r,fileIds:a});case 5:e.sent.error||(M.push(r),R(M),t&&t()),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),L=(0,d.Db)(f.aQ),O=(0,a.Z)(L,2)[1],P=function(){var e=(0,r.Z)(o().mark((function e(t){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,e.prev=1,e.next=4,O({id:t,fileIds:r});case 4:e.sent.error||(a=M.filter((function(e){return e!==t})),R(a)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),H=(0,l.useState)(!1),U=H[0],z=H[1],_=(0,d.Db)(f.AA),K=(0,a.Z)(_,2)[1],B=(0,l.useState)({}),Q=B[0],Y=B[1],q=(0,l.useState)(""),V=q[0],X=q[1],G=(0,l.useCallback)((function(e){e&&e.focus()}),[]),$=(0,l.useCallback)((0,r.Z)(o().mark((function e(){var t,r,a,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V){e.next=2;break}return e.abrupt("return");case 2:return t=n,r={name:V,workspaceId:x,slug:u()(V.toLowerCase()),files:t},e.prev=4,e.next=7,K({input:r});case 7:(a=e.sent).error?(0,m.I1)(a.error,Q,Y):(z(!1),X(""),l=a.data.workspaceCollectionCreate,M.push(l.id),R(M),l.id&&(0,i.Z9)(new i.mr({collectionId:l.id,collectionName:l.name,workspaceId:x})),M.length<=1&&s()),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:case"end":return e.stop()}}),e,null,[[4,11]])}))),[M,n,s,K,Q,V,x]),ee=(0,l.useCallback)((function(){s(),R([])}),[s]),ne=(0,l.useCallback)((function(e){X(e.currentTarget.value)}),[]),te=(0,l.useCallback)((function(){z(!1),X("")}),[]),re=(0,l.useCallback)((function(){z(!0)}),[]);return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(v.k,{title:(0,w.jsx)(w.Fragment,{children:n.length<=1?(0,w.jsxs)("p",{className:"text-base text-gray-900 font-lf-bold",children:["Save ",n.length," animation to collection"]}):(0,w.jsxs)("p",{className:"text-base text-gray-900 font-lf-bold",children:["Save ",n.length," Animations to Collection"]})}),show:c,closeCallback:ee,footerElements:U?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"flex flex-col w-full px-8 pt-4 space-y-2",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(y.I,{placeholder:"Collection Name",onChange:ne,inputRef:G,value:V,error:(0,m.ie)("name",Q),className:"rounded-r-none"}),(0,w.jsx)(h.z,{text:"Create",customClasses:"bg-teal-600 px-2 py-1.5 rounded hover:bg-teal-700 text-white text-sm",onClick:$}),(0,w.jsx)("div",{className:"ml-2",children:(0,w.jsx)(p.h,{name:"cross",onClick:te})})]}),(0,w.jsxs)("div",{className:"flex items-center -ml-1",children:[(0,w.jsx)(C.X,{label:"",valueLabel:"Make it private",onChange:function(e){console.log(e)}}),(0,w.jsx)(j.J,{name:"lock-fill",color:"text-gray-400",small:!0,marginLeft:!0})]})]})}):(0,w.jsxs)(w.Fragment,{children:[" ",(0,w.jsx)("div",{className:"px-8 py-4 -mb-6",children:(0,w.jsx)(g.A,{text:"Create new collection",icon:"plus",onClick:re})})]}),children:(0,w.jsx)("div",{className:"mt-4 mb-4 space-y-4 overflow-auto max-h-96",children:Z?(0,w.jsx)("div",{children:"Workflow collections loading ..."}):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"pb-4",children:k.map((function(e){return(0,w.jsx)(S,{animations:n,collection:e,addToWorkspaceCollection:W,removeFromWorkspaceCollection:P},e.id)}))})})})})})}},36255:function(e,n,t){t.d(n,{J:function(){return h}});var r=t(55312),a=t(89303),s=t(24642),o=t.n(s),i=t(68668),l=t(29901),c=t(81638),u=t(30424),d=t(83771),f=t(63254),m=t(12523),x=t(61250),h=function(e){var n,t=e.animationIds,s=e.close,h=e.name,p=void 0===h?"":h,j=e.projectId,v=e.show,b=e.workspaceId,g=(0,d.p)(),w=(0,l.useState)(!1),k=w[0],C=w[1],y=(0,c.Db)(u.TY),S=(0,a.Z)(y,2)[1],N=(0,l.useCallback)((0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=16;break}return C(!0),e.prev=2,e.next=5,S({ids:t});case 5:e.sent.error?null==g||g.pushError("An error occurred, animation could not be deleted."):null==g||g.pushSuccess("".concat(t.length>1?"Files":"File"," deleted successfully.")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),null==g||g.pushError("An error occurred, ".concat(t.length>1?"files":"file"," could not be deleted.")),C(!1);case 13:t.forEach((function(e){(0,i.Z9)(new i.U2({fileId:e,projectId:j,workspaceId:b}))})),C(!1),s(!0);case 16:case"end":return e.stop()}}),e,null,[[2,9]])}))),[t,j,b,S,g,s,k]);return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(f.s,{title:(n=(0,x.jsxs)("div",{children:["Delete ",t.length," files ?"]}),t.length<=1&&(n=(0,x.jsxs)("div",{children:["Delete ",p?(0,x.jsxs)("span",{children:['"',p,'"']}):(0,x.jsx)("span",{children:"file"})," ?"]})),(0,x.jsx)("h3",{className:"text-lg leading-6 font-lf-semi-bold text-red-500 w-[93%]",children:n})),body:(0,m.B)("You won't be able to undo this."),buttonTitle:"Delete",showModal:v,onConfirm:N,confirmLoading:k,closeCallback:function(){return s(!1)}})})}},73386:function(e,n,t){t.d(n,{H:function(){return o}});t(29901);var r=t(53172),a=t(36088),s=t(61250),o=function(e){var n=e.animation,t=e.isPublicDownload,o=void 0!==t&&t,i=(0,a.w)();return(0,s.jsx)(r.default,{featureService:i,size:"md",animation:n,isPublicDownload:o,basicMetadata:n.fileObject.attributes})}},44076:function(e,n,t){t.d(n,{Q:function(){return h}});var r=t(55312),a=t(89303),s=t(24642),o=t.n(s),i=t(68668),l=t(78733),c=(t(29901),t(81638)),u=t(32127),d=t(31912),f=t(2512),m=t(20116),x=t(61250),h=function(e){var n,t=e.animationIds,s=e.isMenuItem,h=void 0!==s&&s,p=e.onRemove,j=e.workspaceId,v=void 0===j?"":j,b=(0,l.useRouter)().query.id,g=(0,c.Db)(u.aQ),w=(0,a.Z)(g,2)[1],k=function(){var e=(0,r.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.prev=1,e.next=4,w({id:n,fileIds:r});case 4:e.sent.error||(r.forEach((function(e){(0,i.Z9)(new i.kS({collectionId:n,fileId:e,workspaceId:v}))})),p&&p()),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error("Unexpected error occurred during remove from collection operation.");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}();return n=h?(0,x.jsxs)(d.f.Item,{onSelect:(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k(b));case 1:case"end":return e.stop()}}),e)}))),children:[(0,x.jsx)(f.J,{name:"delete",color:"text-gray-500",marginRight:!0}),(0,x.jsx)("span",{children:"Remove from collection"})]}):(0,x.jsx)(m.A,{text:"Remove from collection",icon:"delete",onClick:(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k(b));case 1:case"end":return e.stop()}}),e)})))}),(0,x.jsx)(x.Fragment,{children:n})}}}]);