(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2142],{79093:function(e,t,r){"use strict";r.d(t,{Q:function(){return c}});var a=r(69452),s=r(57443),n=(r(29901),r(2512)),o=r(61250),c=function(e){var t=e.active,r=e.color,c=e.disabled,i=e.href,l=e.icon,d=e.query,u=e.text,p=["flex","items-center","justify-center","rounded-md","h-8"];switch(p=[].concat((0,a.Z)(p),l?["pl-2","pr-4"]:["px-4"]),p=[].concat((0,a.Z)(p),["text-sm","bg-none","focus:bg-none","focus:outline-none"]),r){case"teal":p=[].concat((0,a.Z)(p),["text-teal-500"]),p=[].concat((0,a.Z)(p),t?["font-lf-semi-bold","bg-teal-100"]:["font-lf-regular","hover:text-teal-700","hover:bg-teal-100"]);break;case"orange":p=[].concat((0,a.Z)(p),["text-orange-500"]),p=[].concat((0,a.Z)(p),t?["font-lf-semi-bold","bg-orange-100"]:["font-lf-regular","hover:text-orange-700","hover:bg-orange-100"]);break;case"green":p=[].concat((0,a.Z)(p),["text-green-500"]),p=[].concat((0,a.Z)(p),t?["font-lf-semi-bold","bg-green-100"]:["font-lf-regular","hover:text-green-700","hover:bg-green-100"]);break;case"red":p=[].concat((0,a.Z)(p),["text-red-500"]),p=[].concat((0,a.Z)(p),t?["font-lf-semi-bold","bg-red-100"]:["font-lf-regular","hover:text-red-700","hover:bg-red-100"]);break;default:p=[].concat((0,a.Z)(p),["text-gray-900"]),p=[].concat((0,a.Z)(p),t?["font-lf-semi-bold","bg-gray-100"]:["font-lf-regular","hover:text-gray-800","hover:bg-gray-100"])}return c&&(p=[].concat((0,a.Z)(p),["disabled:bg-none","disabled:opacity-30","disabled:cursor-not-allowed"])),(0,o.jsx)(s.default,{href:{pathname:i,query:d},children:(0,o.jsxs)("a",{href:i,className:p.join(" "),children:[l&&(0,o.jsx)(n.J,{name:l,marginRight:Boolean(u)}),u&&(0,o.jsx)(o.Fragment,{children:u})]})})}},29263:function(e,t,r){"use strict";r.d(t,{G:function(){return p}});var a=r(55312),s=r(24642),n=r.n(s),o=r(29901),c=r(80866),i=r(62879),l=r(47399),d=r(61250),u=[{title:"Full access",access:"full_access",current:!0},{title:"No Access",access:"no_access",current:!1}],p=function(e){var t=e.isPrivate,r=e.memberNumbers,s=e.onUpdateAccess,p=e.workspaceIcon,f=e.workspaceName,m=(0,o.useCallback)(function(){var e=(0,a.Z)(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s]),h=t?"no_access":"full_access",x="Everyone at ".concat(f);return(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(i.q,{name:f,src:p,large:!0,avatarOnly:!0}),(0,d.jsxs)("div",{className:"flex-grow space-y-1",children:[(0,d.jsx)(l.Z,{darkest:!0,children:x}),(0,d.jsx)("div",{className:"flex items-center space-x-1",children:(0,d.jsx)(l.Z,{variant:"caption-1",color:"gray",children:"".concat(r," team members")})})]}),(0,d.jsx)(c.O,{isGuest:!1,onChange:m,accessLevels:u,defaultAccess:h})]})}},64943:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return fe}});var a=r(55312),s=r(89303),n=r(24642),o=r.n(n),c=r(59715),i=r(68668),l=r(62295),d=r(96928),u=r(27722),p=r(29901),f=r(46019),m=r(81638),h=r(7031),x=r(2512),j=r(31054),v=r(47399),g=r(64685),b=r(98985),w=r(78733),y=r(38889),k=r(76644),C=r(24675),S=r(79093),I=r(59109),N=r(28634),E=r(7092),P=r(35378),Z=r(80113),_=r(94568),F=r(61250),R=function(e){var t=e.disableDeleteButton,r=e.projectId,a=e.projectTitle,s=e.workspaceId,n=(0,p.useState)(!1),o=n[0],c=n[1],i=(0,p.useState)(!1),l=i[0],d=i[1],u=(0,p.useState)(!1),f=u[0],m=u[1],h=(0,F.jsx)(E.h,{name:"meatball-menu",darker:!0}),j=[[{label:"Rename",icon:(0,F.jsx)(x.J,{name:"pencil",color:"text-gray-500",marginRight:!0}),onClick:function(){m(!0),c(!0)}},{label:"Delete project",icon:(0,F.jsx)(x.J,{name:"delete",color:"text-red-500",marginRight:!0}),hoverCssClasses:t?"":"hover:bg-red-100 hover:text-red-500",wrapperCssClasses:"text-red-500 text-sm py-0.5 flex rounded items-center px-2  ".concat(t?"opacity-50":"cursor-pointer"),onClick:function(){t||(m(!0),d(!0))}}]];return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(P.h_,{forceClose:f,closeCallback:function(){return m(!1)},placement:"bottom-end",wrapperCssClasses:"absolute right-0 top-1",button:h,items:j,width:"w-44"}),(0,F.jsx)(_.i,{show:o,projectId:r,projectTitle:a,close:function(){return c(!1)}}),(0,F.jsx)(Z.x,{show:l,projectId:r,projectTitle:a,close:function(){return d(!1)},workspaceId:s})]})},A=r(46833),M=r.n(A),T=r(25469),D=r(64167),q=r(83771),L=r(2950),O=r(70012),U=r(32771),J=r(3481),B=function(e){var t=e.close,r=e.project,n=e.show,c=(0,q.p)(),i=(0,m.Db)(T.uJ),l=(0,s.Z)(i,2)[1],d=(0,p.useState)({}),u=d[0],f=d[1],h=(0,p.useState)(""),x=h[0],j=h[1],v=(0,p.useState)(""),g=v[0],b=v[1],w=(0,p.useState)(!1),y=w[0],k=w[1],C=(0,p.useCallback)((function(e){e&&e.focus()}),[]),S=r.id,I=(0,p.useCallback)(function(){var e=(0,a.Z)(o().mark((function e(r){var a,s,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!x.length){e.next=15;break}return k(!0),a={name:x,projectId:S,slug:M()(x.toLowerCase())},e.prev=4,e.next=7,l({input:a});case 7:(s=e.sent).error?(k(!0),(0,D.I1)(s.error,u,f)):(n=s.data.folderCreate,null==c||c.pushSuccess("".concat(n.name," created.")),j(""),f({}),k(!1),t()),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(4),k(!1),new Error("An unexpected error occurred during folder create operation.");case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),[t,l,u,x,S,c]),N=(0,p.useCallback)((function(e){(0,D.fw)("name",u,f),j(e.currentTarget.value.trimStart()),(0,L.s)(e.currentTarget.value,b)}),[u]);return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(U.k,{show:n,closeCallback:t,title:"Create new folder",children:(0,F.jsxs)("form",{onSubmit:I,className:"mt-4",children:[(0,F.jsx)(J.I,{placeholder:"Folder Name",onChange:N,inputRef:C,value:x,error:(0,D.ie)("name",u)||g,maxLength:L.C}),(0,F.jsx)("div",{className:"flex items-center justify-center mt-6",children:(0,F.jsx)(O.z,{text:"Create",onClick:I,disabled:!x.length||y||g.length>0})})]})})})},H=r(9482),Q=r(30813),V=r(99348),W=r(29263),z=r(55904),G=r(22543),X=r(70568),Y=r(10426),K=r(26048),$=r(55261),ee=function(e){var t,r=e.isPrivate,a=e.onWorkspaceAccessChange,n=e.projectId,o=e.teamCount,c=e.tooltipRootSelector,i=e.workspaceIcon,l=e.workspaceName,d=(0,m.aM)({query:Y.Vx,variables:{resourceId:n,resourceType:$.E.PROJECT}}),u=(0,s.Z)(d,1)[0];return(0,F.jsxs)("div",{className:"px-6 mt-4 space-y-4 overflow-y-auto",children:[(0,F.jsx)(W.G,{isPrivate:r,memberNumbers:o,onUpdateAccess:a,workspaceIcon:i,workspaceName:l}),null===(t=u.data)||void 0===t?void 0:t.privateShareMembers.map((function(e){return(0,F.jsx)(z.d,{sharedResource:e,tooltipRootSelector:c},e.id)}))]})},te=function(e){var t=e.resourceId,r=(0,m.Db)(Y.p),a=(0,s.Z)(r,2)[1],n=(0,p.useCallback)((function(e,r){var s=e.map((function(e){return{recipientEmail:e.id,access:r,userId:e.userId}}));a({input:{recipients:s,resourceId:t,resourceType:$.E.PROJECT}})}),[a,t]);return(0,F.jsx)(V.u,{onSubmit:n})},re=(0,F.jsx)(H.z,{customClasses:"px-3 py-1.5 hover:bg-gray-100 text-sm text-gray-900 rounded",children:"Share"}),ae=function(e){var t=e.isPrivate,r=e.projectId,a=e.teamCount,n=e.workspaceIcon,o=e.workspaceId,c=e.workspaceName,i=(0,X.U$)(),d=(0,p.useMemo)((function(){return"share-project-modal-".concat(Math.round(1e3*Math.random()))}),[]),u=(0,m.Db)(K.b4),f=(0,s.Z)(u,2)[1],h=(0,p.useCallback)((function(e){f({id:r,isPrivate:"no_access"===e})}),[r,f]);return(0,F.jsx)(Q.j,{align:"end",side:"bottom",button:re,additionalContentClass:"p-0",id:d,children:(0,F.jsxs)("div",{className:"py-6 lf-share-modal-popover lf-share-project-modal",children:[(0,F.jsx)("div",{className:"px-6 ".concat(i.canUsePrivateShare()?"":"opacity-50 pointer-events-none"),children:(0,F.jsx)(te,{resourceId:r})}),i.canUsePrivateShare()&&(0,F.jsx)(ee,{workspaceIcon:n,onWorkspaceAccessChange:h,teamCount:a,isPrivate:t,workspaceName:c,projectId:r,tooltipRootSelector:"#".concat(d)}),!i.canUsePrivateShare()&&(0,F.jsx)("div",{className:"flex items-center w-full px-4 mt-4",children:(0,F.jsxs)("div",{className:"w-full p-2 rounded bg-blue-50",children:[(0,F.jsx)("button",{type:"button",className:"inline text-teal-300",onClick:function(){return(0,G.Z)({source:l.Hh.USE_PRIVATE_SHARE,workspaceId:o})},children:"Upgrade"}),(0,F.jsx)("span",{children:" to invite others to collaborate"})]})})]})})},se=function(e){var t=e.disableDeleteButton,r=e.project,a=(0,f.useRecoilState)(y.rU),n=(0,s.Z)(a,2),o=n[0],c=n[1],i=(0,p.useState)(!1),d=i[0],u=i[1],m=(0,w.useRouter)();return(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(I.o,{children:[(0,F.jsxs)(C.Z,{children:[(0,F.jsx)(S.Q,{text:"All",href:"/project/[id]",query:{id:r.id},active:void 0===m.query.type}),(0,F.jsx)(S.Q,{text:"Animations",href:"/project/[id]",query:{id:r.id,type:"animations"},active:"animations"===m.query.type}),(0,F.jsx)(S.Q,{text:"Folders",href:"/project/[id]",active:"folders"===m.query.type,query:{id:r.id,type:"folders"}})]}),(0,F.jsx)("div",{className:"flex-grow"}),r.projectPermissionScopes&&r.projectPermissionScopes.includes("full_access")&&(0,F.jsxs)(C.Z,{spaceClass:"space-x-2",children:[(0,F.jsx)(N.b,{workspaceId:r.workspaceId,projectId:r.id}),(0,F.jsx)(ae,{projectId:r.id,teamCount:r.workspaceTeamMembersCount||0,isPrivate:r.isPrivate||!1,workspaceIcon:r.workspace.icon,workspaceName:r.workspace.name,workspaceId:r.workspaceId}),(0,F.jsx)(R,{projectId:r.id,projectTitle:r.title,workspaceId:r.workspaceId,disableDeleteButton:t}),(0,F.jsx)(B,{show:o,project:r,close:function(){return c(!1)}}),(0,F.jsx)(k.k,{show:d,onCloseCallback:function(){return u(!1)},source:l.Hh.CREATE_FOLDERS,workspaceId:r.workspace.id})]})]})})},ne=r(1232),oe=r(437),ce=r(63721),ie=r(36088),le=r(54724),de=r(58514),ue=r(5534),pe=r(1734);function fe(){var e,t,r,n,w,k,C=(0,d.useRouter)(),S=C.query,I=S.id,N=S.sort,E=S.status,P=S.type,Z=(0,q.p)(),_=(0,p.useState)(null),R=_[0],A=_[1],M=(0,f.useSetRecoilState)(y.qx),T=(0,p.useState)([]),L=T[0],O=T[1],U=(0,p.useState)(!1),J=U[0],B=U[1],H=(0,p.useState)(!1),Q=H[0],V=H[1],W=(0,p.useState)(""),z=W[0],G=W[1],Y=(0,f.useSetRecoilState)(ue.QJ),$=(0,m.aM)({query:K.FE,variables:{id:I},pause:!I}),ee=(0,s.Z)($,1)[0];(0,p.useEffect)((function(){if(ee.fetching)M(!0);else if(M(!1),ee.error)C.push("/");else if(ee.data&&ee.data.project){var e,t=ee.data.project;if(A(t),M(!1),null==t||!t.isSystem)Y({name:t.title,isPrivate:null!==(e=t.isPrivate)&&void 0!==e&&e,projectId:t.id,projectTitle:t.title,type:"project",workspaceId:t.workspaceId})}}),[ee,Y,M,C]),(0,p.useEffect)((function(){var e;null!==(e=ee.data)&&void 0!==e&&e.project.id&&(0,i.Z9)(new i.RG({projectId:ee.data.project.id,projectName:ee.data.project.title,workspaceId:ee.data.project.workspace.id}))}),[null===(e=ee.data)||void 0===e?void 0:e.project.id,null===(t=ee.data)||void 0===t?void 0:t.project.title,null===(r=ee.data)||void 0===r?void 0:r.project.workspace.id]);var te=null==R?void 0:R.id,re=(0,c.SS)(l.AD.FILE_UPLOAD_LIMIT),ae=(0,X.hp)(null!==(n=null==R?void 0:R.workspaceId)&&void 0!==n?n:""),fe=(0,p.useMemo)((function(){return(0,D.fK)(ae)}),[ae]),me=re.on&&fe===pe.Q.FREE,he=(0,m.m8)(),xe=(0,m.aM)({query:K.f3,variables:{id:te,orderBy:N||JSON.stringify({isFolder:"DESC",updatedAt:"DESC"}),status:E,type:P,first:12},pause:!te}),je=(0,s.Z)(xe,1)[0];(0,p.useEffect)((function(){if(je.fetching)M(!0);else{if(M(!1),je.error)throw new Error(je.error.message);if(je.data&&je.data.projectFiles){var e=je.data.projectFiles.edges.map((function(e){return e.node}));O(e),M(!1),V(je.data.projectFiles.pageInfo.hasNextPage),G(je.data.projectFiles.pageInfo.endCursor)}}}),[je,M]);var ve=(0,p.useState)([]),ge=ve[0],be=ve[1],we=(0,f.useSetRecoilState)(le.Y),ye=(0,p.useState)(0),ke=ye[0],Ce=ye[1],Se=(0,p.useState)(!1),Ie=Se[0],Ne=Se[1];(0,p.useEffect)((function(){Ne(ke>0)}),[ke]);var Ee=(0,p.useCallback)((function(e){var t=ge,r=t.map((function(e){return e.id})).indexOf(e.id);r>-1?t.splice(r,1):t.push(e),be(t),Ce(t.length),we(t.length)}),[ge,be,we]),Pe=(0,p.useCallback)((function(){be([]),Ne(!1),Ce(0),we(0)}),[we]),Ze=(0,p.useCallback)((function(){}),[]),_e=(0,p.useState)("grid"),Fe=_e[0],Re=_e[1],Ae=(0,p.useCallback)((function(){Re("grid"===Fe?"list":"grid")}),[Fe,Re]),Me=(0,f.useRecoilValue)(de.h),Te=(0,p.useCallback)((function(){Pe(),null==Z||Z.pushSuccess("Animations were successfully transferred to ".concat("private-animation"===(null==Me?void 0:Me.type)?"your private animations":null==Me?void 0:Me.name,"."))}),[Pe,Me,Z]),De=(0,p.useCallback)((0,a.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(me&&L.length>=re.value)){e.next=2;break}return e.abrupt("return");case 2:return t=me?Math.min(12,Math.abs(re.value-L.length)):12,e.prev=3,B(!0),e.next=7,he.query(K.f3,{id:te,status:E,type:P,orderBy:N||JSON.stringify({isFolder:"DESC",updatedAt:"DESC"}),after:z,first:t}).toPromise();case 7:return e.prev=7,B(!1),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[3,,7,10]])}))),[z,he,me,te,N,E,P,re,L.length]),qe=(0,p.useCallback)((function(){je.data&&!je.fetching&&!J&&Q&&z&&De()}),[je.data,je.fetching,J,Q,z,De]);return(0,p.useEffect)((function(){Pe()}),[C.asPath,Pe]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(u.default,{children:(0,F.jsx)("title",{children:"LottieFiles Platform"})}),(0,F.jsx)(h.o,{headerWrapperCssClasses:"h-16 flex items-center px-8 flex-shrink-0",contentWrapperCssClasses:"flex-grow p-8 pt-0",headerControl:(0,F.jsxs)(F.Fragment,{children:[(null==R?void 0:R.isPrivate)&&(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(j.u,{title:(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("div",{children:"Only people who are invited"}),(0,F.jsx)("div",{children:"can see and edit this project"})]})}),placement:"bottom",children:(0,F.jsx)(x.J,{className:"ml-1 mr-2",name:"lock-fill",color:"text-gray-600"})})}),(0,F.jsx)(v.Z,{className:"ml-1 text-2xl text-gray-900 line-clamp-1 font-lf-bold",variant:"heading-2",color:"gray",darkest:!0,children:null==R?void 0:R.title})]}),children:(0,F.jsx)("div",{className:"space-y-3",children:R&&(0,F.jsxs)(ie.s,{features:R.features,children:[R.isSystem?(0,F.jsx)(F.Fragment,{}):(0,F.jsx)(se,{disableDeleteButton:Ie,project:R}),(0,F.jsx)(b.r,{isSystem:R.isSystem,projectView:Fe,changeProjectView:Ae}),L.length>0?(0,F.jsx)("div",{className:"space-y-4",children:"list"===Fe?(0,F.jsx)(ce.B,{files:L,canLoadMore:Q,onLoadMore:qe,isLoadingMore:J}):(0,F.jsx)(oe.z,{files:L,selectionMode:Ie,onSelectionChange:Ee,selectedAnimations:ge,selectable:!0,onLoadMore:qe,canLoadMore:Q,isLoadingMore:J,showAddToCollection:!0})}):(0,F.jsxs)(F.Fragment,{children:[!E&&"folders"===P&&(0,F.jsx)(g.H,{title:"Create folders for your animations",description:"Sort your animations into folders to stay organized.",view:"empty-project-folders",canCreateFolder:!0}),!E&&"folders"!==P&&!R.isSystem&&(null===(w=R.projectPermissionScopes)||void 0===w?void 0:w.includes("full_access"))&&(0,F.jsx)(g.H,{title:"Add some animation cheer here",description:"Let’s liven this space up with an animation or two!",canUpload:!0,view:"empty-project"}),!E&&"folders"!==P&&!R.isSystem&&!(null!==(k=R.projectPermissionScopes)&&void 0!==k&&k.includes("full_access"))&&(0,F.jsx)(g.H,{title:"Animation added will appear here",description:"You can only view this project. Ask for full access to add animations.",view:"empty-project"}),!E&&"folders"!==P&&R.isSystem&&"Drafts"===R.title&&(0,F.jsx)(g.H,{title:"Your draft Creator files will appear here",description:"Creator files created in this workspace will be automatically saved here as drafts once they’ve been edited.",view:"empty-project"}),E&&(0,F.jsx)(g.H,{title:"No result found",description:"We couldn't find any item based on your filter.",view:"no-results"})]}),ke>0?(0,F.jsx)(ne.X,{type:"project",workspaceId:R.workspaceId,selectedAnimations:ge,isPrivate:R.isPrivate,clear:Pe,download:Ze,onTransferComplete:Te}):null]})})})]})}},97955:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[id]",function(){return r(64943)}])}},function(e){e.O(0,[5731,4079,4868,467,4685,3172,8757,2579,7755,6302,1469,4884,9774,2888,179],(function(){return t=97955,e(e.s=t);var t}));var t=e.O();_N_E=t}]);