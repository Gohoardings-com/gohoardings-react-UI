"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6302],{30813:function(e,n,t){t.d(n,{j:function(){return u}});var a=t(78002),s=t(46717),i=t(83849),r=t.n(i),l=(t(29901),t(61250)),c=(0,s.F4)({"0%":{opacity:0,transform:"scale(0)"},"100%":{opacity:1,transform:"scale(1)"}}),o=(0,s.zo)(a.VY,{transformOrigin:"var(--radix-popover-content-transform-origin)",animation:"".concat(c," 0.2s ease-in")}),u=function(e){var n=e.additionalContentClass,t=void 0===n?"":n,s=e.align,i=void 0===s?"center":s,c=e.alignOffset,u=void 0===c?0:c,d=e.arrowHeight,f=void 0===d?10:d,x=e.arrowOffset,v=void 0===x?0:x,m=e.arrowWidth,p=void 0===m?20:m,h=e.button,b=e.children,g=e.defaultOpen,j=void 0!==g&&g,w=e.id,y=e.showArrow,C=void 0!==y&&y,k=e.side,N=void 0===k?"bottom":k,E=e.sideOffset,O=void 0===E?0:E;return(0,l.jsxs)(a.fC,{defaultOpen:j,children:[(0,l.jsx)(a.xz,{asChild:!0,children:h}),(0,l.jsxs)(o,{onOpenAutoFocus:function(e){return e.preventDefault()},side:N,align:i,id:w,sideOffset:O,alignOffset:u,className:r()("bg-white shadow-md p-6 rounded-md w-full h-full",t),children:[C&&(0,l.jsx)(a.Eh,{width:p,height:f,offset:v,className:"text-white fill-current"}),b]})]})}},99348:function(e,n,t){t.d(n,{u:function(){return S}});var a=t(55312),s=t(69452),i=t(24642),r=t.n(i),l=t(83849),c=t.n(l),o=t(39378),u=t(29901),d=t(81638),f=t(7092);function x(e){return e.replace(/[$()*+.?[\\\]^{|}-]/g,"\\$&")}function v(e,n){return e.findIndex((function(e){return(t=n,new RegExp("^".concat(x(t),"$"),"i")).test(e.label);var t}))}var m=t(62879),p=t(61250),h=function(e){var n=e.addTag,t=e.id,a=e.index,s=e.options,i=(0,u.useCallback)((function(e){return function(){n(e)}}),[n]),r=(0,u.useCallback)((function(e){return function(t){"Enter"===t.key&&(t.preventDefault(),t.stopPropagation(),n(e))}}),[n]),l=s.map((function(e,n){var s="".concat(t,"-").concat(n);return(0,p.jsxs)("li",{id:s,onKeyDown:r(e),className:c()("px-2 py-1 hover:bg-gray-50 m-1 justify-between rounded cursor-pointer flex items-center",{"font-bold":a===n,"text-opacity-40":e.disabled}),onMouseDown:function(e){return e.preventDefault()},onClick:i(e),children:[(0,p.jsx)("div",{className:"flex items-center space-x-2",children:(0,p.jsx)(m.q,{name:e.label,large:!0,email:e.id})}),(0,p.jsx)("div",{})]},s)}));return(0,p.jsx)("div",{className:"absolute z-10 overflow-y-auto bg-white rounded shadow w-80 -left-2 top-10 max-h-52",children:(0,p.jsx)("ul",{id:t,children:l})})},b="Enter",g=",",j=" ",w="Backspace",y=function(e){var n=e.ariaLabel,t=e.delimiters,a=void 0===t?[b,g,j]:t,s=e.items,i=e.minQueryLength,r=void 0===i?3:i,l=e.onAddition,o=e.onInputChange,d=e.onValidate,x=e.suggestions,m=e.placeholder,y=e.onDelete,C=e.inputRef,k=(0,u.useState)(null),N=k[0],E=k[1],O=(0,u.useState)(0),S=O[0],D=O[1],L=(0,u.useState)(!1),I=L[0],R=L[1],A=function(){E(null),D(-1)};(0,u.useEffect)((function(){R(!0)}),[x]);var _=(0,u.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e.disabled&&(!(d&&!d(e))&&(s.find((function(n){return n.id===e.id}))||(R(!1),l(e),n&&A()),!0))}),[s,l,d]),Z=(0,u.useCallback)((function(){if(N&&N.length>=r){var e=v(x,N),n=(-1===S?e:S)>-1?x[S]:null;_(n||{disabled:!1,id:N,label:N})}}),[_,S,r,N,x]),F=(0,u.useCallback)((function(){N||y(s.length-1)}),[s,y,N]),T=(0,u.useCallback)((function(e){return function(){y(e)}}),[y]),z=(0,u.useCallback)((function(e){var n=e.target.value;o&&o(n),E((function(e){return e&&n.length===e.length+1&&a.indexOf(n.slice(-1))>-1?(Z(),e):n}))}),[a,o,Z]),G=(0,u.useCallback)((function(e){a.indexOf(e.key)>-1&&((N||S>-1)&&e.preventDefault(),Z()),e.key===w&&F()}),[a,S,F,Z,N]),P=(0,u.useCallback)((function(e){e.preventDefault();var n=e.clipboardData.getData("text/plain"),t=n.split(",");n.split(",").forEach((function(e){_({disabled:!1,id:e.trim(),label:e.trim()},!1)&&(t=t.filter((function(n){return n!==e})))})),E(t.join(",")),D(-1)}),[_]);return(0,p.jsxs)("div",{className:"relative min-h-0 cursor-text",children:[(0,p.jsx)("div",{className:c()("flex flex-wrap gap-1",{"mb-2":s.length>0}),children:s.map((function(e,n){return(0,p.jsxs)("div",{className:"inline-flex min-w-0 items-center px-2 py-0.5 space-x-0.5 bg-gray-100 rounded",children:[(0,p.jsx)("span",{className:"text-sm text-gray-900 truncate",children:e.label}),(0,p.jsx)(f.h,{small:!0,onClick:T(n),name:"cross",tabIndex:-1,iconLighter:!0,noFocus:!0})]},e.id)}))}),(0,p.jsxs)("div",{className:"relative flex items-center w-full",children:[(0,p.jsx)("div",{className:"w-full px-1 overflow-hidden cursor-text",children:(0,p.jsx)("input",{ref:C,type:"email",onInput:z,onKeyDown:G,className:"relative inline-block w-full p-0 m-0 text-sm text-gray-900 bg-transparent border-0 focus:outline-none focus:ring-0",value:N||"","aria-label":n,onPaste:P,placeholder:m,autoComplete:"off"})}),x.length>0&&I?(0,p.jsx)(h,{id:"someTag",options:x,index:S,addTag:_}):null]})]})},C=t(80866),k=t(70012),N=t(70568),E=t(9793),O=[{title:"Full access",access:"full_access",current:!0},{title:"Can download",access:"download",current:!1},{title:"Can view",access:"view",current:!1}],S=function(e){var n=e.onChange,t=e.onSubmit,i=e.accessLevels,l=void 0===i?O:i,f=(0,d.m8)(),x=(0,u.useState)("full_access"),v=x[0],m=x[1],h=(0,u.useState)([]),b=h[0],g=h[1],j=(0,N.cF)().activeWorkspaceId,w=(0,u.useState)([]),S=w[0],D=w[1],L=(0,u.useState)(!1),I=L[0],R=L[1],A=(0,u.useState)(null),_=A[0],Z=A[1],F=(0,u.useState)(!1),T=F[0],z=F[1],G=(0,u.useState)(null),P=G[0],q=G[1];(0,u.useEffect)((function(){n&&n(b,v)}),[n,b,v]);var W=function(){z(!1)};(0,u.useEffect)((function(){T&&setTimeout(W,300)}),[T]);var J=(0,u.useCallback)((function(){_||b.length?(z(!1),g([]),P&&P&&(P.value="",P.dispatchEvent(new Event("input",{bubbles:!0}))),t(I&&_?[{disabled:!1,id:_,label:_}]:b,v)):z(!0)}),[v,b,t,I,_,P]),V=(0,u.useCallback)((function(e){m(e)}),[]),$=(0,u.useCallback)((function(e){if(e.length>0){return!!/^([\+\x2D\.0-9A-Z_a-z])+@([\x2D\.0-9A-Z_a-z])+\.([A-Za-z]{2,})$/.test(e)}return!1}),[]),M=(0,u.useCallback)((function(e){g((function(n){return[].concat((0,s.Z)(n),[e])}))}),[]),H=(0,u.useCallback)((function(e){g((function(n){var t=(0,s.Z)(n);return t.splice(e,1),t}))}),[]),K=(0,u.useCallback)((function(e){return!!$(e.id)&&!b.find((function(n){return n.id===e.id}))}),[b,$]),U=(0,u.useCallback)(function(){var e=(0,a.Z)(r().mark((function e(n){var t,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.query(E.GI,{query:n,workspaceId:j,take:70},{requestPolicy:"cache-and-network"}).toPromise();case 2:t=e.sent,a=t.data,s=[],a.workspaceMembers.edges.forEach((function(e){var n,t,a=e.node;s.push({id:a.recipientEmail,label:(null===(n=a.user)||void 0===n?void 0:n.name)||a.recipientEmail,userId:null===(t=a.user)||void 0===t?void 0:t.id,disabled:!1})})),D(s);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[j,f]),B=(0,u.useCallback)((function(e){$(e)?(R(!0),Z(e)):(R(!1),Z(null)),e.length>2?U(e):D([])}),[U,$]),Q=(0,o.debounce)(B,300);return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"flex justify-between space-x-2",children:[(0,p.jsxs)("div",{className:c()("relative flex items-start justify-between flex-grow min-w-0 p-1 space-x-2 border border-gray-100 rounded-md bg-gray-50",{"shake-element":T}),children:[(0,p.jsx)("div",{className:"flex-1 min-w-0",children:(0,p.jsx)(y,{inputRef:q,onDelete:H,placeholder:"Email, comma separated",ariaLabel:"Add Email",onInputChange:Q,items:b,onAddition:M,suggestions:S,onValidate:K})}),(0,p.jsx)(C.O,{isGuest:!1,accessLevels:l,onChange:V,className:"flex-shrink-0"})]}),(0,p.jsx)("div",{children:(0,p.jsx)(k.z,{text:"Invite",onClick:J,customClasses:"flex items-center justify-center rounded-md text-md text-white bg-teal-300 hover:bg-teal-400 disabled:bg-teal-200 disabled:opacity-30 disabled:cursor-not-allowed py-1.5 px-6"})})]})})}},55904:function(e,n,t){t.d(n,{d:function(){return m}});var a=t(55312),s=t(89303),i=t(24642),r=t.n(i),l=t(29901),c=t(81638),o=t(80866),u=t(62879),d=t(31054),f=t(47399),x=t(10426),v=t(61250),m=function(e){var n,t=e.accessLevels,i=e.sharedResource,m=e.tooltipRootSelector,p=(0,c.Db)(x._q),h=(0,s.Z)(p,2)[1],b=(0,l.useState)(!1),g=b[0],j=b[1],w=(0,c.Db)(x.SH),y=(0,s.Z)(w,2)[1],C=(0,l.useRef)(),k=(0,l.useRef)(null),N=(0,l.useCallback)(function(){var e=(0,a.Z)(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({id:i.id,access:n});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i.id,h]),E=(0,l.useCallback)((function(){y({id:i.id}),j(!0)}),[y,i.id]);(0,l.useEffect)((function(){return g&&!C.current&&(C.current=setTimeout((function(){j(!1)}),3e3)),function(){C.current&&clearTimeout(C.current)}}),[g]);var O=i.user?i.user.name:i.recipientEmail;return(0,v.jsxs)("div",{className:"relative",ref:k,children:[g&&(0,v.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,v.jsx)("div",{className:"px-2 py-1 text-xs text-white bg-gray-500 rounded",children:"Invite Resent!"})}),(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)(u.q,{name:O,large:!0,avatarOnly:!0}),(0,v.jsxs)("div",{className:"flex-grow space-y-1",children:[(0,v.jsx)(f.Z,{darkest:!0,children:O}),(0,v.jsxs)("div",{className:"flex items-center space-x-1",children:[i.isGuest&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.Z,{variant:"caption-1",color:"orange",children:i.acceptedAt?(0,v.jsx)(d.u,{portalRootSelector:m,noWrap:!1,className:"w-56",title:"User who is not in current workspace, can access only animations they're invited to with relevant permission",children:"Guest"}):"Pending"}),(0,v.jsx)("span",{className:"w-0.5 h-0.5 bg-gray-400 rounded-full"})]}),i.acceptedAt&&(0,v.jsx)(f.Z,{variant:"caption-1",color:"gray",children:(null===(n=i.user)||void 0===n?void 0:n.email)||i.recipientEmail}),null===i.acceptedAt&&(0,v.jsx)("button",{type:"button",className:"text-gray-900 hover:underline",onClick:E,children:(0,v.jsx)(f.Z,{variant:"caption-1",color:"gray",children:"Resend invite"})})]})]}),(0,v.jsx)(o.O,{onChange:N,isGuest:i.isGuest,defaultAccess:i.access,accessLevels:t,tooltipRootSelector:m})]})]})}},80866:function(e,n,t){t.d(n,{O:function(){return f}});var a=t(83849),s=t.n(a),i=t(29901),r=t(31054),l=t(2512),c=t(30813),o=t(61250),u=[{title:"Full access",access:"full_access",current:!0},{title:"Can download",access:"download",current:!1},{title:"Can view",access:"view",current:!1},{title:"Remove",access:"no_access",current:!1}],d=function(e){var n=e.disabled,t=e.onSelect,a=e.option,i=e.selected;return(0,o.jsx)("div",{className:s()("flex flex-col px-4 py-2 text-sm text-gray-700 cursor-pointer hover:bg-gray-50",{"opacity-25":n}),onClick:t,children:(0,o.jsxs)("div",{className:"flex text-gray-600",children:[(0,o.jsx)("div",{className:"w-6",children:i?(0,o.jsx)("span",{className:i?"text-gray-700":"text-gray-600",children:(0,o.jsx)(l.J,{name:"tick",className:"w-5 h-5","aria-hidden":"true"})}):null}),(0,o.jsx)("p",{className:i?"font-lf-semi-bold":"font-normal",children:a.title})]})},a.access)},f=function(e){var n=e.defaultAccess,t=e.accessLevels,a=void 0===t?u:t,s=e.onChange,f=(e.className,e.isGuest),x=e.tooltipRootSelector,v=(0,i.useState)(a[0]),m=v[0],p=v[1];(0,i.useEffect)((function(){if(n){var e=a.find((function(e){return e.access===n}));e&&p(e)}}),[a,n]);var h=function(e){return function(){s(e.access),p(e)}},b=(0,i.useMemo)((function(){return(0,o.jsxs)("div",{className:"inline-flex items-center text-sm rounded-l-none cursor-pointer rounded-r-md",children:[(0,o.jsx)("p",{className:"pr-1 text-sm text-gray-900",children:null==m?void 0:m.title}),(0,o.jsx)(l.J,{name:"chevron-down-fill",small:!0,color:"text-gray-600","aria-hidden":"true"})]})}),[null==m?void 0:m.title]);return(0,o.jsx)(c.j,{button:b,additionalContentClass:"p-0 overflow-hidden",children:(0,o.jsx)(o.Fragment,{children:a.map((function(e){var n=e.access===(null==m?void 0:m.access);return f&&"full_access"===e.access?(0,o.jsx)(r.u,{title:"Only team members can have full access",portalRootSelector:x,children:(0,o.jsx)(d,{disabled:!0,option:e,selected:n},e.access)}):(0,o.jsx)(d,{onSelect:h(e),option:e,selected:n},e.access)}))})})}},55261:function(e,n,t){var a,s;t.d(n,{E:function(){return s}}),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.VIEW="view"}(a||(a={})),function(e){e.COLLECTION="COLLECTION",e.FILE="FILE",e.PROJECT="PROJECT"}(s||(s={}))}}]);