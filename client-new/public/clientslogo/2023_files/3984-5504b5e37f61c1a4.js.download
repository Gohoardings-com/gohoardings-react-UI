"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3984],{5112:function(e,t,n){n.d(t,{N:function(){return f}});var r=n(54079),a=n(46717),s=n(29901),i=n(32458),l=n(70012),o=n(47399),c=n(61250),d=(0,a.zo)(r.aV,{background:"rgba(0 0 0 / 0.5)",position:"fixed",top:0,left:0,right:0,bottom:0,display:"grid",placeItems:"center",overflowY:"auto"}),u=(0,a.F4)({"0%":{opacity:0,transform:"scale(0)"},"100%":{opacity:1,transform:"scale(1)"}}),m=(0,a.zo)(r.VY,{animation:"".concat(u," 0.2s ease-in-out both")}),f=function(e){var t=e.buttonContent,n=e.description,a=e.illustrationURL,u=void 0===a?"":a,f=e.isLottie,p=e.lottieClass,x=void 0===p?"":p,h=e.onClose,v=e.show,b=e.title,j=(0,s.useState)(v),g=j[0],y=j[1];(0,s.useEffect)((function(){y(v)}),[v]);var w=(0,s.useCallback)((function(){y(!1),h&&h()}),[h]);return(0,c.jsx)(r.fC,{open:g,children:(0,c.jsx)(r.h_,{children:(0,c.jsx)(d,{className:"z-50",children:(0,c.jsx)(m,{children:(0,c.jsxs)("div",{className:"relative inline-block p-6 w-full max-w-[480px] overflow-hidden align-middle transition-all transform bg-white shadow-xl rounded-lg text-center",children:[u&&(0,c.jsx)(c.Fragment,{children:f?(0,c.jsx)("div",{className:"w-[432px] h-[294px] ".concat(x),children:(0,c.jsx)(i.V,{loop:!0,autoplay:!0,src:u})}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("img",{src:u,className:"w-full h-full",alt:"header"})})}),(0,c.jsx)("div",{className:"mt-5",children:(0,c.jsx)(o.Z,{variant:"heading-1",align:"center",children:b})}),(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)(o.Z,{variant:"content",align:"center",darkest:!0,children:n})}),"string"==typeof t?(0,c.jsx)("div",{className:"flex justify-center items-center mt-6",children:(0,c.jsx)(l.z,{iconSize:"medium",fontClasses:"text-base font-bold tracking-wider",onClick:w,text:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"h-7 px-6 flex justify-center items-center",children:(0,c.jsx)("span",{children:t})})})})}):t]})})})})})}},87198:function(e,t,n){n.d(t,{T:function(){return i}});var r=n(29901),a=n(2512),s=n(61250),i=function(e){var t=e.onChange,n=e.value,i=(0,r.useRef)(null),l=(0,r.useCallback)((function(e){t(e.target.innerText)}),[t]),o=(0,r.useCallback)((function(){if(i.current){var e=document.createRange(),t=window.getSelection();e.selectNodeContents(i.current),null==t||t.removeAllRanges(),null==t||t.addRange(e)}}),[i]);return(0,r.useEffect)((function(){var e=function(e){"Enter"===e.key&&e.preventDefault()},t=i.current;return null==t||t.addEventListener("keydown",e),function(){null==t||t.removeEventListener("keydown",e)}}),[]),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-900",children:[(0,s.jsx)("div",{contentEditable:!0,ref:i,className:"focus:outline-none",onBlur:l,dangerouslySetInnerHTML:{__html:n}}),(0,s.jsx)("button",{type:"button",className:"inline-flex",onClick:o,children:(0,s.jsx)(a.J,{name:"pencil"})})]})}},14844:function(e,t,n){n.d(t,{R:function(){return S}});var r=n(55312),a=n(89303),s=n(24642),i=n.n(s),l=n(50136),o=n(68668),c=n(62295),d=n(40467),u=n(29901),m=n(46019),f=n(81638),p=n(70012),x=n(2512),h=n(82920),v=n(47399),b=n(25167),j=n(37017),g=n(82048),y=n(60649),w=n(61250),k=function(e){var t=e.checked,n=e.label,r=e.name,a=e.onChange,s=e.value;return(0,w.jsxs)("div",{className:"flex items-center w-full my-2",children:[(0,w.jsx)(b.Z,{type:"radio",id:s,name:r,value:s,className:"hidden",onChange:a,checked:t}),(0,w.jsxs)("label",{htmlFor:s,className:"flex items-center justify-between w-full text-xs cursor-pointer",children:[n,(0,w.jsx)("span",{className:"inline-block w-4 h-4 border rounded-full border-grey flex-no-shrink"})]})]})},C=function(e){var t=e.allowGuestView,n=void 0!==t&&t,r=e.isExpanded,a=e.name,s=e.onAccessLevelChange,i=e.onGuestViewToggle,l=e.onToggleIsExpanded,o=e.options,c=e.showGuestViewLoader,d=e.value,m=(0,u.useCallback)((function(e){null==i||i(e)}),[i]);return o.length<2?null:(0,w.jsxs)("fieldset",{children:[(0,w.jsx)("div",{className:"mt-2 text-xs",children:(0,w.jsxs)("button",{className:"flex flex-row items-center",type:"button",onClick:l,children:[(0,w.jsx)("span",{className:"text-xs",children:r?"Hide link options":"Show link options"}),(0,w.jsx)(x.J,{name:r?"chevron-up-fill":"chevron-down-fill",className:"w-4 h-4 ml-1"})]})}),r&&(0,w.jsxs)(w.Fragment,{children:[o.map((function(e){return(0,w.jsx)(k,{onChange:s,name:a,label:e.label,value:e.value,checked:"".concat(d)==="".concat(e.value)},e.value)})),i&&(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("div",{className:"flex items-center space-x-3",children:(0,w.jsx)("div",{children:(0,w.jsx)(v.Z,{variant:"caption-1",color:"black",darkest:!0,children:"Allow guest views (no logging in needed)"})})}),(0,w.jsx)("div",{children:(0,w.jsx)(h.r,{value:n,onChange:m,loader:c})})]})]})]})},N=[y.p.VIEW_ONLY,y.p.COMMENT,y.p.DOWNLOAD_AND_VIEW],S=function(e){var t,n=e.typename,s=void 0===n?"animation":n,b=e.resourceId,k=e.resourceType,S=void 0===k?y.f.FILE:k,F=e.workspaceId,I=e.options,E=(0,f.Db)(j.th),O=(0,a.Z)(E,2)[1],Z=(0,m.useSetRecoilState)(g.W),D=(0,u.useState)(!1),A=D[0],R=D[1],T=(0,u.useState)(!1),P=T[0],L=T[1],V=(0,u.useState)(!1),M=V[0],U=V[1],_=(0,f.aM)({query:j.gR,variables:{resourceId:b,resourceType:S}}),B=(0,a.Z)(_,1)[0],z=null===(t=B.data)||void 0===t?void 0:t.publicShare,J=z?"".concat("https://app.lottiefiles.com","/share/").concat(null==z?void 0:z.shareCode):null,H=(0,u.useMemo)((function(){return!(!z||null===z.expireAt)&&new Date(z.expireAt).getTime()<Date.now()}),[z]),G=(0,u.useMemo)((function(){return null!=z&&z.expireAt?(0,d.Z)(new Date(z.expireAt),"d MMM ''yy."):""}),[z]),q=(0,u.useMemo)((function(){return!!z&&z.accessLevels.some((function(e){return N.some((function(t){return t===e}))}))}),[z]),W=(0,u.useMemo)((function(){if(z){var e=z.accessLevels.find((function(e){return e!==y.p.EDIT_ACCESS}));if(e)return e}return y.p.NO_ACCESS}),[z]),Q=(0,u.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),n=y.p.NO_ACCESS,t&&(n=W===y.p.NO_ACCESS?y.p.VIEW_ONLY:W,U(!0)),e.next=5,O({resourceId:b,resourceType:S,access:n});case 5:(0,o.Z9)(new o.V1({fileId:b,type:"public",workspaceId:F})),R(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[W,O,b,F,S]),$=(0,u.useCallback)((function(){U((function(e){return!e}))}),[]),Y=(0,u.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z){e.next=2;break}return e.abrupt("return");case 2:return n=t.target.value,e.next=5,O({resourceId:b,resourceType:S,access:n,allowGuestView:z.allowGuestView});case 5:n===y.p.DOWNLOAD_AND_VIEW&&(0,o.Z9)(new o.V1({fileId:b,type:"download",workspaceId:F})),n===y.p.COMMENT&&(0,o.Z9)(new o.V1({fileId:b,type:"comment",workspaceId:F}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[z,b,F,S,O]),K=(0,u.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z){e.next=2;break}return e.abrupt("return");case 2:return R(!0),e.next=5,O({resourceId:b,resourceType:S,allowGuestView:t,access:W});case 5:t||(0,o.Z9)(new o.V1({fileId:b,type:"logged-in-view",workspaceId:F})),t&&(0,o.Z9)(new o.V1({fileId:b,type:"guest-view",workspaceId:F})),R(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[z,W,b,S,F,O]),X=(0,u.useCallback)((function(){J&&(navigator.clipboard.writeText(J),L(!0),setTimeout((function(){L(!1)}),1200))}),[J]),ee=(0,u.useMemo)((function(){return z?H?(0,w.jsx)("div",{className:"relative p-3 mt-4 bg-orange-100 rounded",children:(0,w.jsx)("div",{children:(0,w.jsxs)(v.Z,{children:["This shared animation has ",(0,w.jsx)("span",{className:"font-lf-bold",children:"expired"}),". Enable it for another 7 days or"," ",(0,w.jsx)("span",{onClick:function(){return Z({source:c.Hh.USE_PUBLIC_SHARE_LINK,workspaceId:F})},className:"text-teal-300 cursor-pointer hover:text-teal-400",children:"upgrade to enable it permanently."})]})})}):z.expireAt?(0,w.jsx)("div",{className:"relative p-3 mt-4 rounded bg-blue-50",children:(0,w.jsxs)(v.Z,{children:["This shared animation will expire on ",(0,w.jsx)("span",{className:"font-lf-bold",children:G})," Enable it again for another 7 days upon expiry or"," ",(0,w.jsx)("span",{onClick:function(){return Z({source:c.Hh.USE_PUBLIC_SHARE_LINK,workspaceId:F})},className:"text-teal-300 break-words cursor-pointer hover:text-teal-400",children:"upgrade to enable it permanently."})]})}):null:null}),[H,Z,F,z,G]);return(0,w.jsxs)("div",{className:"flex flex-col w-full",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("div",{children:(0,w.jsx)(x.J,{name:"globe"})}),(0,w.jsxs)("div",{children:[(0,w.jsx)(v.Z,{children:"Enable sharing link"}),(0,w.jsxs)(v.Z,{variant:"caption-1",color:"gray",darker:!0,children:["Anyone with the link can access this ",s]})]})]}),(0,w.jsx)("div",{children:(0,w.jsx)(h.r,{value:q,onChange:Q,loader:A||B.fetching})})]}),q&&J&&(0,w.jsxs)(w.Fragment,{children:[Array.isArray(I)&&I.length>0&&(0,w.jsx)(C,{value:W,onAccessLevelChange:Y,onGuestViewToggle:K,allowGuestView:null==z?void 0:z.allowGuestView,name:"".concat(s,"-public-access-level"),options:I,showGuestViewLoader:A||B.fetching,isExpanded:M,onToggleIsExpanded:$}),(0,w.jsx)("div",{className:"flex flex-shrink-0 mt-4 space-x-1",children:(0,w.jsxs)("div",{className:"relative w-full",children:[(0,w.jsx)(l.uT,{show:P,enter:"transform transition duration-[100ms]",enterFrom:"opacity-0 scale-50",enterTo:"opacity-100 scale-100",leave:"transform duration-200 transition ease-in-out",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,w.jsx)("div",{className:"absolute flex justify-center w-24 px-3 py-2 text-xs text-white -translate-x-1/2 bg-gray-600 rounded-md -top-10 left-1/2",children:"Link copied"})}),(0,w.jsx)(p.z,{variant:"secondary",width:"w-full",additionalClass:"font-lf-bold",icon:"link",text:"Copy link",onClick:X})]})})]}),ee]})}},45950:function(e,t,n){n.d(t,{p:function(){return a}});var r=n(29901),a=function(){return{openWithEditor:(0,r.useCallback)((function(e){var t;window.location.href="".concat("https://editor.lottiefiles.com","?src=").concat(encodeURIComponent("".concat("https://editor-integration-workflow.lottiefiles.com","/edit/").concat(e.id,"?hash=").concat(e.editHash,"&filename=editor.json"))).concat(e.backgroundColor?"&bg_color=".concat(null===(t=e.backgroundColor)||void 0===t?void 0:t.replace("#","")):"","&hash=").concat(e.editHash,"&fileUrl=").concat(encodeURIComponent(e.fileObject.url),"&origin=workflow&save2workflow=true")}),[])}}},53984:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ln}});var r=n(89303),a=n(50136),s=n(68668),i=n(83849),l=n.n(i),o=n(79120),c=n(39378),d=n(96928),u=n(27722),m=n(29901),f=n(34742),p=n(46019),x=n(81638),h=n(25116),v=n(5112),b=n(77916),j=n(55312),g=n(24642),y=n.n(g),w=n(54868),k=n(89572),C=n(59859),N=n(5534),S=n(32458),F=n(87198),I=n(70012),E=n(32771),O=n(83771),Z=n(6093),D=n(78733),A=n(49046),R=n(4092),T=n(41837),P=n(61250),L=function(e){var t=e.closeCallback,n=e.loaderSize,r=void 0===n?"sm":n,s=e.show,i=void 0!==s&&s,l=e.text;return(0,A.Z)({key:"Escape",action:function(){t&&t()}}),D.Router.events.on("routeChangeStart",(function(){t&&t()})),(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(R.T,{children:[(0,P.jsx)(a.uT,{show:i,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,P.jsx)("div",{className:"absolute inset-0 bg-white opacity-95"})}),(0,P.jsx)(a.uT,{show:i,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",className:"fixed inset-0 z-10 overflow-y-auto",children:(0,P.jsxs)("div",{className:"flex items-end justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,P.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,P.jsx)("div",{className:"inline-block overflow-hidden text-center align-bottom transition-all transform sm:my-8 sm:align-middle",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:(0,P.jsx)("div",{children:(0,P.jsx)("div",{className:"flex flex-col sm:flex sm:items-stretch",children:(0,P.jsx)("div",{className:"flex flex-col",children:(0,P.jsxs)("div",{className:"mt-2",children:[(0,P.jsx)(T.a,{size:r}),(0,P.jsx)("div",{className:"text-lg text-gray-900",children:l})]})})})})})]})})]})})},V=n(37726),M=n(40810);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(e){var t=e.closeCallback,n=e.currentFile,a=e.currentFileId,s=e.lottieAnimation,i=e.show,l=void 0===i||i,o=e.title,c=void 0===o?"Save animation":o,u=(0,m.useState)(!1),f=u[0],h=u[1],v=(0,m.useState)(""),b=v[0],g=v[1],D=(0,m.useState)(!1),A=D[0],R=D[1],T=(0,m.useState)(!1)[0],U=(0,m.useState)(!1),B=U[0],z=U[1],J=(0,m.useState)(null),H=J[0],G=J[1],q=(0,p.useRecoilValue)(M.GG),W=(0,m.useState)(!1),Q=W[0],$=W[1],Y=(0,p.useRecoilValue)(N.QJ),K=(0,d.useRouter)(),X=(0,x.Db)(k.v9),ee=(0,r.Z)(X,2)[1],te=(0,x.Db)(V.cn),ne=(0,r.Z)(te,2)[1],re=(0,x.Db)(C.EJ),ae=(0,r.Z)(re,2)[1],se=(0,O.p)(),ie=(0,m.useCallback)(function(){var e=(0,j.Z)(y().mark((function e(n,r){var a,s,i,l,o,c;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=2;break}return e.abrupt("return");case 2:return z(!0),R(!1),h(!0),e.next=7,ee({input:_({name:b,fileKey:n,fileVersionId:r},Y&&"private-animation"===Y.type?{isMyPrivateAnimation:!0}:{folderId:null==Y?void 0:Y.folderId,projectId:null==Y?void 0:Y.projectId})});case 7:a=e.sent,s=a.data.fileCreate,i=s.folder,l=s.folderId,o=s.id,c=s.project,null==se||se.pushSuccess((0,P.jsxs)("span",{children:["Lottie saved to"," ",(0,P.jsxs)("span",{className:"font-lf-semi-bold",children:[c.title,l?" / ".concat(i.name):""]}),"."]}),5e3),t&&(t(),h(!1)),K.push("/animation/".concat(o),"/animation/".concat(o));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[B,ee,b,Y,K,se,t]),le=(0,m.useCallback)(function(){var e=(0,j.Z)(y().mark((function e(n,r){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=2;break}return e.abrupt("return");case 2:return z(!0),e.next=5,ae({input:{fileId:a,fileKey:n,fileVersionId:r,name:b}});case 5:e.sent.data&&($(!1),t&&t(),h(!1),null==se||se.pushSuccess("Lottie was successfully updated.",5e3));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[b,ae,a,se,B,t]);(0,x.mU)({query:V.Rd,variables:{key:H},pause:!H},(function(e,t){var n=null==t?void 0:t.fileUpdate;return null!=n&&n.versionId&&!B&&Q&&H?le(H,n.versionId):null!=n&&n.versionId&&!B&&H&&ie(H,n.versionId),e&&n?Object.assign(e,n):n}));var oe=(0,m.useCallback)(function(){var e=(0,j.Z)(y().mark((function e(t){var r,a,i,l,o,c,d,u,m,f,p;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),$(t),r=t?{input:{key:n.key,type:"update"}}:{},e.next=5,ne(r);case 5:if(!(a=e.sent).data||!a.data.fileUploadRequestCreate){e.next=20;break}return i=a.data.fileUploadRequestCreate,l=i.fields,o=i.key,c=i.url,d=new Blob,G(o),u=new FormData,q?(m=w.DotLottieUtils.create(),f={animations:[{id:b,mode:"normal",direction:1}],author:"",description:"",generator:"",keywords:"",version:"1.0"},m.setManifest(f),m.addAnimation(b,JSON.stringify(s)),(p=m.createDotLottie())&&(d=new Blob([p]))):d=new Blob([JSON.stringify(s)],{type:"text/plain"}),u.append("x-amz-meta-key",o),l.key&&u.append("key",l.key.replace("${filename}","".concat("".concat(b,q?".lottie":".json")))),Object.keys(l).forEach((function(e){"key"!==e&&u.append(e,l[e])})),u.append("file",d,"".concat("".concat(b,q?".lottie":".json"))),e.next=18,fetch(c,{method:"post",body:u});case 18:return e.next=20,e.sent.text();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n.key,ne,s,b,q]);(0,m.useEffect)((function(){var e=n.filename.split(".")[0];e&&g(e)}),[n.filename]);var ce=(0,m.useCallback)((function(){R(!1)}),[]),de=(0,m.useCallback)((0,j.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R(!0);case 1:case"end":return e.stop()}}),e)}))),[]),ue=(0,m.useCallback)((0,j.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(!1);case 2:case"end":return e.stop()}}),e)}))),[oe]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(L,{show:f,loaderSize:"lg",text:"Saving..."}),!T&&!f&&(0,P.jsxs)(E.k,{title:c,show:l&&!f&&!T,size:"md",closeCallback:t,children:[s&&(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)("div",{className:"mt-10",children:[(0,P.jsx)(F.T,{value:b,onChange:function(e){return g(e)}}),(0,P.jsx)("div",{className:"mt-6 space-y-4 border",style:{background:"#ffffff"},children:(0,P.jsx)(S.V,{src:s,autoplay:!0,loop:!0})}),(0,P.jsxs)("div",{className:"flex justify-center mt-4 space-x-2 text-center",children:[(0,P.jsx)(I.z,{text:"Save as new animation",variant:"tertiary",onClick:de}),(0,P.jsx)(I.z,{text:"Save changes",onClick:function(){oe(!0)}})]})]})}),(0,P.jsx)(Z.s,{show:A,close:ce,selectButtonText:"Save",selectionCallback:ue})]})]})},z=n(70568),J=function(e){var t=e.animation,n=e.handback,r=(0,z.cF)().activeWorkspaceId,a=(0,D.useRouter)(),s=(0,p.useSetRecoilState)(N.Kl);return(0,m.useEffect)((function(){n.completedAt&&n.newFileId?a.push("/animation/".concat(n.newFileId)):n.completedAt?a.push("/animation/".concat(n.fileId)):s({animation:t,handbackId:n.id,assetUrl:n.assetUrl,workspaceId:r,backgroundColor:n.backgroundColor})}),[r,t,n.assetUrl,n.backgroundColor,n.completedAt,n.fileId,n.id,n.newFileId,a,s]),(0,P.jsx)(P.Fragment,{})},H=n(56867),G=n(7031),q=n(89275),W=n(87757),Q=n(69896),$=n(44663),Y=n(57273),K=n(7092),X=n(53620),ee=n(65992),te=n(69452),ne=n(30818),re=n(62295),ae=n(31054),se={"warm-01":["#F8E152","#FEF5BD","#FF8E3A","#FF7100"],"warm-02":["#20272C","#FF8E3A","#FF7100","#FDF2FD"],"warm-03":["#3D3E00","#FF8E3A","#ED509E","#9C73F8"],"warm-04":["#431A00","#FF3C00","#D92600","#AF1400"],"warm-05":["#FF8E3A","#871844","#FF3C00","#550000","#FFBF00"],"warm-06":["#4C5863","#142B0F","#ED509E","#A81752","#28223D"],"cool-01":["#D9E0E6","#A1ADB7","#2E03E5","#00DDB3"],"cool-02":["#D9E0E6","#A1ADB7","#8746FF","#000000"],"cool-03":["#0092E4","#0857A0","#00DDB3","#019D91"],"cool-04":["#00C6FF","#92A7FE","#2E03E5","#002B2B"],"cool-05":["#B0E8FD","#0857A0","#17273A","#D9E0E6","#20272C"],"cool-06":["#333C45","#5359FD","#2500C4","#007D7C","#004F4F"],"neutral-01":["#3D4853","#4E3A82","#006262"],"neutral-02":["#63727E","#C4E9C4","#EEF8EF","#4E3700"],"neutral-03":["#3D4853","#50C154","#006600","#2500C4"],"neutral-04":["#0857A0","#A1ADB7","#63727E","#7180FD"],"neutral-05":["#E3CB00","#FEF5BD","#4C5863","#00951D","#006600"],"neutral-06":["#333C45","#20272C","#D8A300","#8F6A00","#715200"],"modern-01":["#F8E152","#7180FD","#3C26FE","#FF8A7D"],"modern-02":["#FF7100","#F6F4FA","#00DDB3","#019D91"],"modern-03":["#0092E4","#BFC8D1","#5359FD","#FF3C00"],"modern-04":["#FF8A7D","#FF3C00","#019D91","#002B2B"],"modern-05":["#1A487B","#5359FD","#2E03E5","#8746FF","#00DDB3"],"modern-06":["#00B6FE","#5359FD","#8746FF","#00DDB3","#00C1A2"],"modern-07":["#FF8E3A","#FF7100","#D92600","#00DDB3","#00C1A2"],"modern-08":["#D92600","#AF1400","#00C1A2","#007D7C","#014242"],"modern-09":["#F8E152","#00C6FF","#7180FD","#3C26FE","#FF8A7D"],"modern-10":["#F8E152","#00C6FF","#50C154","#FF7100","#FF3C00"],"pastel-01":["#B0E8FD","#FFB887","#FDD6D5"],"pastel-02":["#0092E4","#94D793","#F0F6FE"],"pastel-03":["#00B6FE","#BA9BFC","#00C1A2"],"pastel-04":["#FF8E3A","#FF8EEC","#FFB4B1"],"pastel-05":["#2500C4","#FFB4B1","#FF8A7D","#FEF3F3"],"pastel-06":["#F3F6F8","#C4E9C4","#FF8EEC","#00DDB3"],"pastel-07":["#D0E0FE","#B2C6FE","#F0F6FE","#FED8BE","#FFB887"],"pastel-08":["#2E03E5","#FCD2FC","#FF8EEC","#ED509E","#FEF3DD"]},ie=function(e){var t=e.animationUrl,n=e.id,a=e.palette,s=e.setColorModifiedLottie,i=(0,p.useRecoilState)(M.GG),l=(0,r.Z)(i,1)[0],o=(0,p.useRecoilState)(M.hH),c=(0,r.Z)(o,1)[0],d=(0,p.useRecoilState)(M.lS),u=(0,r.Z)(d,2),m=u[0],f=u[1];function x(){return(x=(0,j.Z)(y().mark((function e(r){var a,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}if(a={},!l||!c){e.next=6;break}a=JSON.parse(JSON.stringify(c)),e.next=11;break;case 6:return e.next=8,fetch(t);case 8:return e.next=10,e.sent.json();case 10:a=e.sent;case 11:i=(0,ne.M)(a,r),s(i),f({id:n,colors:r,type:"preset",colorIndex:null});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h={cssGrid:{display:"grid",gridTemplateRows:"repeat(1, auto)",gridAutoFlow:"column",padding:"".concat((null==m?void 0:m.id)===n?"1px":"")}};return(0,P.jsx)("div",{className:"h-full color-palette cursor-pointer rounded border hover:border-gray-400 ".concat((null==m?void 0:m.id)===n?"border-teal-300":"border-gray-100"),style:h.cssGrid,onClick:function(){!function(e){x.apply(this,arguments)}(a)},children:a.map((function(e){return(0,P.jsx)("div",{style:{background:e}},e)}))})},le={display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridAutoRows:"20px",rowGap:"8px",columnGap:"8px",marginTop:"8px"},oe=function(e){var t=e.animationUrl,n=e.colorPalettes,r=e.setColorModifiedLottie;return(0,P.jsx)("div",{style:le,children:Object.keys(n).map((function(e,a){return(0,P.jsx)(ie,{id:e,animationUrl:t,palette:n[e],setColorModifiedLottie:r},e)}))})},ce=function(e){var t=e.animationUrl,n=e.setColorModifiedLottie;return(0,P.jsx)(oe,{animationUrl:t,colorPalettes:se,setColorModifiedLottie:n})},de=n(4403),ue=n(67024),me=n(2512),fe=["#6666FF","#66CCFF","#52CC99","#FF6699","#FFBF66","#FF8066","#767FAD","#FFFFFF"],pe=function(e){var t=e.applySelectedColor,n=e.color,r=e.deleteColor,a=e.selectedColorIndex,s=(0,m.useState)(n),i=s[0],l=s[1],o=function(e){(a||0===a)&&t(e,a)};return(0,P.jsxs)("div",{className:"w-full",children:[(0,P.jsxs)("div",{className:"color-palette-picker",children:[(0,P.jsx)(ue.gW,{color:i||"#6666FF",onChange:l}),(0,P.jsx)("div",{className:"flex justify-between mb-2 -mt-2 picker__swatches",children:fe.map((function(e){return(0,P.jsx)("div",{className:"border border-gray-500 picker__swatch",style:{background:e},onClick:function(){l(e),o(e)}},e)}))})]}),(0,P.jsxs)("div",{className:"flex w-full mb-3",children:[(0,P.jsx)("div",{className:"mr-2",children:(0,P.jsxs)("div",{className:"relative w-full palette-color-picker-input",children:[(0,P.jsx)("div",{onClick:function(){navigator.clipboard.writeText(i)},children:(0,P.jsx)(me.J,{className:"absolute top-0 bottom-0 m-auto ml-2 cursor-pointer",color:"text-gray-900",medium:!0,name:"copy-fill"})}),(0,P.jsx)(ue.ZE,{color:i,onChange:l})]})}),(0,P.jsx)("div",{className:"w-8 rounded-md",style:{background:i}})]}),(0,P.jsxs)("div",{className:"flex",children:[(0,P.jsx)("div",{className:"w-4/5",children:(0,P.jsx)(I.z,{color:"gray",fluid:!0,text:"Update",onClick:function(){o(i)}})}),(0,P.jsx)("div",{className:"flex items-center justify-center w-1/5 ml-2 border border-gray-100 rounded-md cursor-pointer bg-gray-50 hover:border-gray-200",onClick:function(){r(a||0)},children:(0,P.jsx)(me.J,{name:"delete",small:!0})})]})]})},xe=function(e){var t=e.color,n=e.colorIndex,a=e.customPalette,s=e.deleteColor,i=e.portalRoot,l=e.selectedColorIndex,o=e.setSelectedColorIndex,c=e.updateColor,d=(0,m.useRef)(null),u=(0,m.useState)(!1),f=u[0],x=u[1],h=(0,m.useState)(null),v=h[0],b=h[1],g=(0,p.useRecoilState)(M.lS),w=(0,r.Z)(g,1)[0],k=(0,m.useCallback)(function(){var e=(0,j.Z)(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t,n),x(!1),o(null);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[o,c]);return(0,m.useEffect)((function(){l===n&&a.id===(null==w?void 0:w.id)&&(b(t),o(n),x(!0))}),[t,n,a,l,w,o]),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{ref:d,className:"w-5 h-5 mx-1 bg-teal-500 rounded cursor-pointer",style:{background:t},onClick:function(){x(!0),b(t),o(n)}}),f&&(0,P.jsx)(de.J,{additionalCssClasses:"p-3 w-64",show:!0,showArrow:!1,container:i,offsetX:22,offsetY:-20,placement:"left-start",onClose:function(){x(!1),b(null),o(null)},triggerElementRef:d,content:(0,P.jsx)(pe,{color:v||"#6666FF",selectedColorIndex:l,applySelectedColor:k,deleteColor:s})})]})},he=n(36088),ve=n(13517);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=function(e){var t=e.animationUrl,n=e.customPalette,a=e.portalRoot,s=e.selectedColorIndex,i=e.setColorModifiedLottie,l=e.setSelectedColorIndex,o=e.workspaceId,c=(0,p.useRecoilState)(M.GG),d=(0,r.Z)(c,1)[0],u=(0,p.useRecoilState)(M.hH),f=(0,r.Z)(u,1)[0],h=(0,m.useRef)(null),v=(0,p.useRecoilState)(M.Fh),b=(0,r.Z)(v,2),g=b[0],w=b[1],k=(0,x.Db)(ve.ZB),C=(0,r.Z)(k,2)[1],N=(0,p.useRecoilState)(M.lS),S=(0,r.Z)(N,2),F=S[0],E=S[1],O=(0,p.useResetRecoilState)(M.lS),Z=(0,m.useState)(!1),D=Z[0],A=Z[1],R=(0,he.w)(),T=(0,m.useCallback)(function(){var e=(0,j.Z)(y().mark((function e(r){var a,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}if(a={},!d||!f){e.next=6;break}a=JSON.parse(JSON.stringify(f)),e.next=11;break;case 6:return e.next=8,fetch(t);case 8:return e.next=10,e.sent.json();case 10:a=e.sent;case 11:s=(0,ne.M)(a,r||n.colors),i(s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,n.colors,f,d,i]),L=(0,m.useCallback)((0,j.Z)(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=g.findIndex((function(e){return e.id===n.id})),w([].concat((0,te.Z)(g.slice(0,t)),(0,te.Z)(g.slice(t+1)))),O(),i(null);case 4:case"end":return e.stop()}}),e)}))),[n.id,g,O,i,w]),V=(0,m.useCallback)((0,j.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R.canUseColorPalette()){e.next=6;break}return A(!0),e.next=4,C({input:{colors:n.colors,workspaceId:o}});case 4:A(!1),L();case 6:case"end":return e.stop()}}),e)}))),[C,n.colors,L,R,o]);function U(e){if(1===n.colors.length)L();else{var t=[].concat((0,te.Z)(n.colors.slice(0,e)),(0,te.Z)(n.colors.slice(e+1))),r=(0,te.Z)(g).map((function(e){return e.id===n.id?je(je({},e),{},{colors:t}):e}));w(r),T(t)}}var _=(0,m.useCallback)(function(){var e=(0,j.Z)(y().mark((function e(t,r){var a,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[].concat((0,te.Z)(n.colors.slice(0,r)),[t],(0,te.Z)(n.colors.slice(r+1))),s=(0,te.Z)(g).map((function(e){return e.id===n.id?je(je({},e),{},{colors:a}):e})),w(s),E({id:n.id,colors:n.colors,type:"draft",colorIndex:null}),T(a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n.colors,n.id,g,T,w,E]);return(0,P.jsxs)("div",{className:"bg-gray-50 rounded-md flex mt-2 cursor-pointer relative items-center ".concat((null==F?void 0:F.id)===n.id?"border border-teal-300":"border-gray-100"),style:{paddingTop:"6px",paddingBottom:"6px",paddingRight:"4px",paddingLeft:"4px"},children:[(0,P.jsxs)("div",{className:"flex w-full",onClick:function(e){e.target===h.current&&(T(),E({id:n.id,colors:n.colors,type:"draft",colorIndex:null}))},ref:h,children:[(0,P.jsx)("div",{className:"mr-1",children:(0,P.jsx)(K.h,{roundedClass:"rounded",backgroundColor:"black",noFocus:!0,hoverBackgroundClass:"hover:bg-black",icon:"plus",small:!0,sizeClass:"w-5 h-5",iconColor:"text-white",onClick:function(){!function(){var e=fe[Math.floor(Math.random()*fe.length)];if(e&&n.colors.length<5){var t=[].concat((0,te.Z)(n.colors),[e]),r=(0,te.Z)(g).map((function(e){return e.id===n.id?je(je({},e),{},{colors:t}):e}));w(r),E({id:n.id,colors:n.colors,type:"draft",colorIndex:n.colors.length-1}),T(t)}}()}})}),n.colors.map((function(e,t){return(0,P.jsx)(xe,{color:e,colorIndex:t,customPalette:n,portalRoot:a,selectedColorIndex:s,setSelectedColorIndex:l,deleteColor:U,updateColor:_},"".concat(t+n.id))}))]}),(0,P.jsxs)("div",{className:"absolute right-0 flex items-center mr-2",children:[(0,P.jsx)("div",{className:"".concat(R.canUseColorPalette()?"opacity-100":"opacity-50"," mr-2"),children:(0,P.jsx)(I.z,{variant:"primary",showLoader:D,text:"Save",onClick:function(){V()},customClasses:"relative flex items-center justify-center rounded-md w-full px-2 py-1 mr-2 text-xxs text-white focus:outline-none disabled:opacity-30 disabled:cursor-not-allowed bg-teal-300 hover:bg-teal-400 disabled:bg-teal-600"})}),(0,P.jsx)(K.h,{roundedClass:"rounded",noFocus:!0,icon:"delete",iconColor:"text-red-500",small:!0,hoverBackgroundClass:"hover:bg-red-100",sizeClass:"w-5 h-5",onClick:function(){L()}})]})]})},ye=n(63254),we=function(e){var t=e.close,n=e.deletePalette,r=e.show,a=(0,m.useCallback)((0,j.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n(),t(),e.next=12;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(e.t0 instanceof Error)){e.next=11;break}throw new Error(e.t0.message);case 11:throw new Error("Cannot delete user, an unexpected error occurred");case 12:case"end":return e.stop()}}),e,null,[[0,5]])}))),[t,n]),s=(0,m.useMemo)((function(){return(0,P.jsx)("h3",{className:"text-lg leading-6 font-lf-semi-bold text-red-500 w-[90%]",children:"Delete color palette ?"})}),[]);return(0,P.jsx)(ye.s,{title:s,body:"You and your team will no longer be able to use it. You won’t be able to undo this.",buttonTitle:"Delete",showModal:r,onConfirm:a,closeCallback:t})},ke=n(31912);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se,Fe,Ie=function(e){var t=e.animationUrl,n=e.customPalette,a=e.portalRoot,s=e.selectedColorIndex,i=e.setColorModifiedLottie,l=e.setSelectedColorIndex,o=(0,p.useRecoilState)(M.GG),c=(0,r.Z)(o,1)[0],d=(0,p.useRecoilState)(M.hH),u=(0,r.Z)(d,1)[0],f=(0,m.useRef)(null),h=(0,m.useState)(!1),v=h[0],b=h[1],g=(0,m.useState)(),w=g[0],k=g[1],C=(0,x.Db)(ve.uT),N=(0,r.Z)(C,2)[1],S=(0,x.Db)(ve._w),F=(0,r.Z)(S,2)[1],E=(0,p.useRecoilState)(M.lS),O=(0,r.Z)(E,2),Z=O[0],D=O[1],A=(0,p.useResetRecoilState)(M.lS),R=(0,m.useState)(!1),T=R[0],L=R[1],V=(0,m.useState)(!1),U=V[0],_=V[1],B=(0,m.useCallback)((0,j.Z)(y().mark((function e(){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!w){e.next=13;break}if(n={},!c||!u){e.next=6;break}n=JSON.parse(JSON.stringify(u)),e.next=11;break;case 6:return e.next=8,fetch(t);case 8:return e.next=10,e.sent.json();case 10:n=e.sent;case 11:r=(0,ne.M)(n,w.colors),i(r);case 13:case"end":return e.stop()}}),e)}))),[t,u,w,c,i]),z=(0,m.useCallback)((0,j.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=6;break}return _(!0),e.next=4,N({id:n.id,input:{colors:w.colors}});case 4:_(!1),b(!1);case 6:case"end":return e.stop()}}),e)}))),[n.id,w,N]),J=(0,m.useCallback)((0,j.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({id:n.id});case 2:A(),i(null);case 4:case"end":return e.stop()}}),e)}))),[n.id,F,A,i]);function H(e){if(w){var t=[].concat((0,te.Z)(w.colors.slice(0,e)),(0,te.Z)(w.colors.slice(e+1)));k(Ne(Ne({},w),{},{colors:t})),B()}}(0,m.useEffect)((function(){w&&B()}),[w,B]);var G=(0,m.useCallback)(function(){var e=(0,j.Z)(y().mark((function e(t,r){var a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w&&(a=[].concat((0,te.Z)(w.colors.slice(0,r)),[t],(0,te.Z)(w.colors.slice(r+1))),k(Ne(Ne({},w),{},{colors:a})),D({id:n.id,colors:n.colors,type:"saved",colorIndex:null}),B());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n.colors,n.id,w,B,D]);return v?(0,P.jsxs)("div",{className:"bg-gray-50 rounded-md flex mt-2 mb-2 cursor-pointer relative items-center ".concat((null==Z?void 0:Z.id)===n.id?"border border-teal-300":"border-gray-100"),style:{paddingTop:"6px",paddingBottom:"6px",paddingRight:"4px",paddingLeft:"4px"},children:[(0,P.jsxs)("div",{className:"flex w-full",onClick:function(e){e.target===f.current&&(D({id:n.id,colors:n.colors,type:"saved",colorIndex:null}),B())},ref:f,children:[(0,P.jsx)("div",{className:"mr-1",children:(0,P.jsx)(K.h,{roundedClass:"rounded",backgroundColor:"black",noFocus:!0,hoverBackgroundClass:"hover:bg-black",icon:"plus",small:!0,sizeClass:"w-5 h-5",iconColor:"text-white",onClick:function(){!function(){var e=fe[Math.floor(Math.random()*fe.length)];if(w&&e&&w.colors.length<5){var t=[].concat((0,te.Z)(w.colors),[e]);k(Ne(Ne({},w),{},{colors:t})),D({id:n.id,colors:n.colors,type:"saved",colorIndex:n.colors.length-1}),B()}}()}})}),w&&w.colors.map((function(e,t){return(0,P.jsx)(xe,{color:e,colorIndex:t,customPalette:w,portalRoot:a,selectedColorIndex:s,setSelectedColorIndex:l,deleteColor:H,updateColor:G},"".concat(w.id+t))}))]}),(0,P.jsxs)("div",{className:"absolute right-0 flex items-center",children:[(0,P.jsx)(I.z,{variant:"primary",text:"Cancel",onClick:function(){b(!1),k(null)},customClasses:"border border-gray-200 relative flex items-center justify-center rounded-md font-lf-bold w-full px-2 py-1 mr-1 text-xxs text-gray-700 focus:outline-none disabled:opacity-30 disabled:cursor-not-allowed bg-gray-50 hover:border-gray-300"}),(0,P.jsx)(I.z,{showLoader:U,variant:"primary",text:"Save",onClick:function(){z()},customClasses:"relative flex items-center justify-center rounded-md font-lf-bold w-full px-2 py-1 mr-2 text-xxs text-white focus:outline-none disabled:opacity-30 disabled:cursor-not-allowed bg-teal-300 hover:bg-teal-400 disabled:bg-teal-600"})]})]}):(0,P.jsxs)("div",{className:"flex items-center justify-between w-full h-5 mb-2",children:[(0,P.jsx)("div",{className:"w-full h-full",children:(0,P.jsx)(ie,{id:n.id,animationUrl:t,palette:n.colors,setColorModifiedLottie:i},n.id)}),(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsxs)(ke.f,{children:[(0,P.jsx)(ke.f.Trigger,{type:"icon",children:(0,P.jsx)(me.J,{small:!0,name:"kebab-menu"})}),(0,P.jsxs)(ke.f.Content,{side:"bottom",align:"start",children:[(0,P.jsxs)(ke.f.Item,{onSelect:function(){k({id:n.id,colors:n.colors,createdByUserId:n.createdByUserId,workspaceId:n.workspaceId}),D({id:n.id,colors:n.colors,type:"saved",colorIndex:null}),b(!0)},children:[(0,P.jsx)(me.J,{name:"pencil",marginRight:!0}),(0,P.jsx)("span",{children:"Edit palette"})]}),(0,P.jsxs)(ke.f.Item,{onSelect:function(){L(!0)},destructiveAction:!0,children:[(0,P.jsx)(me.J,{name:"delete",marginRight:!0}),(0,P.jsx)("span",{children:"Delete palette"})]})]})]}),(0,P.jsx)(we,{show:T,close:function(){L(!1)},deletePalette:J})]})]})},Ee=n(22543),Oe=n(1734),Ze=n(64167),De=function(e){var t,n,a,s,i=e.animationUrl,l=e.portalRoot,o=e.setColorModifiedLottie,c=e.setOpenColorPaletteModal,d=e.workspaceId,u=(0,m.useState)(null),f=u[0],h=u[1],v=(0,p.useRecoilState)(M.GG),b=(0,r.Z)(v,1)[0],g=(0,p.useRecoilState)(M.hH),k=(0,r.Z)(g,2),C=k[0],N=k[1],S=(0,p.useRecoilState)(M.Fh),F=(0,r.Z)(S,2),E=F[0],O=F[1],Z=(0,p.useRecoilState)(M.lS),D=(0,r.Z)(Z,2),A=D[0],R=D[1],T=(0,he.w)(),L=(0,p.useResetRecoilState)(M.lS),V=(0,z.cF)().activeWorkspace,U=(0,x.aM)({query:ve.q6,variables:{workspaceId:d},pause:!d}),_=(0,r.Z)(U,1)[0],B=(0,m.useCallback)(function(){var e=(0,j.Z)(y().mark((function e(t){var n,r,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.DotLottieUtils.build(t);case 2:n=e.sent;try{r=n.getManifest().animations[0].id,(a=n.extract(r,w.ExtractionType.String,!0))&&"string"==typeof a&&N(JSON.parse(a))}catch(e){}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N]);function J(){return(J=(0,j.Z)(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.canUseColorPalette()){e.next=15;break}if(t={},!i){e.next=12;break}if(!b||!C){e.next=7;break}t=JSON.parse(JSON.stringify(C)),e.next=12;break;case 7:return e.next=9,fetch(i);case 9:return e.next=11,e.sent.json();case 11:t=e.sent;case 12:A&&i&&(n=(0,ne.M)(t,A.colors),o(n),c(!0)),e.next=16;break;case 15:(0,Ee.Z)({source:re.Hh.USE_COLOR_PALETTE,workspaceId:d});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=(0,j.Z)(y().mark((function e(){var t,n,r,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,te.Z)(E),n=(0,Ze.k$)(),t.unshift({createdByUserId:"",workspaceId:d,id:n,colors:["#0FCCCE"]}),O(t),!i){e.next=19;break}if(r={},!b||!C){e.next=10;break}r=JSON.parse(JSON.stringify(C)),e.next=15;break;case 10:return e.next=12,fetch(i);case 12:return e.next=14,e.sent.json();case 14:r=e.sent;case 15:a=(0,ne.M)(r,["#0FCCCE"]),R({id:n,colors:["#0FCCCE"],type:"draft",colorIndex:0}),h(0),o(a);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,m.useEffect)((function(){i&&b&&B(i)}),[i,B,b]),(0,P.jsxs)("div",{className:"flex flex-col justify-between h-full py-6 space-y-4",children:[(0,P.jsx)("h3",{className:"px-6 text-base text-gray-900 font-lf-bold",children:"Color Palette"}),(0,P.jsxs)("div",{className:"h-full px-6 pt-2 overflow-y-auto",children:[(0,P.jsxs)("div",{className:"pb-8",children:[(0,P.jsxs)("div",{className:"flex items-center mb-2",children:[(0,P.jsx)("p",{className:"mr-2 text-sm text-gray-700 font-lf-bold",children:"Custom palettes"}),(0,P.jsx)("div",{className:"p-1 text-orange-700 bg-orange-100 rounded-md text-xxs font-lf-bold",children:"BETA"})]}),(0,P.jsx)(I.z,{iconSize:"small",fontClasses:"text-xs",variant:"secondary",icon:"plus",customClasses:"text-xxs pl-2 py-1 pr-3 flex items-center justify-center rounded-md bg-gray-100 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none disabled:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed",text:"New palette",onClick:function(){!function(){H.apply(this,arguments)}()}}),(0,P.jsxs)("div",{className:_.data&&(null===(t=_.data)||void 0===t?void 0:t.workspaceColorPalettes.edges.length)>0?"mb-8":"",children:[V&&(0,Ze.fK)(V)===Oe.Q.INDIVIDUAL&&E.length>0&&(0,P.jsx)("div",{className:"my-4 mb-2 text-xs text-gray-900",children:"Save custom palettes for this workspace"}),V&&(0,Ze.fK)(V)===Oe.Q.TEAMS&&E.length>0&&(0,P.jsx)("div",{className:"my-4 mb-2 text-xs tracking-tight text-gray-900",children:"Save custom palettes that you and your team can use"}),V&&(0,Ze.fK)(V)===Oe.Q.FREE&&E.length>0&&(0,P.jsxs)("div",{className:"w-full px-6 py-4 my-4 mb-2 text-sm text-gray-600 rounded-md bg-teal-50",children:[(0,P.jsxs)("span",{className:"text-teal-300 cursor-pointer",onClick:function(){(0,Ee.Z)({source:re.Hh.USE_COLOR_PALETTE,workspaceId:d})},children:["Upgrade to a paid plan"," "]}),"to save a custom palette"]}),E.length>0&&E.map((function(e){return(0,P.jsx)(ge,{animationUrl:i,setColorModifiedLottie:o,customPalette:e,selectedColorIndex:f,setSelectedColorIndex:h,portalRoot:l,workspaceId:d},e.id)}))]}),_.data&&(null===(n=_.data)||void 0===n?void 0:n.workspaceColorPalettes.edges.length)>0&&(0,P.jsxs)("div",{className:"flex items-center mb-2",children:[(0,P.jsx)("p",{className:"mr-2 text-sm text-gray-700 font-lf-bold",children:"Saved palettes"}),V&&(0,Ze.fK)(V)===Oe.Q.TEAMS&&(0,P.jsx)(ae.u,{className:"w-72",placement:"top",title:"Saved palettes can be used and edited by all members in your workspace",children:(0,P.jsx)(K.h,{name:"info",small:!0})})]}),_.data&&(null===(a=_.data)||void 0===a?void 0:a.workspaceColorPalettes.edges.length)>0&&(null===(s=_.data)||void 0===s?void 0:s.workspaceColorPalettes.edges.map((function(e){return(0,P.jsx)(Ie,{animationUrl:i,setColorModifiedLottie:o,customPalette:e.node,selectedColorIndex:f,setSelectedColorIndex:h,portalRoot:l},e.node.id)})))]}),(0,P.jsx)("p",{className:"text-sm text-gray-700 font-lf-bold",children:"Preset palettes"}),(0,P.jsx)(ce,{animationUrl:i,setColorModifiedLottie:o})]}),(0,P.jsxs)("div",{className:"flex px-6 pb-10",children:[(0,P.jsx)("div",{className:"w-1/4 mr-2",children:(0,P.jsx)(I.z,{variant:"secondary",fluid:!0,disabled:null===A,text:"Reset",onClick:function(){o(null),L()}})}),(0,P.jsxs)("div",{className:"relative flex items-center w-3/4",children:[(0,P.jsx)(I.z,{fluid:!0,disabled:null===A,text:"Save animation",onClick:function(){!function(){J.apply(this,arguments)}()}}),!T.canUseColorPalette()&&(0,P.jsx)(Ee.y,{className:"absolute w-5 h-5 right-2",iconOnly:!0,source:re.Hh.USE_COLOR_PALETTE,workspaceId:d})]})]})]})},Ae=n(40467),Re=n(47399),Te="SHOW_CONFIRM",Pe="HIDE_CONFIRM",Le={show:!1,text:""},Ve=function(e,t){return t.type===Te?{show:!0,text:t.payload.text}:Le},Me=m.createContext({dispatch:function(){},state:Le}),Ue=function(e){var t=e.children,n=(0,m.useReducer)(Ve,Le),r=n[0],a=n[1];return(0,P.jsx)(Me.Provider,{value:{state:r,dispatch:a},children:(0,P.jsx)("div",{className:"relative h-full",children:t})})},_e=function(){var e=(0,m.useContext)(Me),t=e.dispatch,n=e.state,r=function(){t({payload:{text:""},type:Pe})},a=function(){var e=(0,j.Z)(y().mark((function e(n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Te,payload:{text:n}}),e.abrupt("return",new Promise((function(e,t){Se=e})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{confirm:a,onConfirm:function(){r(),Se(!0)},onCancel:function(){r(),Se(!1)},state:n}},Be=function(){var e=_e(),t=e.onCancel,n=e.onConfirm,r=e.state;return r.show?(0,P.jsxs)("div",{className:"absolute inset-0 bg-white/90 z-20 h-full px-6 flex flex-col items-center justify-center",children:[(0,P.jsx)(Re.Z,{align:"center",children:r.text}),(0,P.jsxs)("div",{className:"flex space-x-2 mt-3",children:[(0,P.jsx)(I.z,{onClick:t,text:"Cancel",variant:"tertiary"}),(0,P.jsx)(I.z,{onClick:n,text:"Disable",variant:"primary",color:"red"})]})]}):null};!function(e){e.json="Lottie JSON",e.optimizedLottie="Optimized Lottie JSON",e.dotLottie="dotLottie",e.optimizedDotLottie="Optimized dotLottie"}(Fe||(Fe={}));var ze=[{name:Fe.json,type:"application/json",isOptimized:!1},{name:Fe.optimizedLottie,type:"application/json",isOptimized:!0},{name:Fe.dotLottie,type:"application/zip",isOptimized:!1},{name:Fe.optimizedDotLottie,type:"application/zip",isOptimized:!0}],Je=function(e){var t=e.assetType,n=e.canUsePublicAsset,r=e.changeAssetType,a=e.publicAssets,s=(0,m.useCallback)((function(e){return(0,j.Z)(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e!==Fe.optimizedDotLottie&&e!==Fe.optimizedLottie||n?r(e):(0,Ee.Z)({source:re.Hh.USE_PUBLIC_ASSET,workspaceId:""});case 1:case"end":return t.stop()}}),t)})))}),[n,r]),i=(0,m.useMemo)((function(){return Object.values(ze).map((function(e){var t=null==a?void 0:a.find((function(t){return t.type===e.type&&t.isOptimized===e.isOptimized}));return{label:e.name,size:(null==t?void 0:t.fileSize)||0}}))}),[a]),l=(0,m.useMemo)((function(){return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(ke.f.Trigger,{type:"select",children:[(0,P.jsx)("div",{className:"flex-grow text-sm",children:t}),(0,P.jsx)("div",{className:"flex items-center text-gray-700",children:(0,P.jsx)(me.J,{name:"chevron-down-fill",marginLeft:!0})})]})})}),[t]);return(0,P.jsxs)("div",{className:"mt-6",children:[(0,P.jsx)(Re.Z,{children:"Asset link format"}),(0,P.jsx)("div",{className:"mt-2",children:(0,P.jsxs)(ke.f,{children:[l,(0,P.jsx)(ke.f.Content,{className:"w-[295px]",side:"bottom",align:"start",children:Object.values(i).map((function(e){return(0,P.jsx)(ke.f.Item,{onSelect:s(e.label),children:(0,P.jsxs)("div",{className:"flex items-center justify-center w-full",children:[(0,P.jsx)("div",{className:"w-5",children:e.label===t?(0,P.jsx)(me.J,{name:"tick",color:"text-teal-300"}):""}),(0,P.jsxs)("div",{className:"justify-center ml-4 flex items-center",children:[(0,P.jsx)("span",{children:e.label}),(0,P.jsx)("span",{children:(e.label===Fe.optimizedDotLottie||e.label===Fe.optimizedLottie)&&!n&&(0,P.jsx)(Ee.y,{workspaceId:"",iconOnly:!0,className:"ml-2",source:re.Hh.USE_PUBLIC_ASSET})})]}),(0,P.jsx)("div",{className:"ml-auto",children:(0,P.jsx)(Re.Z,{variant:"heading-6",darker:!0,children:(0,Ze.gB)(e.size)})})]})},e.label)}))})]})})]})},He=n(3481),Ge=n(62598),qe=function(e){var t=e.canUsePublicAsset,n=e.fileUrl,s=e.publicAsset,i=e.workspaceId,o=m.useState(!1),c=(0,r.Z)(o,2),d=c[0],u=c[1],f=m.useState(!1),p=(0,r.Z)(f,2),h=p[0],v=p[1],b=m.useState(!1),g=(0,r.Z)(b,2),w=g[0],k=g[1],C=(0,x.Db)(Ge.R6),N=(0,r.Z)(C,2)[1],S=(0,m.useCallback)((function(e){e.currentTarget.select()}),[]),F=(0,m.useCallback)((function(e){e.currentTarget.select()}),[]),I=(0,m.useCallback)((0,j.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&s.isActive){e.next=2;break}return e.abrupt("return");case 2:if(t){e.next=5;break}return(0,Ee.Z)({source:re.Hh.USE_PUBLIC_ASSET,workspaceId:i}),e.abrupt("return");case 5:return k(!0),e.next=8,N({publicAssetId:s.id});case 8:k(!1),u(!0),setTimeout((function(){u(!1)}),1200);case 11:case"end":return e.stop()}}),e)}))),[t,N,s,i]),E=(0,m.useCallback)((function(){n&&(navigator.clipboard.writeText(n),v(!0),setTimeout((function(){v(!1)}),2200))}),[n]);return(0,P.jsxs)("div",{className:"relative mt-6",children:[(0,P.jsx)(a.uT,{show:d,enter:"transform transition duration-[100ms]",enterFrom:"opacity-0 scale-50",enterTo:"opacity-100 scale-100",leave:"transform duration-200 transition ease-in-out",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,P.jsx)("div",{className:"absolute w-[max-content] px-3 py-2 text-xs text-white -translate-x-1/2 bg-gray-600 rounded-md -top-2 left-1/2",children:"New link generated"})}),(0,P.jsx)(a.uT,{show:h,enter:"transform transition duration-[100ms]",enterFrom:"opacity-0 scale-50",enterTo:"opacity-100 scale-100",leave:"transform duration-200 transition ease-in-out",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,P.jsx)("div",{className:"absolute w-[max-content] transform px-3 py-2 text-xs text-white -translate-x-1/2 bg-gray-600 rounded-md -top-2 left-1/2",children:"Link copied"})}),(0,P.jsx)(Re.Z,{children:"Asset link"}),(0,P.jsxs)("div",{className:"relative flex mt-2 space-x-2",children:[(0,P.jsxs)("div",{className:"relative flex flex-1",children:[(0,P.jsx)(He.I,{readOnly:!0,value:n,additionalClasses:"pr-10 text-gray-900",onClick:F,onFocus:S}),(0,P.jsx)("div",{className:"absolute right-0 flex items-center h-full",children:(0,P.jsx)(K.h,{name:"copy-fill",onClick:E,hoverIconClass:"hover:text-gray-400",hoverBackgroundClass:"bg-transparent",focusBackgroundClass:"bg-transparent"})})]}),(0,P.jsx)(ae.u,{title:t?"Generate new link. Old link will be disabled":"Upgrade to generate new asset link",placement:"top-end",children:(0,P.jsx)(K.h,{name:"update",onClick:I,roundedClass:"rounded-md",className:l()({"opacity-40":!t,"animate-spin":w}),backgroundClass:"bg-gray-50",disabled:w})})]})]})},We=n(82920),Qe=function(e){var t=e.handleAllowPublicAccess,n=e.hasAllowPublicAccess,r=e.showDownloadLoader,a=_e().confirm,s=(0,m.useCallback)(function(){var e=(0,j.Z)(y().mark((function e(n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return t(!0),e.abrupt("return");case 3:return e.next=5,a("Disabling the link will remove this animation from everywhere it’s now being used.");case 5:e.sent&&t(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,t]);return(0,P.jsx)(We.r,{value:n,size:"lg",onChange:s,loader:r})},$e=function(e){var t=e.embedUrl,n=m.useState(!1),s=(0,r.Z)(n,2),i=s[0],l=s[1],o=(0,m.useCallback)((function(e){e.currentTarget.select()}),[]),c=(0,m.useCallback)((function(e){e.currentTarget.select()}),[]),d=(0,m.useCallback)((function(){navigator.clipboard.writeText('<iframe src="'.concat(t,'"></iframe>')),l(!0),setTimeout((function(){l(!1)}),2200)}),[t]);return(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)(a.uT,{show:i,enter:"transform transition duration-[100ms]",enterFrom:"opacity-0 scale-50",enterTo:"opacity-100 scale-100",leave:"transform duration-200 transition ease-in-out",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,P.jsx)("div",{className:"absolute w-[max-content] transform px-3 py-2 text-xs text-white -translate-x-1/2 bg-gray-600 rounded-md -top-10 left-1/2",children:"iFrame code copied"})}),(0,P.jsx)("div",{className:"flex space-x-2",children:(0,P.jsxs)("div",{className:"relative flex flex-1",children:[(0,P.jsx)(He.I,{readOnly:!0,value:'<iframe src="'.concat(t,'"></iframe>'),additionalClasses:"pr-10 text-gray-900",onClick:c,onFocus:o}),(0,P.jsx)("div",{className:"absolute right-0 flex items-center h-full",children:(0,P.jsx)(K.h,{name:"copy-fill",onClick:d,hoverIconClass:"hover:text-gray-400",hoverBackgroundClass:"bg-transparent",focusBackgroundClass:"bg-transparent"})})]})})]})},Ye=function(e){var t=e.embedUrl,n=m.useState(!1),s=(0,r.Z)(n,2),i=s[0],l=s[1],o=(0,m.useCallback)((function(e){e.currentTarget.select()}),[]),c=(0,m.useCallback)((function(e){e.currentTarget.select()}),[]),d=(0,m.useCallback)((function(){navigator.clipboard.writeText(t),l(!0),setTimeout((function(){l(!1)}),2200)}),[t]);return(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)(a.uT,{show:i,enter:"transform transition duration-[100ms]",enterFrom:"opacity-0 scale-50",enterTo:"opacity-100 scale-100",leave:"transform duration-200 transition ease-in-out",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,P.jsx)("div",{className:"absolute w-[max-content] transform px-3 py-2 text-xs text-white -translate-x-1/2 bg-gray-600 rounded-md -top-10 left-1/2",children:"oEmbed URL copied"})}),(0,P.jsx)("div",{className:"flex space-x-2",children:(0,P.jsxs)("div",{className:"relative flex flex-1",children:[(0,P.jsx)(He.I,{readOnly:!0,value:t,additionalClasses:"pr-10 text-gray-900",onClick:c,onFocus:o}),(0,P.jsx)("div",{className:"absolute right-0 flex items-center h-full",children:(0,P.jsx)(K.h,{name:"copy-fill",onClick:d,hoverIconClass:"hover:text-gray-400",hoverBackgroundClass:"bg-transparent",focusBackgroundClass:"bg-transparent"})})]})})]})},Ke=function(e){var t=e.embedUrl,n=m.useState("link"),a=(0,r.Z)(n,2),s=a[0],i=a[1],o=m.useCallback((function(e){var t=e.currentTarget.value;i(t)}),[]);return(0,P.jsxs)("div",{className:"relative mt-6",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("button",{value:"link",onClick:o,type:"button",className:l()("font-lf-base text-sm border-b-2",{"text-teal-400 border-teal-300":"link"===s,"border-transparent":"link"!==s}),children:"oEmbed URL"}),(0,P.jsx)("button",{type:"button",onClick:o,value:"iframe",className:l()("font-lf-base text-sm border-b-2",{"text-teal-400 border-teal-300":"iframe"===s,"border-transparent":"iframe"!==s}),children:"iFrame code"})]}),(0,P.jsx)("div",{className:"mt-2",children:"link"===s?(0,P.jsx)(Ye,{embedUrl:t}):(0,P.jsx)($e,{embedUrl:t})})]})},Xe=n(46133);function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt={first:30,last:null,after:null,before:null,orderBy:JSON.stringify({createdAt:"DESC"})},rt=function(e){var t,n,a=e.currentVersionId,s=e.fileId,i=e.publicAsset,l=(0,x.Db)(Ge.b$),o=(0,r.Z)(l,2),c=o[0],d=o[1],u=(0,x.aM)({query:C._V,variables:tt({fileId:s},nt)}),f=(0,r.Z)(u,1)[0],p=(0,m.useCallback)((function(e){return(0,j.Z)(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d({input:{fileVersionId:e}});case 2:case"end":return t.stop()}}),t)})))}),[d]),h=(0,m.useMemo)((function(){var e,t=null===(e=f.data)||void 0===e?void 0:e.fileVersions.edges.find((function(e){return e.node.id===(null==i?void 0:i.workflowFileVersionId)}));return t?(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(ke.f.Trigger,{type:"select",children:[(0,P.jsx)("div",{className:"flex-grow text-sm",children:t.node.id===a?"Current version":"v".concat(t.node.versionNumber)}),(0,P.jsx)("div",{className:"flex items-center text-gray-700",children:c.fetching?(0,P.jsx)("div",{className:"w-4 h-6 flex items-center ml-auto mr-1",children:(0,P.jsx)(Xe.$,{size:4})}):(0,P.jsx)(me.J,{name:"chevron-down-fill",marginLeft:!0})})]})}):(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(ke.f.Trigger,{type:"select",children:[(0,P.jsx)("div",{className:"flex-grow text-sm",children:" "}),(0,P.jsx)("div",{className:"flex items-center text-gray-700",children:(0,P.jsx)("div",{className:"w-4 h-6 flex items-center ml-auto mr-1",children:(0,P.jsx)(Xe.$,{size:4})})})]})})}),[a,null===(t=f.data)||void 0===t?void 0:t.fileVersions.edges,null==i?void 0:i.workflowFileVersionId,c.fetching]);return(0,P.jsxs)("div",{className:"mt-6",children:[(0,P.jsx)(Re.Z,{children:"Version"}),(0,P.jsx)("div",{className:"mt-2",children:(0,P.jsxs)(ke.f,{children:[h,(0,P.jsx)(ke.f.Content,{className:"w-[295px]",side:"bottom",align:"start",children:null===(n=f.data)||void 0===n?void 0:n.fileVersions.edges.map((function(e){var t=e.node;return(0,P.jsx)(ke.f.Item,{onSelect:p(t.id),children:(0,P.jsxs)("div",{className:"flex items-center justify-center",children:[(0,P.jsx)("div",{className:"w-5",children:t.id===(null==i?void 0:i.workflowFileVersionId)?(0,P.jsx)(me.J,{name:"tick",color:"text-teal-300"}):""}),(0,P.jsx)("div",{className:"justify-center ml-4",children:(0,P.jsx)("span",{children:t.id===a?"Current version":"v".concat(t.versionNumber)})})]})},t.id)}))})]})})]})},at=n(82048),st=[{fileName:"wpcom-wmark-black_1.svg",link:"https://lottiefiles.com/plugins/wordpress"},{fileName:"elementor_logo.svg",link:"https://elementor.com/pages/lottie-widget/"},{fileName:"webflow-small.svg",link:"https://lottiefiles.com/integrations/webflow"},{fileName:"apple-logo-dark.svg",link:"https://lottiefiles.com/blog/working-with-lottie/how-to-add-lottie-animation-ios-app-swift"},{fileName:"android_logo_sm.svg",link:"https://lottiefiles.com/blog/working-with-lottie/getting-started-with-lottie-animations-in-android-app"},{fileName:"figma.svg",link:"https://lottiefiles.com/plugins/figma"},{fileName:"xd.svg",link:"https://lottiefiles.com/plugins/adobe-xd"},{fileName:"AE.svg",link:"https://lottiefiles.com/plugins/after-effects"},{fileName:"canva-logo.svg",link:"https://lottiefiles.com/blog/tips-and-tutorials/how-to-create-animated-canva-designs"},{fileName:"google-workspace-logo.svg",link:"https://workspace.google.com/marketplace/app/lottiefiles_for_google_workspace/37040767544"}],it=function(e){var t=e.tabs,n=m.useState(0),s=(0,r.Z)(n,2),i=s[0],o=s[1],c=m.useState(!1),d=(0,r.Z)(c,2),u=d[0],f=d[1],p=t.map((function(e){return e.title})),x=t.map((function(e){return e.content})),h=(0,m.useCallback)((function(e){return function(){o(e)}}),[]),v=(0,m.useCallback)((function(){var e=x[i];e&&(navigator.clipboard.writeText(e),f(!0),setTimeout((function(){f(!1)}),2200))}),[x,i]);return(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)(a.uT,{show:u,enter:"transform transition duration-[100ms]",enterFrom:"opacity-0 scale-50",enterTo:"opacity-100 scale-100",leave:"transform duration-200 transition ease-in-out",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,P.jsx)("div",{className:"absolute w-[max-content] transform px-3 py-2 text-xs text-white -translate-x-1/2 bg-gray-600 rounded-md -top-11 left-1/2",children:"Embed code copied!"})}),(0,P.jsx)("div",{className:"flex flex-wrap",children:(0,P.jsxs)("div",{className:"w-full",children:[(0,P.jsxs)("ul",{className:"flex flex-row flex-wrap p-2 pb-1 mb-0 space-x-2 text-xs list-none",children:[p.map((function(e,t){var n="nav-".concat(t);return(0,P.jsx)("li",{children:(0,P.jsx)("button",{type:"button",className:" font-lf-bold text-gray-600",onClick:h(t),children:e})},n)})),(0,P.jsx)("div",{className:"flex-grow"}),(0,P.jsx)("div",{className:"flex space-x-2",children:(0,P.jsx)(K.h,{name:"copy-fill",onClick:v,hoverIconClass:"hover:text-gray-400",hoverBackgroundClass:"bg-transparent",focusBackgroundClass:"bg-transparent",small:!0})})]}),(0,P.jsx)("div",{className:"relative flex flex-col w-full min-w-0 p-2 text-xs text-gray-900 break-words",children:(0,P.jsx)("div",{className:"flex-auto",children:(0,P.jsx)("div",{className:"tab-content tab-space",children:x.map((function(e,t){var n="tab-".concat(t);return(0,P.jsx)("div",{className:l()("text-gray-400",{block:i===t,hidden:i!==t}),children:e},n)}))})})})]})})]})},lt="https://lottie.host";var ot,ct,dt,ut,mt=function(e){var t,n,a,s,i=e.currentVersionId,l=e.fileId,o=e.workspaceId,c=m.useState(""),d=(0,r.Z)(c,2),u=d[0],f=d[1],h=m.useState(""),v=(0,r.Z)(h,2),b=v[0],g=v[1],w=m.useState(Fe.json),k=(0,r.Z)(w,2),C=k[0],N=k[1],S=m.useState(!1),F=(0,r.Z)(S,2),I=F[0],E=F[1],O=m.useState(!1),Z=(0,r.Z)(O,2),D=Z[0],A=Z[1],R=(0,p.useSetRecoilState)(at.W),L=(0,he.w)().canUsePublicAsset(),V=(0,x.aM)({query:Ge.$R,variables:{fileId:l}}),M=(0,r.Z)(V,1)[0],U=(0,x.Db)(Ge._9),_=(0,r.Z)(U,2)[1],B=(0,m.useMemo)((function(){var e;return null===(e=M.data)||void 0===e?void 0:e.publicAssets.find((function(e){return C===Fe.optimizedLottie?"application/json"===e.type&&e.isOptimized:C===Fe.dotLottie?"application/zip"===e.type&&!e.isOptimized:C===Fe.optimizedDotLottie?"application/zip"===e.type&&e.isOptimized:"application/json"===e.type&&!e.isOptimized}))}),[C,null===(t=M.data)||void 0===t?void 0:t.publicAssets]),z=(0,m.useMemo)((function(){return!!B&&(B.expireAt?new Date(B.expireAt).getTime()<Date.now():new Date(B.createdAt).getTime()+864e5<Date.now())}),[B]),J=(0,m.useMemo)((function(){return B?B.expireAt?new Date(B.expireAt).getTime():new Date(B.createdAt).getTime()+864e5:null}),[B]),H=(0,m.useMemo)((function(){return[{title:"WEB",content:(e=u,t=(null==B?void 0:B.type)||"application/json","application/zip"===t?'<script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.js"><\/script> \n\n\n    <dotlottie-player src="'.concat(e,'"  background="transparent"  speed="1"  style="width: 300px; height: 300px;" loop autoplay></dotlottie-player>'):'<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"><\/script> \n\n\n    <lottie-player src="'.concat(e,'" background="transparent" speed="1" style="width: 300px; height: 300px;" loop autoplay></lottie-player>'))}];var e,t}),[u,null==B?void 0:B.type]),G=(0,m.useCallback)((0,j.Z)(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),t=!I,e.next=4,_({input:{fileId:l,isActive:t}});case 4:E(t),A(!1);case 6:case"end":return e.stop()}}),e)}))),[_,l,I]),q=(0,m.useMemo)((function(){return B&&L?(0,P.jsx)(P.Fragment,{}):z?(0,P.jsx)("div",{className:"relative p-3 mt-2 bg-orange-100 rounded",children:(0,P.jsx)("div",{children:(0,P.jsxs)(Re.Z,{children:["This asset link has ",(0,P.jsx)("span",{className:"font-lf-bold",children:"expired"}),". Enable it for another 24 hours or"," ",(0,P.jsx)("span",{onClick:function(){return R({source:re.Hh.USE_PUBLIC_ASSET,workspaceId:o})},className:"text-teal-300 cursor-pointer hover:text-teal-400",children:"upgrade to enable it permanently."})]})})}):I?(0,P.jsx)("div",{className:"relative p-3 mt-2 rounded bg-teal-50",children:(0,P.jsxs)(Re.Z,{children:["This asset link will expire on"," ",(0,P.jsx)("span",{className:"font-lf-bold",children:J?(0,Ae.Z)(J,"d MMM ''yy."):""})," Enable it again for another 24 hours upon expiry or"," ",(0,P.jsx)("span",{onClick:function(){return R({source:re.Hh.USE_PUBLIC_ASSET,workspaceId:o})},className:"text-teal-300 cursor-pointer hover:text-teal-400",children:"upgrade to enable it permanently."})]})}):(0,P.jsx)(P.Fragment,{})}),[B,L,z,I,R,o,J]),W=(0,m.useCallback)(function(){var e=(0,j.Z)(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===(n=M.data)||void 0===n?void 0:n.publicAssets.find((function(e){return t===Fe.optimizedLottie?"application/json"===e.type&&e.isOptimized:t===Fe.dotLottie?"application/zip"===e.type&&!e.isOptimized:t===Fe.optimizedDotLottie?"application/zip"===e.type&&e.isOptimized:"application/json"===e.type&&!e.isOptimized})))&&N(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[null===(n=M.data)||void 0===n?void 0:n.publicAssets]);return(0,m.useEffect)((function(){var e,t=null===(e=M.data)||void 0===e?void 0:e.publicAssets[0];if(t&&t.isActive){if(!B)return;var n="".concat(lt,"/").concat(B.fileKey,"/").concat(B.fileName),r="".concat(lt,"/?file=").concat(B.fileKey,"/").concat(B.fileName);f(n),g(r),E(!(!L&&z))}else E(!1),f(""),g("")}),[B,L,z,null===(a=M.data)||void 0===a?void 0:a.publicAssets,_,l]),M.fetching?(0,P.jsx)(T.a,{}):(0,P.jsxs)("div",{className:"h-full",children:[(0,P.jsx)("h3",{className:"px-6 pt-6 text-base text-gray-900 font-lf-bold",children:"Handoff & Embed"}),(0,P.jsx)(Ue,{children:(0,P.jsxs)("div",{className:"h-[calc(100vh-64px-48px)] p-6 overflow-y-auto",children:[(0,P.jsx)(Be,{}),(0,P.jsx)("div",{className:"",children:(0,P.jsxs)("div",{className:"flex",children:[(0,P.jsx)("div",{className:"pr-2",children:(0,P.jsx)(me.J,{name:"embed"})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"mb-0.5",children:(0,P.jsx)(Re.Z,{children:"Enable Asset Link"})}),(0,P.jsx)(Re.Z,{variant:"caption-1",color:"gray",children:"Allow this animation to be used on websites, apps, social media and more."})]}),(0,P.jsx)("div",{className:"ml-2",children:(0,P.jsx)(Qe,{handleAllowPublicAccess:G,hasAllowPublicAccess:I,showDownloadLoader:D})})]})}),q,I&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(rt,{currentVersionId:i,publicAsset:B,fileId:l}),(0,P.jsx)(Je,{publicAssets:null===(s=M.data)||void 0===s?void 0:s.publicAssets,canUsePublicAsset:L,assetType:C,changeAssetType:W}),(0,P.jsx)(qe,{fileUrl:u,publicAsset:B,canUsePublicAsset:L,workspaceId:o}),(0,P.jsxs)("div",{className:"mt-6",children:[(0,P.jsx)(Re.Z,{children:"Embed"}),(0,P.jsx)("div",{className:"w-full p-1 mt-2 border border-gray-100 rounded bg-gray-50",children:(0,P.jsx)(it,{tabs:H})})]})]}),(0,P.jsx)(Ke,{embedUrl:b})]}),(0,P.jsxs)("div",{className:"mt-6",children:[(0,P.jsx)(Re.Z,{children:"You can use the animation in..."}),(0,P.jsx)("div",{className:"grid grid-cols-5 gap-2 mt-2",children:st.slice(0,5).map((function(e){return(0,P.jsx)("a",{href:e.link,target:"_blank",className:"flex items-center justify-center p-2 rounded-md bg-gray-50",rel:"noreferrer",children:(0,P.jsx)("img",{src:"/integrations/".concat(e.fileName),className:"object-contain w-6 h-6",alt:""})},e.fileName)}))}),(0,P.jsxs)("div",{className:"grid grid-cols-6 gap-2 mt-2",children:[st.slice(5).map((function(e){return(0,P.jsx)("a",{href:e.link,target:"_blank",className:"flex items-center justify-center p-2 rounded-md bg-gray-50",rel:"noreferrer",children:(0,P.jsx)("img",{src:"/integrations/".concat(e.fileName),className:"object-contain w-6 h-6",alt:""})},e.fileName)})),(0,P.jsx)("a",{href:"https://lottiefiles.com/integrations",target:"_blank",className:"flex items-center justify-center p-2 text-gray-700 rounded-md bg-gray-50",rel:"noreferrer",children:(0,P.jsx)(me.J,{color:"text-gray-600",name:"meatball-menu"})})]})]})]})})]})},ft=n(87426),pt=n(11493),xt=n(59715),ht=n(57443),vt=n(42005),bt=n(14571),jt=n(30813),gt=(0,P.jsx)(K.h,{name:"mobile",focusBackgroundClass:"none",tooltip:"Test animation for mobile",tooltipPlacement:"bottom"}),yt=function(e){var t=e.animationId;return(0,P.jsx)(jt.j,{align:"end",side:"top",button:gt,additionalContentClass:"p-4 w-80",children:(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"flex items-center justify-between px-4 pb-4 -ml-4 -mr-4 border-b border-gray-50",children:(0,P.jsx)("div",{className:"text-sm text-gray-700 font-lf-bold",children:"Test animation for mobile"})}),(0,P.jsxs)("div",{className:"pt-4",children:[(0,P.jsxs)("div",{className:"pb-4 text-xs text-gray-700 font-lf-regular",children:["Scan QR using the LottieFiles app for"," ",(0,P.jsx)("a",{href:"https://lottiefiles.com/android",target:"_blank",className:"text-teal-300 cursor-pointer",rel:"noreferrer",children:"Android"})," ","or",(0,P.jsxs)("a",{href:"https://lottiefiles.com/ios",target:"_blank",className:"text-teal-300 cursor-pointer",rel:"noreferrer",children:[" ","iOS"]})," ","to test this animation in mobile players."]}),(0,P.jsx)("div",{children:(0,P.jsx)("div",{className:"flex items-center justify-center px-4 py-6 rounded-md bg-gray-50",children:(0,P.jsx)(bt.Z,{value:"".concat("https://app.lottiefiles.com","/animation/").concat(t),size:228})})})]})]})})},wt=n(45950),kt=function(e){var t=e.file,n=(0,m.useCallback)((function(){window.open("".concat("https://workshop.lottiefiles.dev","?fileId=").concat(t.id),"_blank")}),[t]),r=(0,wt.p)().openWithEditor,a=(0,m.useCallback)((function(){r(t)}),[t,r]);return(0,P.jsxs)(ke.f,{children:[(0,P.jsx)(ke.f.Trigger,{asChild:!0,children:(0,P.jsx)(K.h,{tooltip:"Edit animation",tooltipPlacement:"bottom",name:"edit-at-editor"})}),(0,P.jsxs)(ke.f.Content,{align:"end",children:[(0,P.jsx)(ke.f.Item,{onSelect:n,children:"Advanced Editing in Creator"}),(0,P.jsx)(ke.f.Item,{onSelect:a,children:"Edit in Editor"})]})]})},Ct=n(9482),Nt=n(11052),St=n(99348),Ft=n(14844),It=n(55904),Et=n(10426),Ot=n(60649),Zt=n(55261),Dt={height:"320px"},At=[{label:"Allow views only",value:Ot.p.VIEW_ONLY},{label:"Allow comments",value:Ot.p.COMMENT},{label:"Allow downloads + comments",value:Ot.p.DOWNLOAD_AND_VIEW}],Rt=function(e){var t,n,a=e.additionalClassName,s=void 0===a?"":a,i=e.animationId,o=e.tooltipRootSelector,c=(0,x.aM)({query:Et.Vx,variables:{resourceId:i,resourceType:Zt.E.FILE}}),d=(0,r.Z)(c,1)[0];return null!==(t=d.data)&&void 0!==t&&t.privateShareMembers.length?(0,P.jsx)("div",{className:l()("px-6 space-y-4 overflow-y-scroll",s),children:null===(n=d.data)||void 0===n?void 0:n.privateShareMembers.map((function(e){return(0,P.jsx)(It.d,{sharedResource:e,tooltipRootSelector:o},e.id)}))}):null},Tt=function(e){var t=e.resourceId,n=(0,x.Db)(Et.p),a=(0,r.Z)(n,2)[1],s=(0,m.useCallback)((function(e,n){var r=e.map((function(e){return{recipientEmail:e.id,access:n,userId:e.userId}}));a({input:{recipients:r,resourceId:t,resourceType:Zt.E.FILE}})}),[a,t]);return(0,P.jsx)(St.u,{onSubmit:s})},Pt=(0,P.jsx)(Ct.z,{customClasses:"px-3 py-1.5 hover:bg-gray-50 text-sm text-gray-900 rounded",children:"Share"}),Lt=function(e){var t=e.animationId,n=e.animationName,r=e.bgColor,a=e.fileUrl,s=e.projectName,i=e.workspaceId,l=(0,m.useState)("share"),o=l[0],c=l[1],d=(0,m.useRef)(null),u=(0,m.useMemo)((function(){return"share-file-modal-".concat(Math.round(1e3*Math.random()))}),[]),f=(0,m.useCallback)((function(){var e;null===(e=d.current)||void 0===e||e.submitForm()}),[]);return(0,P.jsx)(jt.j,{align:"end",side:"bottom",button:Pt,additionalContentClass:"p-0",id:u,children:(0,P.jsxs)("div",{className:"lf-share-modal-popover__root",children:[(0,P.jsxs)("div",{className:"flex items-center p-4 border-b border-gray-100",children:[(0,P.jsxs)("div",{className:"relative mr-4",children:[(0,P.jsx)("button",{type:"button",onClick:function(){c("share")},className:"".concat("share"===o?"font-lf-bold text-teal-500":"text-gray-900 font-lf-regular","  mr-4 cursor-pointer"),children:"Share"}),(0,P.jsx)("div",{className:"".concat("share"===o?"border border-b-2 border-teal-300":"border-b-0"," mr-4 absolute -left-2 -bottom-4 w-16")})]}),(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)("button",{type:"button",onClick:function(){c("publish")},className:"".concat("publish"===o?"font-lf-bold text-teal-500":"text-gray-900 font-lf-regular","  cursor-pointer"),children:"Publish to public"}),(0,P.jsx)("div",{className:"".concat("publish"===o?"border border-b-2 border-teal-300":"border-b-0"," absolute -left-2 -bottom-4 w-36")})]})]}),"share"===o&&(0,P.jsxs)("div",{className:"lf-share-modal-popover",children:[(0,P.jsxs)("div",{className:"px-6 mt-6",children:[(0,P.jsx)(Tt,{resourceId:t}),(0,P.jsxs)("div",{className:"flex mt-4 space-x-3 text-sm text-gray-300",children:[(0,P.jsx)(me.J,{name:"members"}),(0,P.jsx)("p",{children:"Everyone at ".concat(s," can access this animation")})]})]}),(0,P.jsx)(Rt,{animationId:t,tooltipRootSelector:"#".concat(u),additionalClassName:"mt-4"}),(0,P.jsx)("div",{className:"flex w-full px-6 py-4 mt-4 border-t border-gray-100",children:(0,P.jsx)(Ft.R,{resourceId:t,workspaceId:i,options:At})})]}),"publish"===o&&(0,P.jsxs)("div",{className:"lf-share-modal-popover",style:Dt,children:[(0,P.jsxs)("div",{className:"relative flex items-center justify-center h-64 bg-pink-50",children:[(0,P.jsx)(me.J,{name:"abstract-art-semicircle",className:"absolute w-16 h-16 top-10 right-10"}),(0,P.jsx)("span",{className:"inline-block px-24 text-lg leading-loose text-center text-gray-900 align-middle font-lf-bold",children:"Publish and share your animation with the LottieFiles community."}),(0,P.jsx)(me.J,{name:"abstract-art-box",className:"absolute w-20 h-20 bottom-6 left-6"})]}),(0,P.jsxs)("div",{className:"flex items-center justify-center p-4",children:[(0,P.jsx)(Ct.z,{width:"w-24",fontClasses:"text-base",onClick:f,children:"Publish"}),(0,P.jsx)(Nt.Z,{fileUrl:a,animationName:n,ref:d,bgColor:r})]})]})]})})},Vt=n(38868),Mt=n(62879),Ut=n(58887),_t=n(24647),Bt=(0,_t.Ps)(ot||(ot=(0,Ut.Z)(["\n  query getFileNotificationSubscribers($id: ID!, $after: String, $before: String) {\n    fileNotificationSubscribers(id: $id, after: $after, before: $before) {\n      __typename\n      pageInfo {\n        __typename\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        __typename\n        node {\n          __typename\n          id\n          userId\n          user {\n            id\n            email\n            name\n            avatarUrl\n          }\n        }\n      }\n      totalCount\n    }\n  }\n"]))),zt=function(e){var t=e.subscribers;return(0,P.jsx)("table",{children:(0,P.jsx)("tbody",{className:"space-y-1",children:t.map((function(e){return(0,P.jsxs)("tr",{className:"flex items-center",children:[(0,P.jsx)("td",{className:"pr-1",children:(0,P.jsx)(Mt.q,{avatarOnly:!0,name:e.node.user.name})}),(0,P.jsx)("td",{className:"pr-3",children:(0,P.jsx)("div",{children:e.node.user.name})})]},e.node.id)}))})})},Jt=function(e){var t=e.id,n=(0,x.aM)({query:Bt,variables:{id:t}}),a=(0,r.Z)(n,1)[0];if(!a.data)return null;var s=a.data.fileNotificationSubscribers.edges,i=a.data.fileNotificationSubscribers.totalCount||0;return 0===i?null:(0,P.jsxs)("div",{className:"relative flex flex-row-reverse -space-x-0.5",children:[i>5&&(0,P.jsx)("div",{className:"relative inline-block w-6 h-6 rounded-full ring-1 ring-white hover:ring-teal-600 hover:z-10",children:(0,P.jsx)(ae.u,{title:zt({subscribers:s.slice(5)}),placement:"bottom",children:(0,P.jsxs)("div",{className:"flex items-center justify-center w-6 h-6 overflow-hidden text-xs leading-none text-gray-900 bg-white rounded-full shadow",children:[(0,P.jsx)("span",{children:"+"}),(0,P.jsx)("span",{children:"".concat(s.length-5)})]})})}),s.slice(0,5).reverse().map((function(e){return(0,P.jsx)("div",{className:"relative inline-block w-6 h-6 rounded-full bg-red ring-1 ring-white hover:ring-teal-600 hover:z-10",children:(0,P.jsx)(ae.u,{title:(t=e.node.user.name,(0,P.jsx)("div",{className:"text-center",children:(0,P.jsx)("div",{children:t})})),placement:"bottom",children:(0,P.jsx)(Mt.q,{avatarOnly:!0,name:e.node.user.name,src:e.node.user.avatarUrl})})},e.node.id);var t}))]})},Ht=n(70421),Gt=n(30424),qt=(0,_t.Ps)(ct||(ct=(0,Ut.Z)(["\n  mutation subscribeToFileNotifications($fileId: ID!) {\n    fileNotificationsSubscribe(fileId: $fileId)\n  }\n"]))),Wt=(0,_t.Ps)(dt||(dt=(0,Ut.Z)(["\n  mutation unsubscribeToFileNotifications($fileId: ID!) {\n    fileNotificationsUnsubscribe(fileId: $fileId)\n  }\n"]))),Qt=(0,p.atom)({key:"get-stream-user-feed",default:null});n(31e3);!function(e){e.AnimationCommentFeedGroup="animation_comments",e.AnimationStatusUpdateFeedGroup="animation_status"}(ut||(ut={}));var $t=function(){var e=(0,j.Z)(y().mark((function e(t,n){var r,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="".concat(ut.AnimationCommentFeedGroup,":").concat(n),a="".concat(ut.AnimationStatusUpdateFeedGroup,":").concat(n),e.next=5,t.following({limit:1,filter:[a,r]});case 5:if(!(e.sent.results.length>0)){e.next=8;break}return e.abrupt("return",!0);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),Yt=n(50471),Kt=n(16392),Xt=n(58514),en=function(e){var t=e.animation,n=e.open,a=(0,d.useRouter)(),s=(0,O.p)(),i=(0,m.useRef)(null),l=(0,m.useState)(!1),o=l[0],c=l[1],u=(0,m.useState)(!1),f=u[0],h=u[1],v=(0,m.useState)(!1),b=v[0],g=v[1],w=(0,m.useState)(!1),k=w[0],C=w[1],N=(0,x.Db)(qt),S=(0,r.Z)(N,2)[1],F=(0,x.Db)(Wt),I=(0,r.Z)(F,2)[1],E=(0,p.useRecoilValue)(Qt),Z=(0,p.useRecoilValue)(Xt.h),D=(0,m.useCallback)((0,j.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=6;break}return e.t0=C,e.next=4,$t(E,t.id);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)}))),[t.id,E]);(0,m.useEffect)((function(){D()}),[D]);var A=(0,m.useCallback)((function(){try{k&&E?I({fileId:t.id}):k||S({fileId:t.id})}catch(e){}C((function(e){return!e}))}),[k,E,I,t.id,S]),R=(0,x.Db)(Gt.i$),T=(0,r.Z)(R,2)[1],L=(0,m.useCallback)((0,j.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T({id:t.id});case 3:a.replace("/"),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])}))),[t,T]),V=(0,m.useCallback)((function(){null==s||s.pushSuccess('Animation was successfully moved to "'.concat("private-animation"===(null==Z?void 0:Z.type)?"your private animations":null==Z?void 0:Z.name,'".'))}),[s,Z]),M=(0,m.useCallback)((function(){return g(!0)}),[g]),U=(0,m.useCallback)((function(){return c(!0)}),[c]),_=(0,m.useCallback)((function(){return h(!0)}),[h]),B=(0,m.useCallback)((function(){var e;null===(e=i.current)||void 0===e||e.submitForm()}),[]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(ke.f,{open:n,children:[(0,P.jsxs)(ke.f.Trigger,{type:"text",children:[(0,P.jsx)("span",{children:t.name}),(0,P.jsx)(me.J,{name:"chevron-down-fill",small:!0,marginLeft:!0})]}),(0,P.jsxs)(ke.f.Content,{side:"bottom",align:"start",children:[(0,P.jsxs)(ke.f.Item,{onSelect:M,children:[(0,P.jsx)(me.J,{name:"pencil",color:"text-gray-500",marginRight:!0}),(0,P.jsx)("span",{children:"Rename"})]}),(0,P.jsx)(ke.f.Separator,{}),(0,P.jsxs)(ke.f.Item,{onSelect:U,children:[(0,P.jsx)(me.J,{name:"move",color:"text-gray-500",marginRight:!0}),(0,P.jsx)("span",{children:"Move"})]}),(0,P.jsx)("div",{className:"mb-1"}),(0,P.jsxs)(ke.f.Item,{onSelect:B,children:[(0,P.jsx)(me.J,{name:"earth",color:"text-gray-500",marginRight:!0}),(0,P.jsx)("span",{children:"Publish to public"}),(0,P.jsx)(Nt.L,{fileUrl:t.fileObject.url,animationName:t.name,ref:i,bgColor:t.backgroundColor})]}),(0,P.jsx)(ke.f.Separator,{}),(0,P.jsx)(ke.f.Item,{onSelect:A,children:k?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(me.J,{name:"unsubscribe",color:"text-gray-500",marginRight:!0}),(0,P.jsx)("span",{children:"Unsubscribe"})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(me.J,{name:"bell",color:"text-gray-500",marginRight:!0}),(0,P.jsx)("span",{children:"Subscribe"})]})}),(0,P.jsx)(ke.f.Separator,{}),(0,P.jsxs)(ke.f.Item,{onSelect:_,destructiveAction:!0,children:[(0,P.jsx)(me.J,{name:"delete",marginRight:!0}),(0,P.jsx)("span",{children:"Delete animation"})]})]})]}),(0,P.jsx)(ye.s,{title:(0,P.jsxs)("p",{className:"text-red-500",children:["Delete ",(0,P.jsxs)("strong",{children:['"',t.name,'"']})]}),body:"Are you sure you want to delete this animation? This action cannot be undone.",buttonTitle:"Delete",closeCallback:function(){h(!1)},onConfirm:L,showModal:f}),(0,P.jsx)(Yt.R,{animationName:t.name,animationId:t.id,show:b,close:function(){g(!1)}}),(0,P.jsx)(Kt.Z,{workspaceId:t.project.workspace.id,isPrivate:Boolean(t.project.isPrivate),show:o,close:function(){return c(!1)},animationIds:[t.id],onTransferComplete:V})]})},tn=n(88725),nn=n(41169),rn=n(37836),an=n(84717),sn=function(e){var t,n,a,s,i,l=e.animation,o=(0,p.useRecoilState)(M.h3),c=(0,r.Z)(o,2),d=c[0],u=c[1],f=(0,xt.SS)(re.AD.SHOW_DRAFT_PROJECT),x=(0,D.useRouter)(),h=(0,rn.k)().activeOnboardingHotspot,v=(0,he.w)(),b=x.query.from,j=(0,p.useRecoilState)(vt.fu),g=(0,r.Z)(j,2),y=g[0],w=g[1],k=(0,nn.a)({scopes:(null==l?void 0:l.animationPermissionScopes)||[]}),C=k.canDownload,N=k.canFullAccess,S=(0,m.useRef)(!0),F=(0,wt.p)().openWithEditor,E=(0,m.useCallback)((function(){w("download")}),[w]),O=(0,m.useCallback)((function(){u(null)}),[u]),Z=(0,m.useCallback)((function(){l&&l.fileObject.url&&F(l)}),[l,F]);return(0,m.useEffect)((function(){C()&&!N()&&S.current?(w("download"),S.current=!1):C()||N()||"download"!==y||w(null)}),[l,C,N,y,w]),(0,P.jsxs)("div",{className:"flex items-center flex-grow ",children:[(0,P.jsxs)("div",{className:"flex items-center flex-1 flex-grow",children:[(0,P.jsx)("div",{children:(0,P.jsxs)(Ht.O,{children:[b&&"shared-with-me"===b?(0,P.jsx)(ht.default,{href:"/shared-with-me",children:(0,P.jsx)("a",{className:"flex flex-row items-center space-x-2",children:(0,P.jsx)("span",{className:"pointer",children:"Shared with Me"})})}):(null==l?void 0:l.project)&&(0,P.jsx)(ht.default,{href:"/project/".concat(null==l||null===(t=l.project)||void 0===t?void 0:t.id),children:(0,P.jsxs)("a",{className:"flex flex-row items-center space-x-2",children:[(null==l||null===(n=l.project)||void 0===n?void 0:n.isPrivate)&&(0,P.jsx)(me.J,{name:"lock-fill",small:!0,color:"text-gray-600",className:"pointer"}),(0,P.jsx)("span",{className:"pointer",children:(null==l||null===(a=l.project)||void 0===a?void 0:a.title)||""})]})}),(null==l?void 0:l.folder)&&(0,P.jsx)(ht.default,{href:"/folder/".concat(l.folder.id),children:l.folder.name}),l&&(0,P.jsx)("div",{"data-onboarding-id":"anim-title",children:N()?(0,P.jsx)("div",{className:"cursor-pointer",children:(0,P.jsx)(en,{animation:l,open:null===(s=h.find((function(e){return e.parentId===an.yM.ANIM_TITLE_HOTSPOT})))||void 0===s||null===(i=s.hotspot)||void 0===i?void 0:i.toggled})}):(0,P.jsx)(Re.Z,{children:l.name})})]})}),d&&(0,P.jsxs)("div",{className:"flex items-center px-2 py-1 space-x-1 text-sm text-orange-700 bg-orange-100 rounded-md font-lf-semi-bold",children:[(0,P.jsx)(me.J,{name:"eye-fill"}),(0,P.jsx)("div",{children:"v".concat(d.versionNumber," - view only")}),(0,P.jsxs)("button",{onClick:O,type:"button",className:"pl-4",children:[(0,P.jsx)("span",{className:"sr-only",children:"Close"}),(0,P.jsx)("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,P.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),!d&&l&&(0,P.jsxs)("div",{className:"flex items-center pr-4 ml-auto mr-4 space-x-2 border-r border-gray-100",children:[N()&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Jt,{id:l.id}),(0,P.jsx)(tn.z,{featureService:v,animationStatus:l.status,animationId:l.id,projectId:l.project.id,workspaceId:l.project.workspace.id}),(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)(yt,{animationId:l.id}),(0,P.jsxs)("div",{className:"flex items-center","data-onboarding-id":"anim-topbar",children:[f.on&&(0,P.jsx)(kt,{file:l}),!f.on&&(0,P.jsx)(K.h,{tooltip:"Open in Editor",tooltipPlacement:"bottom",name:"edit-at-editor",onClick:Z,focusBackgroundClass:"none"}),(0,P.jsx)(K.h,{tooltip:"Download & export",tooltipPlacement:"bottom",name:"download",onClick:E,focusBackgroundClass:"none"}),(0,P.jsx)(Lt,{fileUrl:l.fileObject.url,animationId:l.id,workspaceId:l.project.workspaceId,animationName:l.name,projectName:l.project.title,bgColor:l.backgroundColor})]})]})]}),!N()&&C()&&(0,P.jsx)(I.z,{icon:"download",onClick:E,text:"Download as"})]})]}),(0,P.jsx)(Vt.i,{})]})},ln=function(e){var t=e.fileUrl;return(0,P.jsxs)("div",{className:"p-4 space-y-4",children:[(0,P.jsx)("h3",{className:"text-gray-900 text-xl font-lf-semi-bold",children:"QR Code"}),(0,P.jsx)("p",{className:"text-sm text-gray-900",children:"To preview this file on Lottie, scan this on LottieFiles on Android or iOS."}),(0,P.jsx)("div",{className:"p-4 flex items-center justify-center",children:(0,P.jsx)(bt.Z,{value:t,size:228})}),(0,P.jsx)("h3",{className:"text-gray-900 text-xl font-lf-semi-bold",children:"Push to mobile"})]})},on=n(51705),cn=n(78170),dn=function(e){var t=e.deleteHandler,n=e.duplicateHandler,r=(0,P.jsx)("div",{className:"hover:cursor-pointer",children:(0,P.jsxs)(ke.f.Item,{onSelect:function(){n()},children:[(0,P.jsx)(me.J,{name:"copy",color:"text-gray-500",marginRight:!0}),(0,P.jsx)("span",{children:"Duplicate segment"})]})}),a=(0,P.jsx)("div",{className:"hover:cursor-pointer",children:(0,P.jsxs)(ke.f.Item,{onSelect:function(){t()},children:[(0,P.jsx)(me.J,{name:"delete",color:"text-red-500",marginRight:!0}),(0,P.jsx)("span",{className:"text-red-500",children:"Delete segment"})]})});return(0,P.jsxs)(ke.f,{children:[(0,P.jsx)("div",{className:"hover:cursor-pointer",children:(0,P.jsx)(ke.f.Trigger,{type:"icon",children:(0,P.jsx)(me.J,{name:"kebab-menu",small:!0})})}),(0,P.jsx)(ke.f.Content,{side:"bottom",align:"start",children:(0,P.jsxs)(P.Fragment,{children:[r,a]})})]})},un=function(e){var t=e.defaultValue,n=e.segmentStateHandler,a=m.useState(t),s=(0,r.Z)(a,2),i=s[0],l=s[1],o=(0,m.useCallback)((function(e){return function(){n(e),l(e)}}),[n]);return(0,P.jsx)("div",{className:"flex",children:(0,P.jsxs)(ke.f,{children:[(0,P.jsxs)(ke.f.Trigger,{type:"text",children:[(0,P.jsx)("div",{className:"flex text-sm",children:t===cn.Nn.PlayOnce?"Play once":t}),(0,P.jsx)("div",{className:"flex items-center text-gray-500",children:(0,P.jsx)(me.J,{name:"chevron-down-fill",small:!0,marginLeft:!0})})]}),(0,P.jsxs)(ke.f.Content,{side:"bottom",align:"start",children:[(0,P.jsx)(ke.f.Item,{onSelect:o(cn.Nn.Loop),children:(0,P.jsxs)("div",{className:"flex justify-center align-items-center",children:[(0,P.jsx)("div",{className:"w-4",children:"Loop"===i?(0,P.jsx)(me.J,{name:"tick"}):""}),(0,P.jsx)("div",{className:"justify-center w-20 m-auto ml-4 align-items-center",children:(0,P.jsx)("span",{children:"Loop"})})]})}),(0,P.jsx)(ke.f.Item,{onSelect:o(cn.Nn.PlayOnce),children:(0,P.jsxs)("div",{className:"flex justify-center align-items-center",children:[(0,P.jsx)("div",{className:"w-4",children:"PlayOnce"===i?(0,P.jsx)(me.J,{name:"tick"}):""}),(0,P.jsx)("div",{className:"justify-center w-20 m-auto ml-4 align-items-center",children:(0,P.jsx)("span",{children:"Play Once"})})]})})]})]})})},mn=function(e){var t=e.endFrameDefaultValue,n=e.endFrameHandler,a=e.errorHandler,s=e.startFrameDefaultValue,i=e.startFrameHandler,l=(0,m.useState)(!1),o=l[0],d=l[1],u=(0,m.useState)(!1),f=u[0],x=u[1],h=(0,p.useRecoilState)(M.yQ),v=(0,r.Z)(h,1)[0],b=function(e){return e<0||e>v},j=(0,c.debounce)((function(e){var t=Number(e.target.value),n=!1;b(t)?(d(!0),n=!0):(d(!1),n=!1),n||f?a("inputedFrameError"):(i(Number(e.target.value)),a(""))}),100),g=(0,c.debounce)((function(e){var t=Number(e.target.value),r=!1;b(t)?(r=!0,x(!0)):(r=!1,x(!1)),o||r?a("inputedFrameError"):(a("frameError"),n(Number(e.target.value)))}),100),y=(0,m.useCallback)((function(e){e.target.select()}),[]);return(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center w-12 text-xs text-center text-gray-400 rounded-lg",children:[(0,P.jsx)("span",{className:"absolute pl-1",children:"#"}),(0,P.jsx)(He.I,{additionalClasses:"pl-3 text-sm text-gray-900 text-center ".concat(o?"border-red-500 focus:border-red-500 truncate ...":"border-gray-100 bg-gray-50 hover:bg-gray-50 hover:cursor-pointer focus:bg-transparent focus:border-teal-200 truncate ..."),type:"number",defaultValue:s,onChange:j,onFocus:y,name:"endFrameInput"})]}),(0,P.jsx)("div",{children:(0,P.jsx)(me.J,{name:"arrow-left",small:!0,className:"m-1.5"})}),(0,P.jsxs)("div",{className:"flex items-center w-12 text-xs text-gray-400 rounded-lg",children:[(0,P.jsx)("span",{className:"absolute pl-1",children:"#"}),(0,P.jsx)(He.I,{additionalClasses:"pl-3 text-sm text-gray-900 text-center ".concat(f?"border-red-500 focus:border-red-500 truncate ...":"border-gray-100 bg-gray-50 hover:bg-gray-50 hover:cursor-pointer focus:bg-transparent focus:border-teal-200 truncate ..."),type:"number",defaultValue:t,onChange:g,onFocus:y,name:"endFrameInput"})]})]})},fn=m.forwardRef((function(e,t){var n=e.defaultValue,r=void 0===n?"":n,a=e.errorHandler,s=e.inputHandler,i=e.maxLength,l=(0,m.useState)(!1),o=l[0],d=l[1],u=(0,c.debounce)((function(e){e.target.value.length<3||!e.target.value?(d(!0),a(!0)):s&&(d(!1),a(!1),s(e.target.value))}),500),f=(0,m.useCallback)((function(e){e.target.select()}),[]);return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(He.I,{additionalClasses:"bg-transparent w-full text-sm text-gray-900 ".concat(o?"border-red-500 focus:border-red-500":"border-transparent hover:border-gray-100 focus:border-teal-200 dark:border-transparent dark:bg-gray dark:placeholder-gray-400 rounded-md "),type:"text",onFocus:f,defaultValue:r,onChange:u,inputRef:t,maxLength:i})})}));fn.displayName="InputControl";var pn=fn,xn=function(e){var t=e.action,n=e.canFullAccess,a=e.defEndFrame,s=e.defName,i=e.defStartFrame,l=e.deleteHandler,o=e.duplicateHandler,c=e.id,d=e.updateHandler,u=(0,p.useRecoilState)(on.GS),f=(0,r.Z)(u,2)[1],x=(0,p.useRecoilState)(on.IS),h=(0,r.Z)(x,2)[1],v=(0,p.useRecoilState)(on.VY),b=(0,r.Z)(v,2)[1],j=(0,p.useRecoilState)(on.vQ),g=(0,r.Z)(j,2),y=g[0],w=g[1],k=(0,p.useRecoilState)(on.YC),C=(0,r.Z)(k,2),N=C[0],S=C[1],F=(0,m.useState)(s),I=F[0],E=F[1],O=(0,m.useState)(i),Z=O[0],D=O[1],A=(0,m.useState)(a),R=A[0],T=A[1],L=(0,m.useState)(!1),V=L[0],U=L[1],_=(0,m.useState)(!1),B=_[0],z=_[1],J=(0,m.useState)(""),H=J[0],G=J[1],q=(0,m.useState)(!1),W=q[0],Q=q[1],$=(0,m.useState)(t),Y=$[0],X=$[1],ee=(0,p.useRecoilState)(M.yQ),te=(0,r.Z)(ee,1)[0];(0,m.useEffect)((function(){y||Q(!1)}),[y]),(0,m.useEffect)((function(){N!==c.toString()&&Q(!1)}),[N,Q,c]);var ne=(0,m.useCallback)((function(e){W&&f(e),X(e),d({id:c,action:e,name:I,startFrame:Z,endFrame:R})}),[W,f,X,d,c,I,Z,R]),re=(0,m.useCallback)((function(e){G(e)}),[G]),ae=(0,m.useCallback)((function(e){D(e),d({id:c,action:t,name:I,startFrame:e,endFrame:R}),y&&W&&b([e,R])}),[D,d,c,t,I,R,y,W,b]),se=(0,m.useCallback)((function(e){T(e),d({id:c,action:t,name:I,startFrame:Z,endFrame:e}),y&&W&&b([Z,e])}),[T,d,c,t,I,Z,y,W,b]),ie=(0,m.useCallback)((function(){l&&l(c),U(!1)}),[l,c,U]),le=(0,m.useCallback)((function(){U(!0)}),[U]),oe=(0,m.useCallback)((function(){o({id:c,action:t,name:I,startFrame:Z,endFrame:R})}),[o,c,t,I,Z,R]),ce=(0,m.useCallback)((function(e){E(e),d({id:c,action:t,name:e,startFrame:Z,endFrame:R})}),[E,d,c,t,Z,R]),de=(0,m.useCallback)((function(){U(!1)}),[U]);return(0,P.jsx)("div",{className:"mt-4 space-y-4",children:(0,P.jsxs)("div",{className:"relative flex flex-col px-2 py-2  text-sm font-medium text-gray-900 bg-white border border-gray-100 rounded-md ".concat(W?"shadow-md":""),role:"presentation",children:[V?(0,P.jsxs)("div",{className:"absolute top-0 left-0 z-10 w-full h-full pt-3 bg-white opacity-95",children:[(0,P.jsx)("div",{className:"flex items-center justify-center m-auto mb-5",children:(0,P.jsx)("div",{children:"Delete this segment?"})}),(0,P.jsxs)("div",{className:"flex items-center justify-center m-auto",children:[(0,P.jsx)("div",{onClick:de,className:"px-4 py-2 mr-1 text-sm font-medium text-gray-900 rounded-md hover:cursor-pointer",children:"Cancel"}),(0,P.jsx)("button",{onClick:ie,type:"button",className:"px-4 py-2 ml-1 text-sm font-medium text-white bg-red-500 rounded-md shadow-sm bg-error",children:"Delete"})]})]}):null,(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"w-full m-auto h-100",children:n?(0,P.jsx)(pn,{defaultValue:I,maxLength:30,inputHandler:ce,errorHandler:z}):(0,P.jsx)(Re.Z,{className:"pt-1",children:I})}),(0,P.jsx)("div",{className:"m-auto",children:n?(0,P.jsx)(dn,{duplicateHandler:oe,deleteHandler:le}):""})]}),(0,P.jsx)("div",{className:"flex mt-2 mb-2 border-t border-gray-100"}),(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"mr-auto",children:n?(0,P.jsx)(mn,{startFrameDefaultValue:Z,endFrameDefaultValue:R,startFrameHandler:ae,endFrameHandler:se,errorHandler:re}):(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center p-2 text-xs text-gray-900 bg-gray-100 border-transparent rounded-lg h-7",children:[(0,P.jsx)("div",{children:"#"}),(0,P.jsx)(Re.Z,{className:"pl-1 pr-1",children:Z})]}),(0,P.jsx)("div",{children:(0,P.jsx)(me.J,{name:"arrow-left",small:!0,className:"m-2.5"})}),(0,P.jsxs)("div",{className:"flex items-center p-2 text-xs text-gray-900 bg-gray-100 border-transparent rounded-lg h-7",children:[(0,P.jsx)("div",{children:"#"}),(0,P.jsx)(Re.Z,{className:"pl-1 pr-1",children:R})]})]})}),(0,P.jsx)("div",{className:"flex items-center p-1",children:n?(0,P.jsx)(un,{segmentStateHandler:ne,defaultValue:Y}):(0,P.jsx)(Re.Z,{tag:"div",children:"PlayOnce"===Y?"Play Once":"Loop"})}),(0,P.jsx)("div",{className:"flex m-auto",children:(0,P.jsx)(K.h,{name:W?"pause":"play",hoverIconClass:"text-gray-600",hoverBackgroundClass:"bg-transparent",noFocus:!0,onClick:function(){Z>te?G("unplayableSegment"):W?(Q(!1),h(!1),w(!1)):W||(S(c.toString()),f(Y),b([Z,R]),w(!0),Q(!0),h(!0))}})})]}),(0,P.jsxs)("div",{children:[B?(0,P.jsxs)("div",{className:"flex m-auto mt-1",children:[(0,P.jsx)(me.J,{name:"warning",small:!0,className:"mr-1 red-500"}),(0,P.jsx)(Re.Z,{color:"red",tag:"div",variant:"caption-2",children:"The segment’s name must have at least 3 characters."})]}):"","inputedFrameError"===H&&(0,P.jsxs)("div",{className:"flex m-auto mt-1",children:[(0,P.jsx)(me.J,{name:"warning",small:!0,className:"mr-1 red-500"}),(0,P.jsx)(Re.Z,{color:"red",tag:"div",variant:"caption-2",children:"Invalid frame number."})]}),"unplayableSegment"===H&&(0,P.jsxs)("div",{className:"flex m-auto mt-1",children:[(0,P.jsx)(me.J,{name:"warning",small:!0,className:"mr-1 red-500"}),(0,P.jsx)(Re.Z,{color:"red",tag:"div",variant:"caption-2",children:"This segment can't be played as the animation's frame numbers are invalid."})]})]})]})})},hn=n(20116),vn=function(e){var t=e.animation,n=(0,m.useState)([]),a=n[0],s=n[1],i=(0,p.useRecoilState)(M.yQ),l=(0,r.Z)(i,1)[0],o=(0,x.Db)(Gt.n9),c=(0,r.Z)(o,2),d=c[0],u=c[1],f=(0,x.Db)(Gt.pR),h=(0,r.Z)(f,2)[1],v=(0,nn.a)({scopes:(null==t?void 0:t.animationPermissionScopes)||[]}),b=v.canFullAccess,j=v.canView,g=(0,p.useRecoilState)(on.YC),y=(0,r.Z)(g,1)[0],w=(0,p.useRecoilState)(on.vQ),k=(0,r.Z)(w,2)[1],N=(0,p.useRecoilValue)(M.h3),S=null!=N&&N.id?null==N?void 0:N.id:t.currentVersionId,F=(0,z.U$)(),I=(0,x.aM)({query:C.Ov,pause:!S,variables:{id:S}}),E=(0,r.Z)(I,1)[0],O=E.fetching,Z=function(e){h({fileVersionId:S,playSegmentId:e}),y===e&&k(!1)},D=function(e){u({fileVersionId:S,input:{id:e.id,name:e.name,startFrame:e.startFrame,endFrame:e.endFrame,action:e.action}})},A=function(e){F.canUsePlaySegments()?u(e?{fileVersionId:S,input:{name:e.name,startFrame:e.startFrame,endFrame:e.endFrame,action:e.action}}:{fileVersionId:S,input:{name:"Segment Name",startFrame:0,endFrame:l,action:cn.Nn.Loop}}):(0,Ee.Z)({source:re.Hh.USE_PLAY_SEGMENTS,workspaceId:t.project.workspace.id})},R=function(e){A({id:e.id,name:e.name,startFrame:e.startFrame,endFrame:e.endFrame,action:e.action})};(0,m.useEffect)((function(){if(!O){var e,t=null===(e=E.data)||void 0===e?void 0:e.fileVersion.playSegment;if(E.data&&E.data.fileVersion&&E.data.fileVersion.playSegment){var n=[];t.forEach((function(e){var t={id:e.id,name:e.name,action:e.action,startFrame:e.startFrame,endFrame:e.endFrame};n.push(t)})),s(n)}}}),[O,E.data]);return(0,P.jsx)("div",{children:O?(0,P.jsx)("div",{className:"py-10",children:(0,P.jsx)(T.a,{type:"spinner",size:"xs"})}):a.length<=0?(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"mr-auto",children:(0,P.jsx)(K.h,{name:"double-click",hoverIconClass:"text-gray-700",hoverBackgroundClass:"bg-transparent",noFocus:!0})}),(0,P.jsxs)("div",{className:"mt-4 ml-4 mr-auto",children:[j()?"No segments have been created for this animation.":"Create segments to indicate the frame and interactions."," "]})]}),(0,P.jsx)("div",{children:b()&&(0,P.jsxs)("div",{className:"relative flex items-center mt-4",children:[(0,P.jsx)("button",{type:"button",className:"flex items-center justify-center flex-grow px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50",onClick:function(){return A()},children:"Add a new segment"}),!F.canUsePlaySegments()&&(0,P.jsx)(Ee.y,{className:"absolute right-2 h-7 w-7",iconOnly:!0,source:re.Hh.USE_PLAY_SEGMENTS,workspaceId:t.project.workspace.id})]})})]}):(0,P.jsxs)("div",{children:[!(N||!b())&&(0,P.jsx)("div",{className:"flex mt-4",children:(0,P.jsx)(hn.A,{text:"+ Add segment",color:"teal",onClick:function(){return A()},showLoader:d.fetching})}),(0,P.jsx)("div",{children:a.slice(0).reverse().map((function(e){return(0,P.jsx)("div",{children:(0,P.jsx)(xn,{deleteHandler:Z,duplicateHandler:R,updateHandler:D,id:e.id,defStartFrame:e.startFrame,defEndFrame:e.endFrame,action:e.action,canFullAccess:!(N||!b()),defName:e.name})},e.id)}))})]})})},bn=function(e){var t=e.animation;return(0,P.jsxs)("div",{className:"flex flex-col h-full",children:[(0,P.jsx)("h3",{className:"p-6 text-base text-gray-900 font-lf-bold",children:"Segments"}),(0,P.jsx)("div",{className:"flex-grow px-6 -mt-4 overflow-y-auto",children:(0,P.jsx)(vn,{animation:t})})]})},jn=n(99064),gn=n(66700),yn=function(e){var t=e.current,n=e.deleteItem,r=e.downloadItem,a=e.restoreItem,s=(0,m.useState)(!1),i=s[0],l=s[1],o=(0,P.jsxs)(ke.f.Item,{onSelect:r,children:[(0,P.jsx)(me.J,{name:"download",color:"text-gray-400",marginRight:!0}),(0,P.jsx)("span",{children:"Download"})]}),c=(0,P.jsxs)(ke.f.Item,{onSelect:function(){l(!0)},children:[(0,P.jsx)(me.J,{name:"delete",color:"text-gray-400",marginRight:!0}),(0,P.jsx)("span",{children:"Delete Version"})]}),d=(0,P.jsxs)(ke.f.Item,{onSelect:a,children:[(0,P.jsx)(me.J,{name:"round-arrow",color:"text-gray-400",marginRight:!0}),(0,P.jsx)("span",{children:"Restore Version"})]});return(0,P.jsxs)(P.Fragment,{children:[!t&&(0,P.jsxs)(ke.f,{children:[(0,P.jsx)(ke.f.Trigger,{type:"icon",children:(0,P.jsx)(me.J,{name:"kebab-menu"})}),(0,P.jsxs)(ke.f.Content,{side:"bottom",align:"start",children:[o,t?null:d,t?null:c]})]}),(0,P.jsx)(ye.s,{title:(0,P.jsx)("p",{className:"text-red-500",children:"Delete file version"}),body:"Are you sure you want to delete this file version? This action cannot be undone.",onConfirm:function(){l(!1),n()},closeCallback:function(){l(!1)},showModal:i,buttonTitle:"Delete"})]})};function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cn="https://editor-integration-workflow.lottiefiles.com",Nn=function(e){var t,n=e.active,a=void 0!==n&&n,i=e.current,o=void 0!==i&&i,c=e.fileVersion,u=e.first,f=e.last,h=e.projectId,v=e.selectVersionPreview,b=e.setLoading,g=e.workspaceId,w=(0,d.useRouter)(),k=(0,p.useSetRecoilState)(M.h3),N=(0,p.useResetRecoilState)(M.h3),S=(0,x.Db)(C.qo),F=(0,r.Z)(S,2)[1],I=(0,x.Db)(C.jQ),E=(0,r.Z)(I,2)[1],Z=(0,O.p)(),D=(0,m.useCallback)((function(e){e.stopPropagation();var t=w.query;w.push({pathname:"/animation/[id]",query:{id:t.id}},"/animation/".concat(t.id),{shallow:!0}),k(o?null:c);(0,s.Z9)(new s.CI({fileId:c.fileId,fileType:"lottie",fileVersionId:c.id,projectId:h,workspaceId:g,source:"Direct"})),v()}),[c,h,g,k,o,w,v]),A=(0,m.useCallback)((0,j.Z)(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.fileVersionId||null==Z||Z.pushError("Fail to restore this file version. (".concat(c.fileVersionId,")")),b&&b(!0),e.next=4,F({fileId:c.fileId,fileVersionId:c.fileVersionId});case 4:if(null==(t=e.sent)||!t.error){e.next=9;break}return null==Z||Z.pushError("Fail to restore this file version, unknown error occured."),b&&b(!1),e.abrupt("return",null);case 9:return(0,s.Z9)(new s.Bh(c.fileId,c.id)),e.abrupt("return",k(null));case 11:case"end":return e.stop()}}),e)}))),[c,k,F]),R=(0,m.useCallback)((0,j.Z)(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({id:c.id});case 2:t=e.sent,(n=t.error)?null==Z||Z.pushError(n.message):(0,s.Z9)(new s.Tw({fileId:c.fileId,fileVersionId:c.id,projectId:h,workspaceId:g})),N();case 6:case"end":return e.stop()}}),e)}))),[E,c.id]);function T(){return(T=(0,j.Z)(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c&&(0,s.Z9)(new s.tp({fileId:c.fileId,fileType:"lottie",fileVersionId:c.id,projectId:h,workspaceId:g})),t="".concat(Cn,"/download/").concat(null==c?void 0:c.fileKey).concat(null!=c&&c.fileVersionId?"?versionId=".concat(null==c?void 0:c.fileVersionId):""),(n=document.createElement("a")).style.display="none",n.href=t,n.download=null==c?void 0:c.name,document.body.appendChild(n),n.click()}catch(e){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)("li",{className:l()("flex group relative cursor-pointer p-6 hover:bg-gray-50",{"bg-teal-50":a}),role:"presentation",onClick:D,children:[(0,P.jsxs)("div",{className:"flex flex-col w-16 pt-0.5 items-center flex-shrink-0 mr-4 ",children:[!u&&(0,P.jsx)("div",{className:l()("bg-gray-200 h-5 -mt-5 w-px top-0")}),(0,P.jsx)("div",{className:"relative",children:(0,P.jsx)(Re.Z,{variant:o?"heading-6":"content",children:o?"Current":"v".concat(c.versionNumber)})}),!f&&(0,P.jsx)("div",{className:l()("bg-gray-200 -mb-4 h-full w-px",{"top-0":!u,"top-10":u})})]}),(0,P.jsxs)("div",{className:"",children:[(0,P.jsx)("div",{children:(0,P.jsx)(Re.Z,{variant:"content",color:"gray",darkest:!0,children:c.name})}),(0,P.jsxs)("div",{className:"flex space-x-3",children:[(0,P.jsx)(Re.Z,{className:"text-xs font-lf-regular",children:(0,P.jsx)(gn.b,{date:new Date(c.createdAt)})}),(0,P.jsx)(Re.Z,{className:"text-xs font-lf-regular",children:(0,Ze.gB)(parseFloat(null===(t=c.fileObject)||void 0===t?void 0:t.attributes.contentLength),0)})]}),c.createdBy&&(0,P.jsxs)("div",{className:"flex items-center mt-2 space-x-2",children:[(0,P.jsx)(Mt.q,{name:c.createdBy.name,avatarOnly:!0}),(0,P.jsx)(Re.Z,{variant:"caption-1",color:"gray",children:c.createdBy.name})]})]}),(0,P.jsx)("div",{className:"absolute invisible right-2 group-hover:visible",children:(0,P.jsx)(yn,{current:o,restoreItem:A,deleteItem:R,downloadItem:function(){return T.apply(this,arguments)}})})]})})},Sn={first:30,last:null,after:null,before:null,orderBy:JSON.stringify({createdAt:"DESC"})},Fn=function(e){var t=e.animation,n=e.selectVersionPreview,a=(0,m.useState)(!1),s=a[0],i=a[1],l=(0,m.useState)([]),o=l[0],c=l[1],d=(0,p.useRecoilValue)(M.h3),u=(0,he.w)(),f=(0,x.aM)({query:C._V,variables:kn({fileId:t.id},Sn)}),h=(0,r.Z)(f,1)[0],v=(0,z.cF)().activeWorkspaceId,b=null!=v?v:"no workspace";(0,m.useEffect)((function(){i(h.fetching||h.stale),h.data&&c(h.data.fileVersions.edges.map((function(e){return e.node})))}),[i,h]);var j=(0,p.useSetRecoilState)(jn.oV),g=(0,m.useCallback)((function(){u.canUploadNewVersions()?j({animation:t,workspaceId:b}):(0,Ee.Z)({source:re.Hh.UPLOAD_NEW_VERSIONS,workspaceId:b})}),[u,j,t,b]);return(0,P.jsxs)("div",{className:"flex flex-col h-full",children:[(0,P.jsx)("h3",{className:"p-6 text-base text-gray-900 font-lf-bold",children:"Version History"}),(0,P.jsx)("div",{className:"flex px-6",children:(0,P.jsxs)("button",{type:"button",className:"relative flex items-center justify-center flex-grow px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50",onClick:g,children:[(0,P.jsx)(me.J,{name:"upload",color:"text-gray-600",marginRight:!0}),"Upload new version",!u.canUploadNewVersions()&&(0,P.jsx)(Ee.y,{className:"absolute right-2",iconOnly:!0,source:re.Hh.UPLOAD_NEW_VERSIONS,workspaceId:b})]})}),(0,P.jsxs)("div",{className:"flex-grow mt-6 overflow-y-auto",children:[s&&(0,P.jsx)(T.a,{type:"spinner"}),(0,P.jsx)("ul",{children:o&&o.map((function(e,r){return(0,P.jsx)(Nn,{selectVersionPreview:n,first:0===r,last:r===o.length-1,fileVersion:e,current:e.id===t.currentVersionId,active:d&&e.id===(null==d?void 0:d.id)||!d&&e.id===t.currentVersionId,setLoading:i,projectId:t.project.id,workspaceId:t.project.workspace.id},"".concat(e.id))}))})]})]})},In=n(86454),En=n(30259),On=n(733),Zn=n(48550),Dn=n(77453),An=n(98637),Rn=n(38889),Tn=n(16824),Pn=function(){var e,t,n,i,b,j,g,y,w,k,C,S=(0,m.useState)(),F=S[0],I=S[1],E=(0,p.useRecoilState)(M.sI),O=(0,r.Z)(E,2),Z=O[0],D=O[1],R=(0,m.useState)(),T=R[0],L=R[1],V=(0,m.useState)(),U=V[0],_=V[1],z=(0,p.useSetRecoilState)(Rn.E4),H=(0,p.useSetRecoilState)(M.GG),te=(0,m.useState)(null),ne=te[0],re=te[1],ae=(0,m.useState)(null),se=ae[0],ie=ae[1],le=(0,m.useState)(!1),oe=le[0],ce=le[1],de=(0,p.useResetRecoilState)(M.h3),ue=(0,p.useResetRecoilState)(M.m9),me=(0,p.useResetRecoilState)(M.lS),fe=(0,p.useSetRecoilState)(N.QJ),pe=(0,m.useState)(!1),xe=pe[0],ve=pe[1],be=(0,d.useRouter)(),je=(0,rn.k)(),ge=je.canShowOnboarding,ye=je.start,we=be.query,ke=we.comment,Ce=we.handback_id,Ne=we.id,Se=(0,En.a)(),Fe=(0,x.aM)({query:Gt.wP,variables:{id:Ne},pause:!Ne}),Ie=(0,r.Z)(Fe,1)[0];(0,m.useEffect)((function(){if(Ie.data){var e,t,n,r=null===(e=Ie.data.file.folder)||void 0===e?void 0:e.id,a=null===(t=Ie.data.file.folder)||void 0===t?void 0:t.name,s=Ie.data.file.project.id,i=Ie.data.file.project.title,l=null!==(n=Ie.data.file.project.isPrivate)&&void 0!==n&&n,o=Ie.data.file.project.workspace.id;fe({type:r?"folder":"project",name:r?a:i,folderId:r,folderName:a,projectId:s,projectTitle:i,isPrivate:l,workspaceId:o})}}),[Ie.data,fe]);var Ee=(0,m.useState)("#f8fafc"),Oe=Ee[0],Ze=Ee[1],Ae=(0,p.useRecoilState)(M.h3),Re=(0,r.Z)(Ae,1)[0],Te=(0,m.useState)({id:"",showDescOnCollection:!1,description:"",descriptionModifiedBy:null}),Pe=Te[0],Le=Te[1];(0,m.useEffect)((function(){de(),ue()}),[de,ue]);var Ve=(0,m.useCallback)((function(e){try{void 0!==(0,o.H3)(e)&&Ze(e)}catch(e){Ze("#f8fafc")}}),[]);(0,m.useEffect)((function(){if(null!=Re&&Re.fileObject){I(Re.fileObject.url),L(Re.fileObject.metadata),_(Re.fileObject.attributes),ie(Re.fileObject),Ve(Re.backgroundColor);var e=Re.fileObject.url,t=e.substring(e.lastIndexOf("/")+1,e.indexOf("?")).split(".").pop();H("lottie"===t)}else if(Ie.data&&!Ie.fetching){var n;I(Ie.data.file.fileObject.url),D(Ie.data.file),z({type:"project",id:Ie.data.file.project.id}),L(Ie.data.file.fileObject.metadata),_(Ie.data.file.fileObject.attributes),ie(Ie.data.file.fileObject),Le({id:Ie.data.file.id,showDescOnCollection:Ie.data.file.showDescOnCollection,description:Ie.data.file.description,descriptionUpdatedAt:null===(n=Ie.data.file)||void 0===n?void 0:n.descriptionUpdatedAt,descriptionModifiedBy:Ie.data.file.descriptionModifiedBy}),Ve(Ie.data.file.backgroundColor);var r=Ie.data.file.fileObject.url,a=r.substring(r.lastIndexOf("/")+1,r.indexOf("?")).split(".").pop();H("lottie"===a)}else if(Ie.error)throw Ie.error.toString().includes("Access denied")?new h.J:new Error(Ie.error.message)}),[Ie,Re,H,D,z,Ve]),(0,m.useEffect)((function(){var e;null!==(e=Ie.data)&&void 0!==e&&e.file.id&&(0,s.Z9)(new s.Aj({fileId:Ie.data.file.id,projectId:Ie.data.file.project.id,workspaceId:Ie.data.file.project.workspace.id}))}),[null===(e=Ie.data)||void 0===e?void 0:e.file.id,null===(t=Ie.data)||void 0===t?void 0:t.file.project.id,null===(n=Ie.data)||void 0===n?void 0:n.file.project.workspace.id]);var Me=(0,p.useRecoilState)(M.fu),Ue=(0,r.Z)(Me,2),_e=Ue[0],Be=Ue[1],ze=(0,m.useState)(!1),Je=ze[0],He=ze[1],Ge=(0,m.useState)(!1),qe=Ge[0],We=Ge[1],Qe=(0,f.r)(),$e=(0,nn.a)({scopes:(null==Z?void 0:Z.animationPermissionScopes)||[]}),Ye=$e.canDownload,Ke=$e.canFullAccess,Xe=$e.canView,et=(0,p.useRecoilState)(on.vQ),tt=(0,r.Z)(et,2)[1],nt=(0,m.useCallback)((function(){Be(null),ve(!1)}),[Be,ve]),rt=(0,m.useCallback)((function(e){return function(){_e===e?("file-info"===e&&tt(!1),nt()):("file-info"!==e&&tt(!1),Be(e))}}),[nt,_e,Be,tt]);(0,m.useEffect)((function(){ke&&"comments"!==_e&&rt("comments")}),[ke,_e,rt]),(0,A.Z)({key:"c",action:function(){"comments"!==_e&&Be("comments"),"comments"===_e&&nt()},dependencies:[nt,_e,Be]});var at=(0,x.aM)({query:Dn.g,variables:{id:Ce},pause:!Ce}),st=(0,r.Z)(at,1)[0];(0,m.useEffect)((function(){"comments"!==_e&&be.query.comment&&(delete be.query.comment,be.push({pathname:be.pathname,query:be.query},void 0,{shallow:!0})),be.query.edit_description&&("file-info"!==_e&&rt("file-info")(),ve(!0),delete be.query.edit_description,be.replace({pathname:be.pathname,query:be.query},void 0,{shallow:!0}))}),[_e,be,rt,xe]);var it=(0,m.useCallback)((function(){Je?(He(!1),Qe.exit()):(He(!0),Be(null),Qe.enter())}),[Qe,Je,Be]),lt=(0,m.useCallback)((function(e,t){t===Qe&&He(!!e)}),[Qe]);(0,m.useEffect)((function(){ye([In._r,In.T8,In.qO,In.fA,In.rG,In.Mx,In.QT])}),[Z]);var ot=(0,m.useCallback)((function(){We(!qe)}),[qe,We]),ct=(0,m.useRef)(null),dt=(0,m.useMemo)((function(){return(null==Re?void 0:Re.id)||(null==Z?void 0:Z.currentVersionId)||""}),[null==Re?void 0:Re.id,null==Z?void 0:Z.currentVersionId]),ut=(0,m.useMemo)((function(){var e,t;return{entityId:dt,entityGroupId:(null==Z?void 0:Z.id)||Ne,isEnabled:null==Re||!Re.id||Re.id===(null==Z?void 0:Z.currentVersionId),workspaceId:(null==Z||null===(e=Z.project)||void 0===e||null===(t=e.workspace)||void 0===t?void 0:t.id)||""}}),[dt,null==Re?void 0:Re.id,null==Z?void 0:Z.currentVersionId,null==Z?void 0:Z.id,null==Z||null===(i=Z.project)||void 0===i||null===(b=i.workspace)||void 0===b?void 0:b.id,Ne]),xt=(0,On.X0)(ut),ht=(0,On.us)(ut),vt=(0,On.es)(ut),bt=(0,On.VP)(ut),jt=(0,On.UR)(ut),gt=(0,On.OL)(ut),yt=(0,On._i)(ut),wt=(0,Zn.M)({entityId:"comments"===_e?dt:"",entityType:Tn.TY.FileVersion}),kt=wt.canFetchMoreComments,Ct=wt.commentsQuery,Nt=wt.onFetchMoreComments,St=wt.onShowReplies,Ft=wt.parentComment,It=wt.pushoverMode,Et=(0,m.useMemo)((function(){return(0,o.H3)(Oe||"#f8fafc")<.5}),[Oe]),Ot=(0,x.aM)({query:An.mT,variables:{id:Ne},pause:!Ne||"comments"!==_e}),Zt=(0,r.Z)(Ot,1)[0],Dt=(0,m.useState)(!1),At=Dt[0],Rt=Dt[1],Tt=(0,m.useCallback)((function(){return Rt(!0)}),[]),Pt=(0,m.useCallback)((function(){return Rt(!1)}),[]);return(0,m.useEffect)((function(){Pt()}),[It,Pt]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(u.default,{children:(0,P.jsx)("title",{children:(null==Z?void 0:Z.name)||"Animation"})}),(0,P.jsxs)(G.o,{headerControl:(0,P.jsx)(he.s,{features:null==Z?void 0:Z.features,children:(0,P.jsx)(sn,{animation:Z})}),contentWrapperCssClasses:"flex overflow-hidden flex-grow",children:[Z&&(0,P.jsx)(he.s,{features:Z.features,children:(0,P.jsxs)(f.I,{className:l()({"flex flex-grow":!0}),handle:Qe,onChange:lt,children:[(0,P.jsx)("div",{className:l()({"relative flex flex-grow ":!0,"transparency-grid":qe}),children:(0,P.jsxs)("div",{className:"relative flex w-full h-full",children:[(0,P.jsx)("div",{className:l()({"absolute inset-0 flex flex-grow ":!0,"transparency-grid":qe}),style:{background:Oe}}),(0,P.jsxs)("div",{className:l()("relative flex items-center justify-center w-full h-full overflow-auto",{"pr-80":null!==_e}),children:[F&&!ne&&(0,P.jsx)($.G,{showComments:!0,canComment:!Re,mentionables:null===(j=Zt.data)||void 0===j?void 0:j.commentMentionableUsers,portalRoot:ct.current,animationUrl:F,currentDiscussion:Ft,currentUserId:null===(g=Se.user)||void 0===g?void 0:g.id,entityId:dt,entityType:Tn.TY.FileVersion,controls:!Je,isLight:Et,onDeleteComment:xt,onEditComment:ht,onPostComment:vt,onReplyToComment:bt,onResolveComment:jt,onSelectReaction:gt,onUnresolveComment:yt}),F&&ne&&(0,P.jsx)($.G,{portalRoot:ct.current,animationUrl:(0,c.cloneDeep)(ne),controls:!Je,isLight:Et}),!Je&&(0,P.jsxs)("div",{className:l()("absolute top-0 bottom-0 flex flex-col pt-8 pr-8 pb-14 ",{"right-0":!_e,"right-86":null!==_e}),children:[(0,P.jsxs)("div",{className:"flex flex-col space-y-2","data-onboarding-id":"anim-panel-btn",children:[Xe()&&(0,P.jsx)("div",{"data-onboarding-id":"anim-comment-btn",children:(0,P.jsx)(ee.n,{icon:"comment",title:"Comments",shortcut:(0,P.jsx)(X.z,{keys:["C"]}),onClick:rt("comments"),iconColorClass:"comments"===_e?"text-teal-300":"text-gray-600"})}),(0,P.jsx)(ee.n,{icon:"info",title:"Animation information",onClick:rt("file-info"),iconColorClass:"file-info"===_e?"text-teal-300":"text-gray-600"}),Ke()&&!Re&&(0,P.jsx)("div",{"data-onboarding-id":"anim-color-palette-btn",children:(0,P.jsx)(ee.n,{icon:"color-palette",title:"Color Palette",onClick:rt("color-palettes"),iconColorClass:"color-palettes"===_e?"text-teal-300":"text-gray-600"})}),!Re&&(0,P.jsx)("div",{"data-onboarding-id":"anim-segment-btn",children:(0,P.jsx)(ee.n,{icon:"segment-mockup",title:"Segments",onClick:rt("segment-mockup"),iconColorClass:"segment-mockup"===_e?"text-teal-300":"text-gray-600"})}),Ke()&&(0,P.jsx)("div",{"data-onboarding-id":"anim-version-btn",children:(0,P.jsx)(ee.n,{icon:"history",title:"Version History",onClick:rt("versions"),iconColorClass:"versions"===_e?"text-teal-300":"text-gray-600"})}),Ye()&&!Re&&(0,P.jsx)(ee.n,{icon:"embed",title:"Handoff & Embed",iconColorClass:"embed"===_e?"text-teal-300":"text-gray-600",onClick:rt("embed")})]}),(0,P.jsxs)("div",{className:"flex flex-col mt-auto space-y-2",children:[(0,P.jsx)(W.s,{}),(0,P.jsx)(ee.n,{icon:"transparent",title:"Transparency grid",onClick:ot,iconColorClass:qe?"text-teal-300":"text-gray-600"}),(0,P.jsx)(q.e,{animationBackgroundColor:Oe,onChange:function(e){Ze(e)},fileId:Z.id,portalRoot:ct.current}),(0,P.jsx)(ee.n,{icon:"full-screen",title:"Full screen",onClick:it,iconColorClass:Je?"text-teal-300":"text-gray-600"}),(0,P.jsx)(Y.L,{})]})]})]})]})}),(0,P.jsx)("div",{className:"absolute bottom-0 right-0 flex flex-grow overflow-hidden top-16","data-onboarding-watch":"side_panel",children:(0,P.jsxs)(a.uT,{show:null!==_e,className:"relative flex flex-col bg-white border-l border-gray-100 w-86",enter:"transform transition ease-in-out duration-50",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-50",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:[(0,P.jsx)("div",{className:"absolute right-6 top-6",children:(0,P.jsx)(K.h,{name:"cross",onClick:nt,small:!0,iconLighter:!0})}),"comments"===_e&&(0,P.jsx)(Q.W,{currentUserId:null===(y=Se.user)||void 0===y?void 0:y.id,discussions:null===(w=Ct.data)||void 0===w||null===(k=w.comments)||void 0===k?void 0:k.edges,isFetchingDiscussions:Ct.fetching,isInputExpanded:At,mentionables:null===(C=Zt.data)||void 0===C?void 0:C.commentMentionableUsers,mode:It,parentDiscussion:Ft,canFetchMoreComments:kt,onCollapseInput:Pt,onFetchMoreComments:Nt,onExpandInput:Tt,onDelete:xt,onEdit:ht,onPost:vt,onReply:bt,onReplyClick:St,onResolve:jt,onSelectReaction:gt,onUnresolve:yt}),"file-info"===_e&&T&&(0,P.jsx)(pt.ft,{fileMetaData:T,basicMetadata:U,fileData:Pe,canEdit:Ke(),isEditing:Boolean(Ke()&&xe),fileUrl:Z.fileObject.url}),"color-palettes"===_e&&(0,P.jsx)(De,{animationUrl:F,portalRoot:ct.current,workspaceId:Z.project.workspace.id,setColorModifiedLottie:re,setOpenColorPaletteModal:ce}),"segment-mockup"===_e&&(0,P.jsx)(bn,{animation:Z}),"versions"===_e&&(0,P.jsx)(Fn,{selectVersionPreview:function(){re(null),me()},animation:Z}),"embed"===_e&&(0,P.jsx)(mt,{fileId:Z.id,currentVersionId:Z.currentVersionId,workspaceId:Z.project.workspace.id}),"qrcode"===_e&&(0,P.jsx)(ln,{fileUrl:Z.fileObject.url}),"download"===_e&&U&&(0,P.jsx)(ft.r,{animation:Z,basicMetadata:U})]})}),(0,P.jsx)("div",{ref:ct})]})}),Z&&Ce&&!st.fetching&&st.data&&(0,P.jsx)(J,{animation:Z,handback:st.data.fileHandback}),oe&&ne&&se&&(0,P.jsx)(B,{currentFile:se,currentFileId:null==Z?void 0:Z.id,lottieAnimation:ne,closeCallback:function(){ce(!1)},show:!0})]}),(0,P.jsx)(v.N,{illustrationURL:"/images/onboarding-animation.png",show:ge(an.yM.INTRO_ANIM_SEQUENCE),title:"A fresh new look for animation pages",description:"We’ve redesigned the animation pages from the ground up so you can easily get to the tools you’ll need and enjoy a better overall experience. Check out what we’ve changed!",buttonContent:"Let's go",onClose:function(){return ye([In.p9])}})]})};Pn.getLayout=function(e){return(0,P.jsx)(H.B,{collapsed:!0,children:e})};var Ln=Pn},60649:function(e,t,n){var r,a;n.d(t,{f:function(){return r},p:function(){return a}}),function(e){e.COLLECTION="COLLECTION",e.FILE="FILE"}(r||(r={})),function(e){e.COMMENT="comment",e.DOWNLOAD_AND_VIEW="downloadAndView",e.EDIT_ACCESS="editAccess",e.NO_ACCESS="noAccess",e.VIEW_ONLY="viewOnly"}(a||(a={}))}}]);